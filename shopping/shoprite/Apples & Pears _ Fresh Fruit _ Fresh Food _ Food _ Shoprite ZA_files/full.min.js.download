
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(k,y,z){k instanceof String&&(k=String(k));for(var q=k.length,G=0;G<q;G++){var O=k[G];if(y.call(z,O,G,k))return{i:G,v:O}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,y,z){if(k==Array.prototype||k==Object.prototype)return k;k[y]=z.value;return k};$jscomp.getGlobal=function(k){k=["object"==typeof globalThis&&globalThis,k,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var y=0;y<k.length;++y){var z=k[y];if(z&&z.Math==Math)return z}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(k,y){var z=$jscomp.propertyToPolyfillSymbol[y];if(null==z)return k[y];z=k[z];return void 0!==z?z:k[y]};$jscomp.polyfill=function(k,y,z,q){y&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(k,y,z,q):$jscomp.polyfillUnisolated(k,y,z,q))};$jscomp.polyfillUnisolated=function(k,y,z,q){z=$jscomp.global;k=k.split(".");for(q=0;q<k.length-1;q++){var G=k[q];if(!(G in z))return;z=z[G]}k=k[k.length-1];q=z[k];y=y(q);y!=q&&null!=y&&$jscomp.defineProperty(z,k,{configurable:!0,writable:!0,value:y})};$jscomp.polyfillIsolated=function(k,y,z,q){var G=k.split(".");k=1===G.length;q=G[0];q=!k&&q in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var O=0;O<G.length-1;O++){var ma=G[O];if(!(ma in q))return;q=q[ma]}G=G[G.length-1];z=$jscomp.IS_SYMBOL_NATIVE&&"es6"===z?q[G]:null;y=y(z);null!=y&&(k?$jscomp.defineProperty($jscomp.polyfills,G,{configurable:!0,writable:!0,value:y}):y!==z&&($jscomp.propertyToPolyfillSymbol[G]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(G):$jscomp.POLYFILL_PREFIX+G,G=$jscomp.propertyToPolyfillSymbol[G],$jscomp.defineProperty(q,G,{configurable:!0,writable:!0,value:y})))};$jscomp.polyfill("Array.prototype.find",function(k){return k?k:function(y,z){return $jscomp.findInternal(this,y,z).v}},"es6","es3");(function(k){"function"===typeof define&&define.amd?define(["jquery"],function(y){return k(y,window,document)}):"object"===typeof exports?module.exports=function(y,z){y||(y=window);z||(z="undefined"!==typeof window?require("jquery"):require("jquery")(y));return k(z,y,y.document)}:k(jQuery,window,document)})(function(k,y,z,q){function G(a){var b,c,d={};k.each(a,function(f,e){(b=f.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=f.replace(b[0],b[2].toLowerCase()),d[c]=f,"o"===b[1]&&G(a[f]))});a._hungarianMap=d}function O(a,b,c){a._hungarianMap||G(a);var d;k.each(b,function(f,e){d=a._hungarianMap[f];d===q||!c&&b[d]!==q||("o"===d.charAt(0)?(b[d]||(b[d]={}),k.extend(!0,b[d],b[f]),O(a[d],b[d],c)):b[d]=b[f])})}function ma(a){var b=u.defaults.oLanguage,c=b.sDecimal;c&&Va(c);if(a){var d=a.sZeroRecords;!a.sEmptyTable&&d&&"No data available in table"===b.sEmptyTable&&V(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&d&&"Loading..."===b.sLoadingRecords&&V(a,a,"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&c!==a&&Va(a)}}function yb(a){R(a,"ordering","bSort");R(a,"orderMulti","bSortMulti");R(a,"orderClasses","bSortClasses");R(a,"orderCellsTop","bSortCellsTop");R(a,"order","aaSorting");R(a,"orderFixed","aaSortingFixed");R(a,"paging","bPaginate");R(a,"pagingType","sPaginationType");R(a,"pageLength","iDisplayLength");R(a,"searching","bFilter");"boolean"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":"");"boolean"===typeof a.scrollX&&(a.scrollX=a.scrollX?"100%":"");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&O(u.models.oSearch,a[b])}function zb(a){R(a,"orderable","bSortable");R(a,"orderData","aDataSort");R(a,"orderSequence","asSorting");R(a,"orderDataType","sortDataType");var b=a.aDataSort;"number"!==typeof b||Array.isArray(b)||(a.aDataSort=[b])}function Ab(a){if(!u.__browser){var b={};u.__browser=b;var c=k("<div/>").css({position:"fixed",top:0,left:-1*k(y).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(k("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(k("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),f=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===f[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(f.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}k.extend(a.oBrowser,u.__browser);a.oScroll.iBarWidth=u.__browser.barWidth}
function Bb(a,b,c,d,f,e){var g=!1;if(c!==q){var h=c;g=!0}for(;d!==f;)a.hasOwnProperty(d)&&(h=g?b(h,a[d],d,a):a[d],g=!0,d+=e);return h}function Wa(a,b){var c=u.defaults.column,d=a.aoColumns.length;c=k.extend({},u.models.oColumn,c,{nTh:b?b:z.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=k.extend({},u.models.oSearch,c[d]);Da(a,d,k(b).data())}function Da(a,b,c){b=a.aoColumns[b];var d=a.oClasses,f=k(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=f.attr("width")||null;var e=(f.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);e&&(b.sWidthOrig=e[1])}c!==q&&null!==c&&(zb(c),O(u.defaults.column,c,!0),c.mDataProp===q||c.mData||(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&f.addClass(c.sClass),k.extend(b,c),V(b,c,"sWidth","sWidthOrig"),c.iDataSort!==q&&(b.aDataSort=[c.iDataSort]),V(b,c,"aDataSort"));var g=b.mData,h=ia(g),l=b.mRender?ia(b.mRender):null;c=function(n){return"string"===typeof n&&-1!==n.indexOf("@")};b._bAttrSrc=k.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(n,m,p){var t=h(n,m,q,p);return l&&m?l(t,m,n,p):t};b.fnSetData=function(n,m,p){return da(g)(n,m,p)};"number"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,f.addClass(d.sSortableNone));a=-1!==k.inArray("asc",b.asSorting);c=-1!==k.inArray("desc",b.asSorting);b.bSortable&&(a||c)?a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI):(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI="")}function ra(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Xa(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||Ea(a);I(a,null,"column-sizing",[a])}function sa(a,b){a=Fa(a,"bVisible");return"number"===typeof a[b]?a[b]:null}function ta(a,b){a=Fa(a,"bVisible");b=k.inArray(b,a);return-1!==b?b:null}function na(a){var b=0;k.each(a.aoColumns,function(c,d){d.bVisible&&"none"!==k(d.nTh).css("display")&&b++});return b}function Fa(a,b){var c=[];k.map(a.aoColumns,function(d,f){d[b]&&c.push(f)});return c}function Ya(a){var b=a.aoColumns,c=a.aoData,d=u.ext.type.detect,f,e,g;var h=0;for(f=b.length;h<f;h++){var l=b[h];var n=[];if(!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){var m=0;for(e=d.length;m<e;m++){var p=0;for(g=c.length;p<g;p++){n[p]===q&&(n[p]=S(a,p,h,"type"));var t=d[m](n[p],a);if(!t&&m!==d.length-1)break;if("html"===t)break}if(t){l.sType=t;break}}l.sType||(l.sType="string")}}}function Cb(a,b,c,d){var f,e,g,h=a.aoColumns;if(b)for(f=b.length-1;0<=f;f--){var l=b[f];var n=l.targets!==q?l.targets:l.aTargets;Array.isArray(n)||(n=[n]);var m=0;for(e=n.length;m<e;m++)if("number"===typeof n[m]&&0<=n[m]){for(;h.length<=n[m];)Wa(a);d(n[m],l)}else if("number"===typeof n[m]&&0>n[m])d(h.length+n[m],l);else if("string"===typeof n[m]){var p=0;for(g=h.length;p<g;p++)("_all"==n[m]||k(h[p].nTh).hasClass(n[m]))&&d(p,l)}}if(c)for(f=0,a=c.length;f<a;f++)d(f,c[f])}function ea(a,b,c,d){var f=a.aoData.length,e=k.extend(!0,{},u.models.oRow,{src:c?"dom":"data",idx:f});e._aData=b;a.aoData.push(e);for(var g=a.aoColumns,h=0,l=g.length;h<l;h++)g[h].sType=null;a.aiDisplayMaster.push(f);b=a.rowIdFn(b);b!==q&&(a.aIds[b]=e);!c&&a.oFeatures.bDeferRender||Za(a,f,c,d);return f}function Ga(a,b){var c;b instanceof k||(b=k(b));return b.map(function(d,f){c=$a(a,f);return ea(a,c.data,f,c.cells)})}function S(a,b,c,d){var f=a.iDraw,e=a.aoColumns[c],g=a.aoData[b]._aData,h=e.sDefaultContent,l=e.fnGetData(g,d,{settings:a,row:b,col:c});if(l===q)return a.iDrawError!=f&&null===h&&(aa(a,0,"Requested unknown parameter "+("function"==typeof e.mData?"{function}":"'"+e.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=f),h;if((l===g||null===l)&&null!==h&&d!==q)l=h;else if("function"===typeof l)return l.call(g);return null===l&&"display"==d?"":l}function Db(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function ab(a){return k.map(a.match(/(\\.|[^\.])+/g)||[""],function(b){return b.replace(/\\\./g,".")})}function ia(a){if(k.isPlainObject(a)){var b={};k.each(a,function(d,f){f&&(b[d]=ia(f))});return function(d,f,e,g){var h=b[f]||b._;return h!==q?h(d,f,e,g):d}}if(null===a)return function(d){return d};if("function"===typeof a)return function(d,f,e,g){return a(d,f,e,g)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(d,f){return d[a]};var c=function(d,f,e){if(""!==e){var g=ab(e);for(var h=0,l=g.length;h<l;h++){e=g[h].match(ua);var n=g[h].match(oa);if(e){g[h]=g[h].replace(ua,"");""!==g[h]&&(d=d[g[h]]);n=[];g.splice(0,h+1);g=g.join(".");if(Array.isArray(d))for(h=0,l=d.length;h<l;h++)n.push(c(d[h],f,g));d=e[0].substring(1,e[0].length-1);d=""===d?n:n.join(d);break}else if(n){g[h]=g[h].replace(oa,"");d=d[g[h]]();continue}if(null===d||d[g[h]]===q)return q;d=d[g[h]]}}return d};return function(d,f){return c(d,f,a)}}function da(a){if(k.isPlainObject(a))return da(a._);if(null===a)return function(){};if("function"===typeof a)return function(c,d,f){a(c,"set",d,f)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(c,d){c[a]=d};var b=function(c,d,f){f=ab(f);var e=f[f.length-1];for(var g,h,l=0,n=f.length-1;l<n;l++){if("__proto__"===f[l])throw Error("Cannot set prototype values");g=f[l].match(ua);h=f[l].match(oa);if(g){f[l]=f[l].replace(ua,"");c[f[l]]=[];e=f.slice();e.splice(0,l+1);g=e.join(".");if(Array.isArray(d))for(h=0,n=d.length;h<n;h++)e={},b(e,d[h],g),c[f[l]].push(e);else c[f[l]]=d;return}h&&(f[l]=f[l].replace(oa,""),c=c[f[l]](d));if(null===c[f[l]]||c[f[l]]===q)c[f[l]]={};c=c[f[l]]}if(e.match(oa))c[e.replace(oa,"")](d);else c[e.replace(ua,"")]=d};return function(c,d){return b(c,d,a)}}function bb(a){return T(a.aoData,"_aData")}function Ha(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function Ia(a,b,c){for(var d=-1,f=0,e=a.length;f<e;f++)a[f]==b?d=f:a[f]>b&&a[f]--;-1!=d&&c===q&&a.splice(d,1)}function va(a,b,c,d){var f=a.aoData[b],e,g=function(l,n){for(;l.childNodes.length;)l.removeChild(l.firstChild);l.innerHTML=S(a,b,n,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==f.src)){var h=f.anCells;if(h)if(d!==q)g(h[d],d);else for(c=0,e=h.length;c<e;c++)g(h[c],c)}else f._aData=$a(a,f,d,d===q?q:f._aData).data;f._aSortData=null;f._aFilterData=null;g=a.aoColumns;if(d!==q)g[d].sType=null;else{c=0;for(e=g.length;c<e;c++)g[c].sType=null;cb(a,f)}}function $a(a,b,c,d){var f=[],e=b.firstChild,g,h=0,l,n=a.aoColumns,m=a._rowReadObject;d=d!==q?d:m?{}:[];var p=function(x,r){if("string"===typeof x){var A=x.indexOf("@");-1!==A&&(A=x.substring(A+1),da(x)(d,r.getAttribute(A)))}},t=function(x){if(c===q||c===h)g=n[h],l=x.innerHTML.trim(),g&&g._bAttrSrc?(da(g.mData._)(d,l),p(g.mData.sort,x),p(g.mData.type,x),p(g.mData.filter,x)):m?(g._setter||(g._setter=da(g.mData)),g._setter(d,l)):d[h]=l;h++};if(e)for(;e;){var v=e.nodeName.toUpperCase();if("TD"==v||"TH"==v)t(e),f.push(e);e=e.nextSibling}else for(f=b.anCells,e=0,v=f.length;e<v;e++)t(f[e]);(b=b.firstChild?b:b.nTr)&&(b=b.getAttribute("id"))&&da(a.rowId)(d,b);return{data:d,cells:f}}function Za(a,b,c,d){var f=a.aoData[b],e=f._aData,g=[],h,l;if(null===f.nTr){var n=c||z.createElement("tr");f.nTr=n;f.anCells=g;n._DT_RowIndex=b;cb(a,f);var m=0;for(h=a.aoColumns.length;m<h;m++){var p=a.aoColumns[m];var t=(l=c?!1:!0)?z.createElement(p.sCellType):d[m];t._DT_CellIndex={row:b,column:m};g.push(t);if(l||!(c&&!p.mRender&&p.mData===m||k.isPlainObject(p.mData)&&p.mData._===m+".display"))t.innerHTML=S(a,b,m,"display");p.sClass&&(t.className+=" "+p.sClass);p.bVisible&&!c?n.appendChild(t):!p.bVisible&&c&&t.parentNode.removeChild(t);p.fnCreatedCell&&p.fnCreatedCell.call(a.oInstance,t,S(a,b,m),e,b,m)}I(a,"aoRowCreatedCallback",null,[n,e,b,g])}f.nTr.setAttribute("role","row")}function cb(a,b){var c=b.nTr,d=b._aData;if(c){if(a=a.rowIdFn(d))c.id=a;d.DT_RowClass&&(a=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?Ja(b.__rowc.concat(a)):a,k(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass));d.DT_RowAttr&&k(c).attr(d.DT_RowAttr);d.DT_RowData&&k(c).data(d.DT_RowData)}}function Eb(a){var b,c,d=a.nTHead,f=a.nTFoot,e=0===k("th, td",d).length,g=a.oClasses,h=a.aoColumns;e&&(c=k("<tr/>").appendTo(d));var l=0;for(b=h.length;l<b;l++){var n=h[l];var m=k(n.nTh).addClass(n.sClass);e&&m.appendTo(c);a.oFeatures.bSort&&(m.addClass(n.sSortingClass),!1!==n.bSortable&&(m.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),db(a,n.nTh,l)));n.sTitle!=m[0].innerHTML&&m.html(n.sTitle);eb(a,"header")(a,m,n,g)}e&&wa(a.aoHeader,d);k(d).children("tr").attr("role","row");k(d).children("tr").children("th, td").addClass(g.sHeaderTH);k(f).children("tr").children("th, td").addClass(g.sFooterTH);if(null!==f)for(a=a.aoFooter[0],l=0,b=a.length;l<b;l++)n=h[l],n.nTf=a[l].cell,n.sClass&&k(n.nTf).addClass(n.sClass)}function xa(a,b,c){var d,f,e=[],g=[],h=a.aoColumns.length;if(b){c===q&&(c=!1);var l=0;for(d=b.length;l<d;l++){e[l]=b[l].slice();e[l].nTr=b[l].nTr;for(f=h-1;0<=f;f--)a.aoColumns[f].bVisible||c||e[l].splice(f,1);g.push([])}l=0;for(d=e.length;l<d;l++){if(a=e[l].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=e[l].length;f<b;f++){var n=h=1;if(g[l][f]===q){a.appendChild(e[l][f].cell);for(g[l][f]=1;e[l+h]!==q&&e[l][f].cell==e[l+h][f].cell;)g[l+h][f]=1,h++;for(;e[l][f+n]!==q&&e[l][f].cell==e[l][f+n].cell;){for(c=0;c<h;c++)g[l+c][f+n]=1;n++}k(e[l][f].cell).attr("rowspan",h).attr("colspan",n)}}}}}function fa(a){var b=I(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==k.inArray(!1,b))U(a,!1);else{b=[];var c=0,d=a.asStripeClasses,f=d.length,e=a.oLanguage,g=a.iInitDisplayStart,h="ssp"==P(a),l=a.aiDisplay;a.bDrawing=!0;g!==q&&-1!==g&&(a._iDisplayStart=h?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);g=a._iDisplayStart;var n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,U(a,!1);else if(!h)a.iDraw++;else if(!a.bDestroying&&!Fb(a))return;if(0!==l.length)for(e=h?a.aoData.length:n,h=h?0:g;h<e;h++){var m=l[h],p=a.aoData[m];null===p.nTr&&Za(a,m);var t=p.nTr;if(0!==f){var v=d[c%f];p._sRowStripe!=v&&(k(t).removeClass(p._sRowStripe).addClass(v),p._sRowStripe=v)}I(a,"aoRowCallback",null,[t,p._aData,c,h,m]);b.push(t);c++}else c=e.sZeroRecords,1==a.iDraw&&"ajax"==P(a)?c=e.sLoadingRecords:e.sEmptyTable&&0===a.fnRecordsTotal()&&(c=e.sEmptyTable),b[0]=k("<tr/>",{"class":f?d[0]:""}).append(k("<td />",{valign:"top",colSpan:na(a),"class":a.oClasses.sRowEmpty}).html(c))[0];I(a,"aoHeaderCallback","header",[k(a.nTHead).children("tr")[0],bb(a),g,n,l]);I(a,"aoFooterCallback","footer",[k(a.nTFoot).children("tr")[0],bb(a),g,n,l]);d=k(a.nTBody);d.children().detach();d.append(k(b));I(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function ja(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&Gb(a);d?ya(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;fa(a);a._drawHold=!1}function Hb(a){var b=a.oClasses,c=k(a.nTable);c=k("<div/>").insertBefore(c);var d=a.oFeatures,f=k("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=f[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var e=a.sDom.split(""),g,h,l,n,m,p,t=0;t<e.length;t++){g=null;h=e[t];if("<"==h){l=k("<div/>")[0];n=e[t+1];if("'"==n||'"'==n){m="";for(p=2;e[t+p]!=n;)m+=e[t+p],p++;"H"==m?m=b.sJUIHeader:"F"==m&&(m=b.sJUIFooter);-1!=m.indexOf(".")?(n=m.split("."),l.id=n[0].substr(1,n[0].length-1),l.className=n[1]):"#"==m.charAt(0)?l.id=m.substr(1,m.length-1):l.className=m;t+=p}f.append(l);f=k(l)}else if(">"==h)f=f.parent();else if("l"==h&&d.bPaginate&&d.bLengthChange)g=Ib(a);else if("f"==h&&d.bFilter)g=Jb(a);else if("r"==h&&d.bProcessing)g=Kb(a);else if("t"==h)g=Lb(a);else if("i"==h&&d.bInfo)g=Mb(a);else if("p"==h&&d.bPaginate)g=Nb(a);else if(0!==u.ext.feature.length)for(l=u.ext.feature,p=0,n=l.length;p<n;p++)if(h==l[p].cFeature){g=l[p].fnInit(a);break}g&&(l=a.aanFeatures,l[h]||(l[h]=[]),l[h].push(g),f.append(g))}c.replaceWith(f);a.nHolding=null}function wa(a,b){b=k(b).children("tr");var c,d,f;a.splice(0,a.length);var e=0;for(f=b.length;e<f;e++)a.push([]);e=0;for(f=b.length;e<f;e++){var g=b[e];for(c=g.firstChild;c;){if("TD"==c.nodeName.toUpperCase()||"TH"==c.nodeName.toUpperCase()){var h=1*c.getAttribute("colspan");var l=1*c.getAttribute("rowspan");h=h&&0!==h&&1!==h?h:1;l=l&&0!==l&&1!==l?l:1;var n=0;for(d=a[e];d[n];)n++;var m=n;var p=1===h?!0:!1;for(d=0;d<h;d++)for(n=0;n<l;n++)a[e+n][m+d]={cell:c,unique:p},a[e+n].nTr=g}c=c.nextSibling}}}function Ka(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],wa(c,b)));b=0;for(var f=c.length;b<f;b++)for(var e=0,g=c[b].length;e<g;e++)!c[b][e].unique||d[e]&&a.bSortCellsTop||(d[e]=c[b][e].cell);return d}function La(a,b,c){I(a,"aoServerParams","serverParams",[b]);if(b&&Array.isArray(b)){var d={},f=/(.*?)\[\]$/;k.each(b,function(m,p){(m=p.name.match(f))?(m=m[0],d[m]||(d[m]=[]),d[m].push(p.value)):d[p.name]=p.value});b=d}var e=a.ajax,g=a.oInstance,h=function(m){I(a,null,"xhr",[a,m,a.jqXHR]);c(m)};if(k.isPlainObject(e)&&e.data){var l=e.data;var n="function"===typeof l?l(b,a):l;b="function"===typeof l&&n?n:k.extend(!0,b,n);delete e.data}n={data:b,success:function(m){var p=m.error||m.sError;p&&aa(a,0,p);a.json=m;h(m)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(m,p,t){t=I(a,null,"xhr",[a,null,a.jqXHR]);-1===k.inArray(!0,t)&&("parsererror"==p?aa(a,0,"Invalid JSON response",1):4===m.readyState&&aa(a,0,"Ajax error",7));U(a,!1)}};a.oAjaxData=b;I(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(g,a.sAjaxSource,k.map(b,function(m,p){return{name:p,value:m}}),h,a):a.sAjaxSource||"string"===typeof e?a.jqXHR=k.ajax(k.extend(n,{url:e||a.sAjaxSource})):"function"===typeof e?a.jqXHR=e.call(g,b,h,a):(a.jqXHR=k.ajax(k.extend(n,e)),e.data=l)}function Fb(a){return a.bAjaxDataGet?(a.iDraw++,U(a,!0),La(a,Ob(a),function(b){Pb(a,b)}),!1):!0}function Ob(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,f=a.oPreviousSearch,e=a.aoPreSearchCols,g=[],h=pa(a);var l=a._iDisplayStart;var n=!1!==d.bPaginate?a._iDisplayLength:-1;var m=function(x,r){g.push({name:x,value:r})};m("sEcho",a.iDraw);m("iColumns",c);m("sColumns",T(b,"sName").join(","));m("iDisplayStart",l);m("iDisplayLength",n);var p={draw:a.iDraw,columns:[],order:[],start:l,length:n,search:{value:f.sSearch,regex:f.bRegex}};for(l=0;l<c;l++){var t=b[l];var v=e[l];n="function"==typeof t.mData?"function":t.mData;p.columns.push({data:n,name:t.sName,searchable:t.bSearchable,orderable:t.bSortable,search:{value:v.sSearch,regex:v.bRegex}});m("mDataProp_"+l,n);d.bFilter&&(m("sSearch_"+l,v.sSearch),m("bRegex_"+l,v.bRegex),m("bSearchable_"+l,t.bSearchable));d.bSort&&m("bSortable_"+l,t.bSortable)}d.bFilter&&(m("sSearch",f.sSearch),m("bRegex",f.bRegex));d.bSort&&(k.each(h,function(x,r){p.order.push({column:r.col,dir:r.dir});m("iSortCol_"+x,r.col);m("sSortDir_"+x,r.dir)}),m("iSortingCols",h.length));b=u.ext.legacy.ajax;return null===b?a.sAjaxSource?g:p:b?g:p}function Pb(a,b){var c=function(g,h){return b[g]!==q?b[g]:b[h]},d=Ma(a,b),f=c("sEcho","draw"),e=c("iTotalRecords","recordsTotal");c=c("iTotalDisplayRecords","recordsFiltered");if(f!==q){if(1*f<a.iDraw)return;a.iDraw=1*f}Ha(a);a._iRecordsTotal=parseInt(e,10);a._iRecordsDisplay=parseInt(c,10);f=0;for(e=d.length;f<e;f++)ea(a,d[f]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;fa(a);a._bInitComplete||Na(a,b);a.bAjaxDataGet=!0;U(a,!1)}function Ma(a,b){a=k.isPlainObject(a.ajax)&&a.ajax.dataSrc!==q?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===a?b.aaData||b[a]:""!==a?ia(a)(b):b}function Jb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,f=a.oPreviousSearch,e=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',h=d.sSearch;h=h.match(/_INPUT_/)?h.replace("_INPUT_",g):h+g;b=k("<div/>",{id:e.f?null:c+"_filter","class":b.sFilter}).append(k("<label/>").append(h));var l=function(){var m=this.value?this.value:"";m!=f.sSearch&&(ya(a,{sSearch:m,bRegex:f.bRegex,bSmart:f.bSmart,bCaseInsensitive:f.bCaseInsensitive}),a._iDisplayStart=0,fa(a))};e=null!==a.searchDelay?a.searchDelay:"ssp"===P(a)?400:0;var n=k("input",b).val(f.sSearch).attr("placeholder",d.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",e?fb(l,e):l).on("mouseup",function(m){setTimeout(function(){l.call(n[0])},10)}).on("keypress.DT",function(m){if(13==m.keyCode)return!1}).attr("aria-controls",c);k(a.nTable).on("search.dt.DT",function(m,p){if(a===p)try{n[0]!==z.activeElement&&n.val(f.sSearch)}catch(t){}});return b[0]}function ya(a,b,c){var d=a.oPreviousSearch,f=a.aoPreSearchCols,e=function(h){d.sSearch=h.sSearch;d.bRegex=h.bRegex;d.bSmart=h.bSmart;d.bCaseInsensitive=h.bCaseInsensitive},g=function(h){return h.bEscapeRegex!==q?!h.bEscapeRegex:h.bRegex};Ya(a);if("ssp"!=P(a)){Qb(a,b.sSearch,c,g(b),b.bSmart,b.bCaseInsensitive);e(b);for(b=0;b<f.length;b++)Rb(a,f[b].sSearch,b,g(f[b]),f[b].bSmart,f[b].bCaseInsensitive);Sb(a)}else e(b);a.bFiltered=!0;I(a,null,"search",[a])}function Sb(a){for(var b=u.ext.search,c=a.aiDisplay,d,f,e=0,g=b.length;e<g;e++){for(var h=[],l=0,n=c.length;l<n;l++)f=c[l],d=a.aoData[f],b[e](a,d._aFilterData,f,d._aData,l)&&h.push(f);c.length=0;k.merge(c,h)}}function Rb(a,b,c,d,f,e){if(""!==b){var g=[],h=a.aiDisplay;d=gb(b,d,f,e);for(f=0;f<h.length;f++)b=a.aoData[h[f]]._aFilterData[c],d.test(b)&&g.push(h[f]);a.aiDisplay=g}}function Qb(a,b,c,d,f,e){f=gb(b,d,f,e);var g=a.oPreviousSearch.sSearch,h=a.aiDisplayMaster;e=[];0!==u.ext.search.length&&(c=!0);var l=Tb(a);if(0>=b.length)a.aiDisplay=h.slice();else{if(l||c||d||g.length>b.length||0!==b.indexOf(g)||a.bSorted)a.aiDisplay=h.slice();b=a.aiDisplay;for(c=0;c<b.length;c++)f.test(a.aoData[b[c]]._sFilterRow)&&e.push(b[c]);a.aiDisplay=e}}function gb(a,b,c,d){a=b?a:hb(a);c&&(a="^(?=.*?"+k.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(f){if('"'===f.charAt(0)){var e=f.match(/^"(.*)"$/);f=e?e[1]:f}return f.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,d?"i":"")}function Tb(a){var b=a.aoColumns,c,d,f=u.ext.type.search;var e=!1;var g=0;for(c=a.aoData.length;g<c;g++){var h=a.aoData[g];if(!h._aFilterData){var l=[];var n=0;for(d=b.length;n<d;n++){e=b[n];if(e.bSearchable){var m=S(a,g,n,"filter");f[e.sType]&&(m=f[e.sType](m));null===m&&(m="");"string"!==typeof m&&m.toString&&(m=m.toString())}else m="";m.indexOf&&-1!==m.indexOf("&")&&(Oa.innerHTML=m,m=rc?Oa.textContent:Oa.innerText);m.replace&&(m=m.replace(/[\r\n\u2028]/g,""));l.push(m)}h._aFilterData=l;h._sFilterRow=l.join("  ");e=!0}}return e}function Ub(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}
function Vb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function Mb(a){var b=a.sTableId,c=a.aanFeatures.i,d=k("<div/>",{"class":a.oClasses.sInfo,id:c?null:b+"_info"});c||(a.aoDrawCallback.push({fn:Wb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),k(a.nTable).attr("aria-describedby",b+"_info"));return d[0]}function Wb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,f=a.fnDisplayEnd(),e=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),h=g?c.sInfo:c.sInfoEmpty;g!==e&&(h+=" "+c.sInfoFiltered);h+=c.sInfoPostFix;h=Xb(a,h);c=c.fnInfoCallback;null!==c&&(h=c.call(a.oInstance,a,d,f,e,g,h));k(b).html(h)}}function Xb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,f=a._iDisplayLength,e=a.fnRecordsDisplay(),g=-1===f;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,e)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/f))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(e/f)))}function za(a){var b=a.iInitDisplayStart,c=a.aoColumns;var d=a.oFeatures;var f=a.bDeferLoading;if(a.bInitialised){Hb(a);Eb(a);xa(a,a.aoHeader);xa(a,a.aoFooter);U(a,!0);d.bAutoWidth&&Xa(a);var e=0;for(d=c.length;e<d;e++){var g=c[e];g.sWidth&&(g.nTh.style.width=K(g.sWidth))}I(a,null,"preInit",[a]);ja(a);c=P(a);if("ssp"!=c||f)"ajax"==c?La(a,[],function(h){var l=Ma(a,h);for(e=0;e<l.length;e++)ea(a,l[e]);a.iInitDisplayStart=b;ja(a);U(a,!1);Na(a,h)},a):(U(a,!1),Na(a))}else setTimeout(function(){za(a)},200)}function Na(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&ra(a);I(a,null,"plugin-init",[a,b]);I(a,"aoInitComplete","init",[a,b])}function ib(a,b){b=parseInt(b,10);a._iDisplayLength=b;jb(a);I(a,null,"length",[a,b])}function Ib(a){var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,f=Array.isArray(d[0]),e=f?d[0]:d;d=f?d[1]:d;f=k("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect});for(var g=0,h=e.length;g<h;g++)f[0][g]=new Option("number"===typeof d[g]?a.fnFormatNumber(d[g]):d[g],e[g]);var l=k("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(l[0].id=c+"_length");l.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",f[0].outerHTML));k("select",l).val(a._iDisplayLength).on("change.DT",function(n){ib(a,k(this).val());fa(a)});k(a.nTable).on("length.dt.DT",function(n,m,p){a===m&&k("select",l).val(p)});return l[0]}function Nb(a){var b=a.sPaginationType,c=u.ext.pager[b],d="function"===typeof c,f=function(g){fa(g)};b=k("<div/>").addClass(a.oClasses.sPaging+
b)[0];var e=a.aanFeatures;d||c.fnInit(a,b,f);e.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(g){if(d){var h=g._iDisplayStart,l=g._iDisplayLength,n=g.fnRecordsDisplay(),m=-1===l;h=m?0:Math.ceil(h/l);l=m?1:Math.ceil(n/l);n=c(h,l);var p;m=0;for(p=e.p.length;m<p;m++)eb(g,"pageButton")(g,e.p[m],m,n,h,l)}else c.fnUpdate(g,f)},sName:"pagination"}));return b}function kb(a,b,c){var d=a._iDisplayStart,f=a._iDisplayLength,e=a.fnRecordsDisplay();0===e||-1===f?d=0:"number"===typeof b?(d=b*f,d>e&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=f?d-f:0,0>d&&(d=0)):"next"==b?d+f<e&&(d+=f):"last"==b?d=Math.floor((e-1)/f)*f:aa(a,0,"Unknown paging action: "+b,5);b=a._iDisplayStart!==d;a._iDisplayStart=d;b&&(I(a,null,"page",[a]),c&&fa(a));return b}function Kb(a){return k("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function U(a,b){a.oFeatures.bProcessing&&k(a.aanFeatures.r).css("display",b?"block":"none");I(a,null,"processing",[a,b])}function Lb(a){var b=k(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,f=c.sY,e=a.oClasses,g=b.children("caption"),h=g.length?g[0]._captionSide:null,l=k(b[0].cloneNode(!1)),n=k(b[0].cloneNode(!1)),m=b.children("tfoot");m.length||(m=null);l=k("<div/>",{"class":e.sScrollWrapper}).append(k("<div/>",{"class":e.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?d?K(d):null:"100%"}).append(k("<div/>",{"class":e.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===h?g:null).append(b.children("thead"))))).append(k("<div/>",{"class":e.sScrollBody}).css({position:"relative",overflow:"auto",width:d?K(d):null}).append(b));m&&l.append(k("<div/>",{"class":e.sScrollFoot}).css({overflow:"hidden",border:0,width:d?d?K(d):null:"100%"}).append(k("<div/>",{"class":e.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===h?g:null).append(b.children("tfoot")))));b=l.children();var p=b[0];e=b[1];var t=m?b[2]:null;if(d)k(e).on("scroll.DT",function(v){v=this.scrollLeft;p.scrollLeft=v;m&&(t.scrollLeft=v)});k(e).css("max-height",f);c.bCollapse||k(e).css("height",f);a.nScrollHead=p;a.nScrollBody=e;a.nScrollFoot=t;a.aoDrawCallback.push({fn:Ea,sName:"scrolling"});return l[0]}function Ea(a){var b=a.oScroll,c=b.sX,d=b.sXInner,f=b.sY;b=b.iBarWidth;var e=k(a.nScrollHead),g=e[0].style,h=e.children("div"),l=h[0].style,n=h.children("table");h=a.nScrollBody;var m=k(h),p=h.style,t=k(a.nScrollFoot).children("div"),v=t.children("table"),x=k(a.nTHead),r=k(a.nTable),A=r[0],E=A.style,H=a.nTFoot?k(a.nTFoot):null,W=a.oBrowser,M=W.bScrollOversize,C=T(a.aoColumns,"nTh"),B=[],ba=[],X=[],lb=[],Aa,Yb=function(F){F=F.style;F.paddingTop="0";F.paddingBottom="0";F.borderTopWidth="0";F.borderBottomWidth="0";F.height=0};var ha=h.scrollHeight>h.clientHeight;if(a.scrollBarVis!==ha&&a.scrollBarVis!==q)a.scrollBarVis=ha,ra(a);else{a.scrollBarVis=ha;r.children("thead, tfoot").remove();if(H){var ka=H.clone().prependTo(r);var la=H.find("tr");ka=ka.find("tr")}var mb=x.clone().prependTo(r);x=x.find("tr");ha=mb.find("tr");mb.find("th, td").removeAttr("tabindex");c||(p.width="100%",e[0].style.width="100%");k.each(Ka(a,mb),function(F,Y){Aa=sa(a,F);Y.style.width=a.aoColumns[Aa].sWidth});H&&Z(function(F){F.style.width=""},ka);e=r.outerWidth();""===c?(E.width="100%",M&&(r.find("tbody").height()>h.offsetHeight||"scroll"==m.css("overflow-y"))&&(E.width=K(r.outerWidth()-b)),e=r.outerWidth()):""!==d&&(E.width=K(d),e=r.outerWidth());Z(Yb,ha);Z(function(F){X.push(F.innerHTML);B.push(K(k(F).css("width")))},ha);Z(function(F,Y){-1!==k.inArray(F,C)&&(F.style.width=B[Y])},x);k(ha).height(0);H&&(Z(Yb,ka),Z(function(F){lb.push(F.innerHTML);ba.push(K(k(F).css("width")))},ka),Z(function(F,Y){F.style.width=ba[Y]},la),k(ka).height(0));Z(function(F,Y){F.innerHTML='<div class="dataTables_sizing">'+X[Y]+"</div>";F.childNodes[0].style.height="0";F.childNodes[0].style.overflow="hidden";F.style.width=B[Y]},ha);H&&Z(function(F,Y){F.innerHTML='<div class="dataTables_sizing">'+lb[Y]+"</div>";F.childNodes[0].style.height="0";F.childNodes[0].style.overflow="hidden";F.style.width=ba[Y]},ka);r.outerWidth()<e?(la=h.scrollHeight>h.offsetHeight||"scroll"==m.css("overflow-y")?e+b:e,M&&(h.scrollHeight>h.offsetHeight||"scroll"==m.css("overflow-y"))&&(E.width=K(la-b)),""!==c&&""===d||aa(a,1,"Possible column misalignment",6)):la="100%";p.width=K(la);g.width=K(la);H&&(a.nScrollFoot.style.width=K(la));!f&&M&&(p.height=K(A.offsetHeight+b));c=r.outerWidth();n[0].style.width=K(c);l.width=K(c);d=r.height()>h.clientHeight||"scroll"==m.css("overflow-y");f="padding"+(W.bScrollbarLeft?"Left":"Right");l[f]=d?b+"px":"0px";H&&(v[0].style.width=K(c),t[0].style.width=K(c),t[0].style[f]=d?b+"px":"0px");r.children("colgroup").insertBefore(r.children("thead"));m.trigger("scroll");!a.bSorted&&!a.bFiltered||a._drawHold||(h.scrollTop=0)}}function Z(a,b,c){for(var d=0,f=0,e=b.length,g,h;f<e;){g=b[f].firstChild;for(h=c?c[f].firstChild:null;g;)1===g.nodeType&&(c?a(g,h,d):a(g,d),d++),g=g.nextSibling,h=c?h.nextSibling:null;f++}}function Xa(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,f=d.sY,e=d.sX,g=d.sXInner,h=c.length,l=Fa(a,"bVisible"),n=k("th",a.nTHead),m=b.getAttribute("width"),p=b.parentNode,t=!1,v,x=a.oBrowser;d=x.bScrollOversize;(v=b.style.width)&&-1!==v.indexOf("%")&&(m=v);for(v=0;v<l.length;v++){var r=c[l[v]];null!==r.sWidth&&(r.sWidth=Zb(r.sWidthOrig,p),t=!0)}if(d||!t&&!e&&!f&&h==na(a)&&h==n.length)for(v=0;v<h;v++)l=sa(a,v),null!==l&&(c[l].sWidth=K(n.eq(v).width()));else{h=k(b).clone().css("visibility","hidden").removeAttr("id");h.find("tbody tr").remove();var A=k("<tr/>").appendTo(h.find("tbody"));h.find("thead, tfoot").remove();h.append(k(a.nTHead).clone()).append(k(a.nTFoot).clone());h.find("tfoot th, tfoot td").css("width","");n=Ka(a,h.find("thead")[0]);for(v=0;v<l.length;v++)r=c[l[v]],n[v].style.width=null!==r.sWidthOrig&&""!==r.sWidthOrig?K(r.sWidthOrig):"",r.sWidthOrig&&e&&k(n[v]).append(k("<div/>").css({width:r.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(v=0;v<l.length;v++)t=l[v],r=c[t],k($b(a,t)).clone(!1).append(r.sContentPadding).appendTo(A);k("[name]",h).removeAttr("name");r=k("<div/>").css(e||f?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(h).appendTo(p);e&&g?h.width(g):e?(h.css("width","auto"),h.removeAttr("width"),h.width()<p.clientWidth&&m&&h.width(p.clientWidth)):f?h.width(p.clientWidth):m&&h.width(m);for(v=f=0;v<l.length;v++)p=k(n[v]),g=p.outerWidth()-
p.width(),p=x.bBounding?Math.ceil(n[v].getBoundingClientRect().width):p.outerWidth(),f+=p,c[l[v]].sWidth=K(p-g);b.style.width=K(f);r.remove()}m&&(b.style.width=K(m));!m&&!e||a._reszEvt||(b=function(){k(y).on("resize.DT-"+a.sInstance,fb(function(){ra(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0)}function Zb(a,b){if(!a)return 0;a=k("<div/>").css("width",K(a)).appendTo(b||z.body);b=a[0].offsetWidth;a.remove();return b}function $b(a,b){var c=ac(a,b);if(0>c)return null;var d=a.aoData[c];return d.nTr?d.anCells[b]:k("<td/>").html(S(a,c,b,"display"))[0]}function ac(a,b){for(var c,d=-1,f=-1,e=0,g=a.aoData.length;e<g;e++)c=S(a,e,b,"display")+"",c=c.replace(sc,""),c=c.replace(/&nbsp;/g," "),c.length>d&&(d=c.length,f=e);return f}function K(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function pa(a){var b=[],c=a.aoColumns;var d=a.aaSortingFixed;var f=k.isPlainObject(d);var e=[];var g=function(m){m.length&&!Array.isArray(m[0])?e.push(m):k.merge(e,m)};Array.isArray(d)&&g(d);f&&d.pre&&g(d.pre);g(a.aaSorting);f&&d.post&&g(d.post);for(a=0;a<e.length;a++){var h=e[a][0];g=c[h].aDataSort;d=0;for(f=g.length;d<f;d++){var l=g[d];var n=c[l].sType||"string";e[a]._idx===q&&(e[a]._idx=k.inArray(e[a][1],c[l].asSorting));b.push({src:h,col:l,dir:e[a][1],index:e[a]._idx,type:n,formatter:u.ext.type.order[n+"-pre"]})}}return b}function Gb(a){var b,c=[],d=u.ext.type.order,f=a.aoData,e=0,g=a.aiDisplayMaster;Ya(a);var h=pa(a);var l=0;for(b=h.length;l<b;l++){var n=h[l];n.formatter&&e++;bc(a,n.col)}if("ssp"!=P(a)&&0!==h.length){l=0;for(b=g.length;l<b;l++)c[g[l]]=l;e===h.length?g.sort(function(m,p){var t,v=h.length,x=f[m]._aSortData,r=f[p]._aSortData;for(t=0;t<v;t++){var A=h[t];var E=x[A.col];var H=r[A.col];E=E<H?-1:E>H?1:0;if(0!==E)return"asc"===A.dir?E:-E}E=c[m];H=c[p];return E<H?-1:E>H?1:0}):g.sort(function(m,p){var t,v=h.length,x=f[m]._aSortData,r=f[p]._aSortData;for(t=0;t<v;t++){var A=h[t];var E=x[A.col];var H=r[A.col];A=d[A.type+"-"+A.dir]||d["string-"+A.dir];E=A(E,H);if(0!==E)return E}E=c[m];H=c[p];return E<H?-1:E>H?1:0})}a.bSorted=!0}function cc(a){var b=a.aoColumns,c=pa(a);a=a.oLanguage.oAria;for(var d=0,f=b.length;d<f;d++){var e=b[d];var g=e.asSorting;var h=e.sTitle.replace(/<.*?>/g,"");var l=e.nTh;l.removeAttribute("aria-sort");e.bSortable&&(0<c.length&&c[0].col==d?(l.setAttribute("aria-sort","asc"==c[0].dir?"ascending":"descending"),e=g[c[0].index+1]||g[0]):e=g[0],h+="asc"===e?a.sSortAscending:a.sSortDescending);l.setAttribute("aria-label",h)}}function nb(a,b,c,d){var f=a.aaSorting,e=a.aoColumns[b].asSorting,g=function(h,l){var n=h._idx;n===q&&(n=k.inArray(h[1],e));return n+1<e.length?n+1:l?null:0};"number"===typeof f[0]&&(f=a.aaSorting=[f]);c&&a.oFeatures.bSortMulti?(c=k.inArray(b,T(f,"0")),-1!==c?(b=g(f[c],!0),null===b&&1===f.length&&(b=0),null===b?f.splice(c,1):(f[c][1]=e[b],f[c]._idx=b)):(f.push([b,e[0],0]),f[f.length-1]._idx=0)):f.length&&f[0][0]==b?(b=g(f[0]),f.length=1,f[0][1]=e[b],f[0]._idx=b):(f.length=0,f.push([b,e[0]]),f[0]._idx=0);ja(a);"function"==typeof d&&d(a)}
function db(a,b,c,d){var f=a.aoColumns[c];ob(b,{},function(e){!1!==f.bSortable&&(a.oFeatures.bProcessing?(U(a,!0),setTimeout(function(){nb(a,c,e.shiftKey,d);"ssp"!==P(a)&&U(a,!1)},0)):nb(a,c,e.shiftKey,d))})}function Pa(a){var b=a.aLastSort,c=a.oClasses.sSortColumn,d=pa(a),f=a.oFeatures,e;if(f.bSort&&f.bSortClasses){f=0;for(e=b.length;f<e;f++){var g=b[f].src;k(T(a.aoData,"anCells",g)).removeClass(c+(2>f?f+1:3))}f=0;for(e=d.length;f<e;f++)g=d[f].src,k(T(a.aoData,"anCells",g)).addClass(c+(2>f?f+1:3))}a.aLastSort=d}function bc(a,b){var c=a.aoColumns[b],d=u.ext.order[c.sSortDataType],f;d&&(f=d.call(a.oInstance,a,b,ta(a,b)));for(var e,g=u.ext.type.order[c.sType+"-pre"],h=0,l=a.aoData.length;h<l;h++)if(c=a.aoData[h],c._aSortData||(c._aSortData=[]),!c._aSortData[b]||d)e=d?f[h]:S(a,h,b,"sort"),c._aSortData[b]=g?g(e):e}function Qa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:k.extend(!0,[],a.aaSorting),search:Ub(a.oPreviousSearch),columns:k.map(a.aoColumns,function(c,d){return{visible:c.bVisible,search:Ub(a.aoPreSearchCols[d])}})};I(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function dc(a,b,c){var d,f,e=a.aoColumns;b=function(h){if(h&&h.time){var l=I(a,"aoStateLoadParams","stateLoadParams",[a,h]);if(-1===k.inArray(!1,l)&&(l=a.iStateDuration,!(0<l&&h.time<+new Date-1E3*l||h.columns&&e.length!==h.columns.length))){a.oLoadedState=k.extend(!0,{},h);h.start!==q&&(a._iDisplayStart=h.start,a.iInitDisplayStart=h.start);h.length!==q&&(a._iDisplayLength=h.length);h.order!==q&&(a.aaSorting=[],k.each(h.order,function(n,m){a.aaSorting.push(m[0]>=e.length?[0,m[1]]:m)}));h.search!==q&&k.extend(a.oPreviousSearch,Vb(h.search));if(h.columns)for(d=0,f=h.columns.length;d<f;d++)l=h.columns[d],l.visible!==q&&(e[d].bVisible=l.visible),l.search!==q&&k.extend(a.aoPreSearchCols[d],Vb(l.search));I(a,"aoStateLoaded","stateLoaded",[a,h])}}c()};if(a.oFeatures.bStateSave){var g=a.fnStateLoadCallback.call(a.oInstance,a,b);g!==q&&b(g)}else c()}function Ra(a){var b=u.settings;a=k.inArray(a,T(b,"nTable"));return-1!==a?b[a]:null}function aa(a,b,c,d){c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d);if(b)y.console&&console.log&&console.log(c);else if(b=u.ext,b=b.sErrMode||b.errMode,a&&I(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,d,c)}}function V(a,b,c,d){Array.isArray(c)?k.each(c,function(f,e){Array.isArray(e)?V(a,b,e[0],e[1]):V(a,b,e)}):(d===q&&(d=c),b[c]!==q&&(a[d]=b[c]))}function pb(a,b,c){var d;for(d in b)if(b.hasOwnProperty(d)){var f=b[d];k.isPlainObject(f)?(k.isPlainObject(a[d])||(a[d]={}),k.extend(!0,a[d],f)):c&&"data"!==d&&"aaData"!==d&&Array.isArray(f)?a[d]=f.slice():a[d]=f}return a}function ob(a,b,c){k(a).on("click.DT",b,function(d){k(a).trigger("blur");c(d)}).on("keypress.DT",b,function(d){13===d.which&&(d.preventDefault(),c(d))}).on("selectstart.DT",function(){return!1})}
function Q(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function I(a,b,c,d){var f=[];b&&(f=k.map(a[b].slice().reverse(),function(e,g){return e.fn.apply(a.oInstance,d)}));null!==c&&(b=k.Event(c+".dt"),k(a.nTable).trigger(b,d),f.push(b.result));return f}function jb(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function eb(a,b){a=a.renderer;var c=u.ext.renderer[b];return k.isPlainObject(a)&&a[b]?c[a[b]]||c._:"string"===typeof a?c[a]||c._:c._}function P(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Ba(a,b){var c=ec.numbers_length,d=Math.floor(c/2);b<=c?a=qa(0,b):a<=d?(a=qa(0,c-2),a.push("ellipsis"),a.push(b-1)):(a>=b-1-d?a=qa(b-(c-2),b):(a=qa(a-d+2,a+d-1),a.push("ellipsis"),a.push(b-1)),a.splice(0,0,"ellipsis"),a.splice(0,0,0));a.DT_el="span";return a}function Va(a){k.each({num:function(b){return Sa(b,a)},"num-fmt":function(b){return Sa(b,a,qb)},"html-num":function(b){return Sa(b,a,Ta)},"html-num-fmt":function(b){return Sa(b,a,Ta,qb)}},function(b,c){L.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(L.type.search[b+a]=L.type.search.html)})}function fc(a){return function(){var b=[Ra(this[u.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return u.ext.internal[a].apply(this,b)}}var u=function(a){this.$=function(e,g){return this.api(!0).$(e,g)};this._=function(e,g){return this.api(!0).rows(e,g).data()};this.api=function(e){return e?new D(Ra(this[L.iApiIndex])):new D(this)};this.fnAddData=function(e,g){var h=this.api(!0);e=Array.isArray(e)&&(Array.isArray(e[0])||k.isPlainObject(e[0]))?h.rows.add(e):h.row.add(e);(g===q||g)&&h.draw();return e.flatten().toArray()};this.fnAdjustColumnSizing=function(e){var g=this.api(!0).columns.adjust(),h=g.settings()[0],l=h.oScroll;e===q||e?g.draw(!1):(""!==l.sX||""!==l.sY)&&Ea(h)};this.fnClearTable=function(e){var g=this.api(!0).clear();(e===q||e)&&g.draw()};this.fnClose=function(e){this.api(!0).row(e).child.hide()};this.fnDeleteRow=function(e,g,h){var l=this.api(!0);e=l.rows(e);var n=e.settings()[0],m=n.aoData[e[0][0]];e.remove();g&&g.call(this,n,m);(h===q||h)&&l.draw();return m};this.fnDestroy=function(e){this.api(!0).destroy(e)};this.fnDraw=function(e){this.api(!0).draw(e)};this.fnFilter=function(e,g,h,l,n,m){n=this.api(!0);null===g||g===q?n.search(e,h,l,m):n.column(g).search(e,h,l,m);n.draw()};this.fnGetData=function(e,g){var h=this.api(!0);if(e!==q){var l=e.nodeName?e.nodeName.toLowerCase():"";return g!==q||"td"==l||"th"==l?h.cell(e,g).data():h.row(e).data()||null}return h.data().toArray()};this.fnGetNodes=function(e){var g=this.api(!0);return e!==q?g.row(e).node():g.rows().nodes().flatten().toArray()};this.fnGetPosition=function(e){var g=this.api(!0),h=e.nodeName.toUpperCase();return"TR"==h?g.row(e).index():"TD"==h||"TH"==h?(e=g.cell(e).index(),[e.row,e.columnVisible,e.column]):null};this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()};this.fnOpen=function(e,g,h){return this.api(!0).row(e).child(g,h).show().child()[0]};this.fnPageChange=function(e,g){e=this.api(!0).page(e);(g===q||g)&&e.draw(!1)};this.fnSetColumnVis=function(e,g,h){e=this.api(!0).column(e).visible(g);(h===q||h)&&e.columns.adjust().draw()};this.fnSettings=function(){return Ra(this[L.iApiIndex])};this.fnSort=function(e){this.api(!0).order(e).draw()};this.fnSortListener=function(e,g,h){this.api(!0).order.listener(e,g,h)};this.fnUpdate=function(e,g,h,l,n){var m=this.api(!0);h===q||null===h?m.row(g).data(e):m.cell(g,h).data(e);(n===q||n)&&m.columns.adjust();(l===q||l)&&m.draw();return 0};this.fnVersionCheck=L.fnVersionCheck;var b=this,c=a===q,d=this.length;c&&(a={});this.oApi=this.internal=L.internal;for(var f in u.ext.internal)f&&(this[f]=fc(f));this.each(function(){var e={},g=1<d?pb(e,a,!0):a,h=0,l;e=this.getAttribute("id");var n=!1,m=u.defaults,p=k(this);if("table"!=this.nodeName.toLowerCase())aa(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{yb(m);zb(m.column);O(m,m,!0);O(m.column,m.column,!0);O(m,k.extend(g,p.data()),!0);var t=u.settings;h=0;for(l=t.length;h<l;h++){var v=t[h];if(v.nTable==this||v.nTHead&&v.nTHead.parentNode==this||v.nTFoot&&v.nTFoot.parentNode==this){var x=g.bRetrieve!==q?g.bRetrieve:m.bRetrieve;if(c||x)return v.oInstance;if(g.bDestroy!==q?g.bDestroy:m.bDestroy){v.oInstance.fnDestroy();break}else{aa(v,0,"Cannot reinitialise DataTable",3);return}}if(v.sTableId==this.id){t.splice(h,1);break}}if(null===e||""===e)this.id=e="DataTables_Table_"+u.ext._unique++;var r=k.extend(!0,{},u.models.oSettings,{sDestroyWidth:p[0].style.width,sInstance:e,sTableId:e});r.nTable=this;r.oApi=b.internal;r.oInit=g;t.push(r);r.oInstance=1===b.length?b:p.dataTable();yb(g);ma(g.oLanguage);g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=Array.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]);g=pb(k.extend(!0,{},m),g);V(r.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));V(r,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]);V(r.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);V(r.oLanguage,g,"fnInfoCallback");Q(r,"aoDrawCallback",g.fnDrawCallback,"user");Q(r,"aoServerParams",g.fnServerParams,"user");Q(r,"aoStateSaveParams",g.fnStateSaveParams,"user");Q(r,"aoStateLoadParams",g.fnStateLoadParams,"user");Q(r,"aoStateLoaded",g.fnStateLoaded,"user");Q(r,"aoRowCallback",g.fnRowCallback,"user");Q(r,"aoRowCreatedCallback",g.fnCreatedRow,"user");Q(r,"aoHeaderCallback",g.fnHeaderCallback,"user");Q(r,"aoFooterCallback",g.fnFooterCallback,"user");Q(r,"aoInitComplete",g.fnInitComplete,"user");Q(r,"aoPreDrawCallback",g.fnPreDrawCallback,"user");r.rowIdFn=ia(g.rowId);Ab(r);var A=r.oClasses;k.extend(A,u.ext.classes,g.oClasses);p.addClass(A.sTable);r.iInitDisplayStart===q&&(r.iInitDisplayStart=g.iDisplayStart,r._iDisplayStart=g.iDisplayStart);null!==g.iDeferLoading&&(r.bDeferLoading=!0,e=Array.isArray(g.iDeferLoading),r._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,r._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var E=r.oLanguage;k.extend(!0,E,g.oLanguage);E.sUrl&&(k.ajax({dataType:"json",url:E.sUrl,success:function(C){ma(C);O(m.oLanguage,C);k.extend(!0,E,C);za(r)},error:function(){za(r)}}),n=!0);null===g.asStripeClasses&&(r.asStripeClasses=[A.sStripeOdd,A.sStripeEven]);e=r.asStripeClasses;var H=p.children("tbody").find("tr").eq(0);-1!==k.inArray(!0,k.map(e,function(C,B){return H.hasClass(C)}))&&(k("tbody tr",this).removeClass(e.join(" ")),r.asDestroyStripes=e.slice());e=[];t=this.getElementsByTagName("thead");0!==t.length&&(wa(r.aoHeader,t[0]),e=Ka(r));if(null===g.aoColumns)for(t=[],h=0,l=e.length;h<l;h++)t.push(null);else t=g.aoColumns;h=0;for(l=t.length;h<l;h++)Wa(r,e?e[h]:null);Cb(r,g.aoColumnDefs,t,function(C,B){Da(r,C,B)});if(H.length){var W=function(C,B){return null!==C.getAttribute("data-"+B)?B:null};k(H[0]).children("th, td").each(function(C,B){var ba=r.aoColumns[C];if(ba.mData===C){var X=W(B,"sort")||W(B,"order");B=W(B,"filter")||W(B,"search");if(null!==X||null!==B)ba.mData={_:C+".display",sort:null!==X?C+".@data-"+X:q,type:null!==X?C+".@data-"+X:q,filter:null!==B?C+".@data-"+B:q},Da(r,C)}})}var M=r.oFeatures;e=function(){if(g.aaSorting===q){var C=r.aaSorting;h=0;for(l=C.length;h<l;h++)C[h][1]=r.aoColumns[h].asSorting[0]}Pa(r);M.bSort&&Q(r,"aoDrawCallback",function(){if(r.bSorted){var ba=pa(r),X={};k.each(ba,function(lb,Aa){X[Aa.src]=Aa.dir});I(r,null,"order",[r,ba,X]);cc(r)}});Q(r,"aoDrawCallback",function(){(r.bSorted||"ssp"===P(r)||M.bDeferRender)&&Pa(r)},"sc");C=p.children("caption").each(function(){this._captionSide=k(this).css("caption-side")});var B=p.children("thead");0===B.length&&(B=k("<thead/>").appendTo(p));r.nTHead=B[0];B=p.children("tbody");0===B.length&&(B=k("<tbody/>").appendTo(p));r.nTBody=B[0];B=p.children("tfoot");0===B.length&&0<C.length&&(""!==r.oScroll.sX||""!==r.oScroll.sY)&&(B=k("<tfoot/>").appendTo(p));0===B.length||0===B.children().length?p.addClass(A.sNoFooter):0<B.length&&(r.nTFoot=B[0],wa(r.aoFooter,r.nTFoot));if(g.aaData)for(h=0;h<g.aaData.length;h++)ea(r,g.aaData[h]);else(r.bDeferLoading||"dom"==P(r))&&Ga(r,k(r.nTBody).children("tr"));r.aiDisplay=r.aiDisplayMaster.slice();r.bInitialised=!0;!1===n&&za(r)};g.bStateSave?(M.bStateSave=!0,Q(r,"aoDrawCallback",Qa,"state_save"),dc(r,g,e)):e()}});b=null;return this},L,w,J,rb={},gc=/[\r\n\u2028]/g,Ta=/<.*?>/g,tc=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,uc=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,qb=/['\u00A0,$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,ca=function(a){return a&&!0!==a&&"-"!==a?!1:!0},hc=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},ic=function(a,b){rb[b]||(rb[b]=new RegExp(hb(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(rb[b],"."):a},sb=function(a,b,c){var d="string"===typeof a;if(ca(a))return!0;b&&d&&(a=ic(a,b));c&&d&&(a=a.replace(qb,""));return!isNaN(parseFloat(a))&&isFinite(a)},jc=function(a,b,c){return ca(a)?!0:ca(a)||"string"===typeof a?sb(a.replace(Ta,""),b,c)?!0:null:null},T=function(a,b,c){var d=[],f=0,e=a.length;if(c!==q)for(;f<e;f++)a[f]&&a[f][b]&&d.push(a[f][b][c]);else for(;f<e;f++)a[f]&&d.push(a[f][b]);return d},Ca=function(a,b,c,d){var f=[],e=0,g=b.length;if(d!==q)for(;e<g;e++)a[b[e]][c]&&f.push(a[b[e]][c][d]);else for(;e<g;e++)f.push(a[b[e]][c]);return f},qa=function(a,b){var c=[];if(b===q){b=0;var d=a}else d=b,b=a;for(a=b;a<d;a++)c.push(a);return c},kc=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},Ja=function(a){a:{if(!(2>a.length)){var b=a.slice().sort();for(var c=b[0],d=1,f=b.length;d<f;d++){if(b[d]===c){b=!1;break a}c=b[d]}}b=!0}if(b)return a.slice();b=[];f=a.length;var e,g=0;d=0;a:for(;d<f;d++){c=a[d];for(e=0;e<g;e++)if(b[e]===c)continue a;b.push(c);g++}return b},lc=function(a,b){if(Array.isArray(b))for(var c=0;c<b.length;c++)lc(a,b[c]);else a.push(b);return a};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});u.util={throttle:function(a,b){var c=b!==q?b:200,d,f;return function(){var e=this,g=+new Date,h=arguments;d&&g<d+c?(clearTimeout(f),f=setTimeout(function(){d=q;a.apply(e,h)},c)):(d=g,a.apply(e,h))}},escapeRegex:function(a){return a.replace(uc,"\\$1")}};var R=function(a,b,c){a[b]!==q&&(a[c]=a[b])},ua=/\[.*?\]$/,oa=/\(\)$/,hb=u.util.escapeRegex,Oa=k("<div>")[0],rc=Oa.textContent!==q,sc=/<.*?>/g,fb=u.util.throttle,mc=[],N=Array.prototype,vc=function(a){var b,c=u.settings,d=k.map(c,function(e,g){return e.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase()){var f=k.inArray(a,d);return-1!==f?[c[f]]:null}if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?b=k(a):a instanceof k&&(b=a)}else return[];if(b)return b.map(function(e){f=k.inArray(this,d);return-1!==f?c[f]:null}).toArray()};var D=function(a,b){if(!(this instanceof D))return new D(a,b);var c=[],d=function(g){(g=vc(g))&&c.push.apply(c,g)};if(Array.isArray(a))for(var f=0,e=a.length;f<e;f++)d(a[f]);else d(a);this.context=Ja(c);b&&k.merge(this,b);this.selector={rows:null,cols:null,opts:null};D.extend(this,this,mc)};u.Api=D;k.extend(D.prototype,{any:function(){return 0!==this.count()},concat:N.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new D(b[a],this[a]):null},filter:function(a){var b=[];if(N.filter)b=N.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new D(this.context,b)},flatten:function(){var a=[];return new D(this.context,a.concat.apply(a,this.toArray()))},join:N.join,indexOf:N.indexOf||function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1},iterator:function(a,b,c,d){var f=[],e,g,h=this.context,l,n=this.selector;"string"===typeof a&&(d=c,c=b,b=a,a=!1);var m=0;for(e=h.length;m<e;m++){var p=new D(h[m]);if("table"===b){var t=c.call(p,h[m],m);t!==q&&f.push(t)}else if("columns"===b||"rows"===b)t=c.call(p,h[m],this[m],m),t!==q&&f.push(t);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b){var v=this[m];"column-rows"===b&&(l=Ua(h[m],n.opts));var x=0;for(g=v.length;x<g;x++)t=v[x],t="cell"===b?c.call(p,h[m],t.row,t.column,m,x):c.call(p,h[m],t,m,x,l),t!==q&&f.push(t)}}return f.length||d?(a=new D(h,a?f.concat.apply([],f):f),b=a.selector,b.rows=n.rows,b.cols=n.cols,b.opts=n.opts,a):this},lastIndexOf:N.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(N.map)b=N.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new D(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:N.pop,push:N.push,reduce:N.reduce||function(a,b){return Bb(this,a,b,0,this.length,1)},reduceRight:N.reduceRight||function(a,b){return Bb(this,a,b,this.length-1,-1,-1)},reverse:N.reverse,selector:null,shift:N.shift,slice:function(){return new D(this.context,this)},sort:N.sort,splice:N.splice,toArray:function(){return N.slice.call(this)},to$:function(){return k(this)},toJQuery:function(){return k(this)},unique:function(){return new D(this.context,Ja(this))},unshift:N.unshift});D.extend=function(a,b,c){if(c.length&&b&&(b instanceof D||b.__dt_wrapper)){var d,f=function(h,l,n){return function(){var m=l.apply(h,arguments);D.extend(m,m,n.methodExt);return m}};var e=0;for(d=c.length;e<d;e++){var g=c[e];b[g.name]="function"===g.type?f(a,g.val,g):"object"===g.type?{}:g.val;b[g.name].__dt_wrapper=!0;D.extend(a,b[g.name],g.propExt)}}};D.register=w=function(a,b){if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)D.register(a[c],b);else{d=a.split(".");var f=mc,e;a=0;for(c=d.length;a<c;a++){var g=(e=-1!==d[a].indexOf("()"))?d[a].replace("()",""):d[a];a:{var h=0;for(var l=f.length;h<l;h++)if(f[h].name===g){h=f[h];break a}h=null}h||(h={name:g,val:{},methodExt:[],propExt:[],type:"object"},f.push(h));a===c-1?(h.val=b,h.type="function"===typeof b?"function":k.isPlainObject(b)?"object":"other"):f=e?h.methodExt:h.propExt}}};D.registerPlural=J=function(a,b,c){D.register(a,c);D.register(b,function(){var d=c.apply(this,arguments);return d===this?this:d instanceof D?d.length?Array.isArray(d[0])?new D(d.context,d[0]):d[0]:q:d})};var nc=function(a,b){if(Array.isArray(a))return k.map(a,function(d){return nc(d,b)});if("number"===typeof a)return[b[a]];var c=k.map(b,function(d,f){return d.nTable});return k(c).filter(a).map(function(d){d=k.inArray(this,c);return b[d]}).toArray()};w("tables()",function(a){return a!==q&&null!==a?new D(nc(a,this.context)):this});w("table()",function(a){a=this.tables(a);var b=a.context;return b.length?new D(b[0]):a});J("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});J("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)});J("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});J("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});J("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});w("draw()",function(a){return this.iterator("table",function(b){"page"===a?fa(b):("string"===typeof a&&(a="full-hold"===a?!1:!0),ja(b,!1===a))})});w("page()",function(a){return a===q?this.page.info().page:this.iterator("table",function(b){kb(b,a)})});w("page.info()",function(a){if(0===this.context.length)return q;a=this.context[0];var b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),f=-1===c;return{page:f?0:Math.floor(b/c),pages:f?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,serverSide:"ssp"===P(a)}});w("page.len()",function(a){return a===q?0!==this.context.length?this.context[0]._iDisplayLength:q:this.iterator("table",function(b){ib(b,a)})});var oc=function(a,b,c){if(c){var d=new D(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==P(a))ja(a,b);else{U(a,!0);var f=a.jqXHR;f&&4!==f.readyState&&f.abort();La(a,[],function(e){Ha(a);e=Ma(a,e);for(var g=0,h=e.length;g<h;g++)ea(a,e[g]);ja(a,b);U(a,!1)})}};w("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});w("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});w("ajax.reload()",function(a,b){return this.iterator("table",function(c){oc(c,!1===b,a)})});w("ajax.url()",function(a){var b=this.context;if(a===q){if(0===b.length)return q;b=b[0];return b.ajax?k.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(c){k.isPlainObject(c.ajax)?c.ajax.url=a:c.ajax=a})});w("ajax.url().load()",function(a,b){return this.iterator("table",function(c){oc(c,!1===b,a)})});var tb=function(a,b,c,d,f){var e=[],g,h,l;var n=typeof b;b&&"string"!==n&&"function"!==n&&b.length!==q||(b=[b]);n=0;for(h=b.length;n<h;n++){var m=b[n]&&b[n].split&&!b[n].match(/[\[\(:]/)?b[n].split(","):[b[n]];var p=0;for(l=m.length;p<l;p++)(g=c("string"===typeof m[p]?m[p].trim():m[p]))&&g.length&&(e=e.concat(g))}a=L.selector[a];if(a.length)for(n=0,h=a.length;n<h;n++)e=a[n](d,f,e);return Ja(e)},ub=function(a){a||(a={});a.filter&&a.search===q&&(a.search=a.filter);return k.extend({search:"none",order:"current",page:"all"},a)},vb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Ua=function(a,b){var c=[],d=a.aiDisplay;var f=a.aiDisplayMaster;var e=b.search;var g=b.order;b=b.page;if("ssp"==P(a))return"removed"===e?[]:qa(0,f.length);if("current"==b)for(g=a._iDisplayStart,a=a.fnDisplayEnd();g<a;g++)c.push(d[g]);else if("current"==g||"applied"==g)if("none"==e)c=f.slice();else if("applied"==e)c=d.slice();else{if("removed"==e){var h={};g=0;for(a=d.length;g<a;g++)h[d[g]]=null;c=k.map(f,function(l){return h.hasOwnProperty(l)?null:l})}}else if("index"==g||"original"==g)for(g=0,a=a.aoData.length;g<a;g++)"none"==e?c.push(g):(f=k.inArray(g,d),(-1===f&&"removed"==e||0<=f&&"applied"==e)&&c.push(g));return c},wc=function(a,b,c){var d;return tb("row",b,function(f){var e=hc(f),g=a.aoData;if(null!==e&&!c)return[e];d||(d=Ua(a,c));if(null!==e&&-1!==k.inArray(e,d))return[e];if(null===f||f===q||""===f)return d;if("function"===typeof f)return k.map(d,function(l){var n=g[l];return f(l,n._aData,n.nTr)?l:null});if(f.nodeName){e=f._DT_RowIndex;var h=f._DT_CellIndex;if(e!==q)return g[e]&&g[e].nTr===f?[e]:[];if(h)return g[h.row]&&g[h.row].nTr===f.parentNode?[h.row]:[];e=k(f).closest("*[data-dt-row]");return e.length?[e.data("dt-row")]:[]}if("string"===typeof f&&"#"===f.charAt(0)&&(e=a.aIds[f.replace(/^#/,"")],e!==q))return[e.idx];e=kc(Ca(a.aoData,d,"nTr"));return k(e).filter(f).map(function(){return this._DT_RowIndex}).toArray()},a,c)};w("rows()",function(a,b){a===q?a="":k.isPlainObject(a)&&(b=a,a="");b=ub(b);var c=this.iterator("table",function(d){return wc(d,a,b)},1);c.selector.rows=a;c.selector.opts=b;return c});w("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||q},1)});w("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return Ca(a.aoData,b,"_aData")},1)});J("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){b=b.aoData[c];return"search"===a?b._aFilterData:b._aSortData},1)});J("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){va(b,c,a)})});J("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});J("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,f=c.length;d<f;d++)for(var e=0,g=this[d].length;e<g;e++){var h=c[d].rowIdFn(c[d].aoData[this[d][e]]._aData);b.push((!0===a?"#":"")+h)}return new D(c,b)});J("rows().remove()","row().remove()",function(){var a=this;this.iterator("row",function(b,c,d){var f=b.aoData,e=f[c],g,h;f.splice(c,1);var l=0;for(g=f.length;l<g;l++){var n=f[l];var m=n.anCells;null!==n.nTr&&(n.nTr._DT_RowIndex=l);if(null!==m)for(n=0,h=m.length;n<h;n++)m[n]._DT_CellIndex.row=l}Ia(b.aiDisplayMaster,c);Ia(b.aiDisplay,c);Ia(a[d],c,!1);0<b._iRecordsDisplay&&b._iRecordsDisplay--;jb(b);c=b.rowIdFn(e._aData);c!==q&&delete b.aIds[c]});this.iterator("table",function(b){for(var c=0,d=b.aoData.length;c<d;c++)b.aoData[c].idx=c});return this});w("rows.add()",function(a){var b=this.iterator("table",function(d){var f,e=[];var g=0;for(f=a.length;g<f;g++){var h=a[g];h.nodeName&&"TR"===h.nodeName.toUpperCase()?e.push(Ga(d,h)[0]):e.push(ea(d,h))}return e},1),c=this.rows(-1);c.pop();k.merge(c,b);return c});w("row()",function(a,b){return vb(this.rows(a,b))});w("row().data()",function(a){var b=this.context;if(a===q)return b.length&&this.length?b[0].aoData[this[0]]._aData:q;var c=b[0].aoData[this[0]];c._aData=a;Array.isArray(a)&&c.nTr&&c.nTr.id&&da(b[0].rowId)(a,c.nTr.id);va(b[0],this[0],"data");return this});w("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});w("row.add()",function(a){a instanceof
k&&a.length&&(a=a[0]);var b=this.iterator("table",function(c){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?Ga(c,a)[0]:ea(c,a)});return this.row(b[0])});var xc=function(a,b,c,d){var f=[],e=function(g,h){if(Array.isArray(g)||g instanceof k)for(var l=0,n=g.length;l<n;l++)e(g[l],h);else g.nodeName&&"tr"===g.nodeName.toLowerCase()?f.push(g):(l=k("<tr><td></td></tr>").addClass(h),k("td",l).addClass(h).html(g)[0].colSpan=na(a),f.push(l[0]))};e(c,d);b._details&&b._details.detach();b._details=k(f);b._detailsShow&&b._details.insertAfter(b.nTr)},wb=function(a,b){var c=a.context;c.length&&(a=c[0].aoData[b!==q?b:a[0]])&&a._details&&(a._details.remove(),a._detailsShow=q,a._details=q)},pc=function(a,b){var c=a.context;c.length&&a.length&&(a=c[0].aoData[a[0]],a._details&&((a._detailsShow=b)?a._details.insertAfter(a.nTr):a._details.detach(),yc(c[0])))},yc=function(a){var b=new D(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<T(c,"_details").length&&(b.on("draw.dt.DT_details",function(d,f){a===f&&b.rows({page:"current"}).eq(0).each(function(e){e=c[e];e._detailsShow&&e._details.insertAfter(e.nTr)})}),b.on("column-visibility.dt.DT_details",function(d,f,e,g){if(a===f)for(f=na(f),e=0,g=c.length;e<g;e++)d=c[e],d._details&&d._details.children("td[colspan]").attr("colspan",f)}),b.on("destroy.dt.DT_details",function(d,f){if(a===f)for(d=0,f=c.length;d<f;d++)c[d]._details&&wb(b,d)}))};w("row().child()",function(a,b){var c=this.context;if(a===q)return c.length&&this.length?c[0].aoData[this[0]]._details:q;!0===a?this.child.show():!1===a?wb(this):c.length&&this.length&&xc(c[0],c[0].aoData[this[0]],a,b);return this});w(["row().child.show()","row().child().show()"],function(a){pc(this,!0);return this});w(["row().child.hide()","row().child().hide()"],function(){pc(this,!1);return this});w(["row().child.remove()","row().child().remove()"],function(){wb(this);return this});w("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var zc=/^([^:]+):(name|visIdx|visible)$/,qc=function(a,b,c,d,f){c=[];d=0;for(var e=f.length;d<e;d++)c.push(S(a,f[d],b));return c},Ac=function(a,b,c){var d=a.aoColumns,f=T(d,"sName"),e=T(d,"nTh");return tb("column",b,function(g){var h=hc(g);if(""===g)return qa(d.length);if(null!==h)return[0<=h?h:d.length+h];if("function"===typeof g){var l=Ua(a,c);return k.map(d,function(p,t){return g(t,qc(a,t,0,0,l),e[t])?t:null})}var n="string"===typeof g?g.match(zc):"";if(n)switch(n[2]){case"visIdx":case"visible":h=parseInt(n[1],10);if(0>h){var m=k.map(d,function(p,t){return p.bVisible?t:null});return[m[m.length+h]]}return[sa(a,h)];case"name":return k.map(f,function(p,t){return p===n[1]?t:null});default:return[]}if(g.nodeName&&g._DT_CellIndex)return[g._DT_CellIndex.column];h=k(e).filter(g).map(function(){return k.inArray(this,e)}).toArray();if(h.length||!g.nodeName)return h;h=k(g).closest("*[data-dt-column]");return h.length?[h.data("dt-column")]:[]},a,c)};w("columns()",function(a,b){a===q?a="":k.isPlainObject(a)&&(b=a,a="");b=ub(b);var c=this.iterator("table",function(d){return Ac(d,a,b)},1);c.selector.cols=a;c.selector.opts=b;return c});J("columns().header()","column().header()",function(a,b){return this.iterator("column",function(c,d){return c.aoColumns[d].nTh},1)});J("columns().footer()","column().footer()",function(a,b){return this.iterator("column",function(c,d){return c.aoColumns[d].nTf},1)});J("columns().data()","column().data()",function(){return this.iterator("column-rows",qc,1)});J("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});J("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,f,e){return Ca(b.aoData,e,"search"===a?"_aFilterData":"_aSortData",c)},1)});J("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,f){return Ca(a.aoData,f,"anCells",b)},1)});J("columns().visible()","column().visible()",function(a,b){var c=this,d=this.iterator("column",function(f,e){if(a===q)return f.aoColumns[e].bVisible;var g=f.aoColumns,h=g[e],l=f.aoData,n;if(a!==q&&h.bVisible!==a){if(a){var m=k.inArray(!0,T(g,"bVisible"),e+1);g=0;for(n=l.length;g<n;g++){var p=l[g].nTr;f=l[g].anCells;p&&p.insertBefore(f[e],f[m]||null)}}else k(T(f.aoData,"anCells",e)).detach();h.bVisible=a}});a!==q&&this.iterator("table",function(f){xa(f,f.aoHeader);xa(f,f.aoFooter);f.aiDisplay.length||k(f.nTBody).find("td[colspan]").attr("colspan",na(f));Qa(f);c.iterator("column",function(e,g){I(e,null,"column-visibility",[e,g,a,b])});(b===q||b)&&c.columns.adjust()});return d});J("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?ta(b,c):c},1)});w("columns.adjust()",function(){return this.iterator("table",function(a){ra(a)},1)});w("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return sa(c,b);if("fromData"===a||"toVisible"===a)return ta(c,b)}});w("column()",function(a,b){return vb(this.columns(a,b))});var Bc=function(a,b,c){var d=a.aoData,f=Ua(a,c),e=kc(Ca(d,f,"anCells")),g=k(lc([],e)),h,l=a.aoColumns.length,n,m,p,t,v,x;return tb("cell",b,function(r){var A="function"===typeof r;if(null===r||r===q||A){n=[];m=0;for(p=f.length;m<p;m++)for(h=f[m],t=0;t<l;t++)v={row:h,column:t},A?(x=d[h],r(v,S(a,h,t),x.anCells?x.anCells[t]:null)&&n.push(v)):n.push(v);return n}if(k.isPlainObject(r))return r.column!==q&&r.row!==q&&-1!==k.inArray(r.row,f)?[r]:[];A=g.filter(r).map(function(E,H){return{row:H._DT_CellIndex.row,column:H._DT_CellIndex.column}}).toArray();if(A.length||!r.nodeName)return A;x=k(r).closest("*[data-dt-row]");return x.length?[{row:x.data("dt-row"),column:x.data("dt-column")}]:[]},a,c)};w("cells()",function(a,b,c){k.isPlainObject(a)&&(a.row===q?(c=a,a=null):(c=b,b=null));k.isPlainObject(b)&&(c=b,b=null);if(null===b||b===q)return this.iterator("table",function(m){return Bc(m,a,ub(c))});var d=c?{page:c.page,order:c.order,search:c.search}:{},f=this.columns(b,d),e=this.rows(a,d),g,h,l,n;d=this.iterator("table",function(m,p){m=[];g=0;for(h=e[p].length;g<h;g++)for(l=0,n=f[p].length;l<n;l++)m.push({row:e[p][g],column:f[p][l]});return m},1);d=c&&c.selected?this.cells(d,c):d;k.extend(d.selector,{cols:b,rows:a,opts:c});return d});J("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:q},1)});w("cells().data()",function(){return this.iterator("cell",function(a,b,c){return S(a,b,c)},1)});J("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});J("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return S(b,c,d,a)},1)});J("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:ta(a,c)}},1)});J("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){va(b,c,a,d)})});w("cell()",function(a,b,c){return vb(this.cells(a,b,c))});w("cell().data()",function(a){var b=this.context,c=this[0];if(a===q)return b.length&&c.length?S(b[0],c[0].row,c[0].column):q;Db(b[0],c[0].row,c[0].column,a);va(b[0],c[0].row,"data",c[0].column);return this});w("order()",function(a,b){var c=this.context;if(a===q)return 0!==c.length?c[0].aaSorting:q;"number"===typeof a?a=[[a,b]]:a.length&&!Array.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(d){d.aaSorting=a.slice()})});w("order.listener()",function(a,b,c){return this.iterator("table",function(d){db(d,a,b,c)})});w("order.fixed()",function(a){if(!a){var b=this.context;b=b.length?b[0].aaSortingFixed:q;return Array.isArray(b)?{pre:b}:b}return this.iterator("table",function(c){c.aaSortingFixed=k.extend(!0,{},a)})});w(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var f=[];k.each(b[d],function(e,g){f.push([g,a])});c.aaSorting=f})});w("search()",function(a,b,c,d){var f=this.context;return a===q?0!==f.length?f[0].oPreviousSearch.sSearch:q:this.iterator("table",function(e){e.oFeatures.bFilter&&ya(e,k.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});J("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(f,e){var g=f.aoPreSearchCols;if(a===q)return g[e].sSearch;f.oFeatures.bFilter&&(k.extend(g[e],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ya(f,f.oPreviousSearch,1))})});w("state()",function(){return this.context.length?this.context[0].oSavedState:null});w("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});w("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});w("state.save()",function(){return this.iterator("table",function(a){Qa(a)})});u.versionCheck=u.fnVersionCheck=function(a){var b=u.version.split(".");a=a.split(".");for(var c,d,f=0,e=a.length;f<e;f++)if(c=parseInt(b[f],10)||0,d=parseInt(a[f],10)||0,c!==d)return c>d;return!0};u.isDataTable=u.fnIsDataTable=function(a){var b=k(a).get(0),c=!1;if(a instanceof u.Api)return!0;k.each(u.settings,function(d,f){d=f.nScrollHead?k("table",f.nScrollHead)[0]:null;var e=f.nScrollFoot?k("table",f.nScrollFoot)[0]:null;if(f.nTable===b||d===b||e===b)c=!0});return c};u.tables=u.fnTables=function(a){var b=!1;k.isPlainObject(a)&&(b=a.api,a=a.visible);var c=k.map(u.settings,function(d){if(!a||a&&k(d.nTable).is(":visible"))return d.nTable});return b?new D(c):c};u.camelToHungarian=O;w("$()",function(a,b){b=this.rows(b).nodes();b=k(b);return k([].concat(b.filter(a).toArray(),b.find(a).toArray()))});k.each(["on","one","off"],function(a,b){w(b+"()",function(){var c=Array.prototype.slice.call(arguments);c[0]=k.map(c[0].split(/\s/),function(f){return f.match(/\.dt\b/)?f:f+".dt"}).join(" ");var d=k(this.tables().nodes());d[b].apply(d,c);return this})});w("clear()",function(){return this.iterator("table",function(a){Ha(a)})});w("settings()",function(){return new D(this.context,this.context)});w("init()",function(){var a=this.context;return a.length?a[0].oInit:null});w("data()",function(){return this.iterator("table",function(a){return T(a.aoData,"_aData")}).flatten()});w("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,d=b.oClasses,f=b.nTable,e=b.nTBody,g=b.nTHead,h=b.nTFoot,l=k(f);e=k(e);var n=k(b.nTableWrapper),m=k.map(b.aoData,function(t){return t.nTr}),p;b.bDestroying=!0;I(b,"aoDestroyCallback","destroy",[b]);a||(new D(b)).columns().visible(!0);n.off(".DT").find(":not(tbody *)").off(".DT");k(y).off(".DT-"+b.sInstance);f!=g.parentNode&&(l.children("thead").detach(),l.append(g));h&&f!=h.parentNode&&(l.children("tfoot").detach(),l.append(h));b.aaSorting=[];b.aaSortingFixed=[];Pa(b);k(m).removeClass(b.asStripeClasses.join(" "));k("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone);e.children().detach();e.append(m);g=a?"remove":"detach";l[g]();n[g]();!a&&c&&(c.insertBefore(f,b.nTableReinsertBefore),l.css("width",b.sDestroyWidth).removeClass(d.sTable),(p=b.asDestroyStripes.length)&&e.children().each(function(t){k(this).addClass(b.asDestroyStripes[t%p])}));c=k.inArray(b,u.settings);-1!==c&&u.settings.splice(c,1)})});k.each(["column","row","cell"],function(a,b){w(b+"s().every()",function(c){var d=this.selector.opts,f=this;return this.iterator(b,function(e,g,h,l,n){c.call(f[b](g,"cell"===b?h:d,"cell"===b?d:q),g,h,l,n)})})});w("i18n()",function(a,b,c){var d=this.context[0];a=ia(a)(d.oLanguage);a===q&&(a=b);c!==q&&k.isPlainObject(a)&&(a=a[c]!==q?a[c]:a._);return a.replace("%d",c)});u.version="1.10.22";u.settings=[];u.models={};u.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};u.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};u.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};u.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){return{}}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:k.extend({},u.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"};G(u.defaults);u.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};G(u.defaults.column);u.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:q,oAjaxData:q,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==P(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==P(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,f=this.oFeatures,e=f.bPaginate;return f.bServerSide?!1===e||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!e||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};u.ext=L={buttons:{},classes:{},build:"dt/dt-1.10.22",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:u.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:u.version};k.extend(L,{afnFiltering:L.search,aTypes:L.type.detect,ofnSearch:L.type.search,oSort:L.type.order,afnSortData:L.order,aoFeatures:L.feature,oApi:L.internal,oStdClasses:L.classes,oPagination:L.pager});k.extend(u.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var ec=u.ext.pager;k.extend(ec,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},numbers:function(a,b){return[Ba(a,b)]},simple_numbers:function(a,b){return["previous",Ba(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Ba(a,b),"next","last"]},first_last_numbers:function(a,b){return["first",Ba(a,b),"last"]},_numbers:Ba,numbers_length:7});k.extend(!0,u.ext.renderer,{pageButton:{_:function(a,b,c,d,f,e){var g=a.oClasses,h=a.oLanguage.oPaginate,l=a.oLanguage.oAria.paginate||{},n,m,p=0,t=function(x,r){var A,E=g.sPageButtonDisabled,H=function(B){kb(a,B.data.action,!0)};var W=0;for(A=r.length;W<A;W++){var M=r[W];if(Array.isArray(M)){var C=k("<"+(M.DT_el||"div")+"/>").appendTo(x);t(C,M)}else{n=null;m=M;C=a.iTabIndex;switch(M){case"ellipsis":x.append('<span class="ellipsis">&#x2026;</span>');break;case"first":n=h.sFirst;0===f&&(C=-1,m+=" "+E);break;case"previous":n=h.sPrevious;0===f&&(C=-1,m+=" "+E);break;case"next":n=h.sNext;if(0===e||f===e-1)C=-1,m+=" "+E;break;case"last":n=h.sLast;if(0===e||f===e-1)C=-1,m+=" "+E;break;default:n=a.fnFormatNumber(M+1),m=f===M?g.sPageButtonActive:""}null!==n&&(C=k("<a>",{"class":g.sPageButton+" "+m,"aria-controls":a.sTableId,"aria-label":l[M],"data-dt-idx":p,tabindex:C,id:0===c&&"string"===typeof M?a.sTableId+"_"+M:null}).html(n).appendTo(x),ob(C,{action:M},H),p++)}}};try{var v=k(b).find(z.activeElement).data("dt-idx")}catch(x){}t(k(b).empty(),d);v!==q&&k(b).find("[data-dt-idx="+v+"]").trigger("focus")}}});k.extend(u.ext.type.detect,[function(a,b){b=b.oLanguage.sDecimal;return sb(a,b)?"num"+b:null},function(a,b){if(a&&!(a instanceof Date)&&!tc.test(a))return null;b=Date.parse(a);return null!==b&&!isNaN(b)||ca(a)?"date":null},function(a,b){b=b.oLanguage.sDecimal;return sb(a,b,!0)?"num-fmt"+b:null},function(a,b){b=b.oLanguage.sDecimal;return jc(a,b)?"html-num"+b:null},function(a,b){b=b.oLanguage.sDecimal;return jc(a,b,!0)?"html-num-fmt"+b:null},function(a,b){return ca(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);k.extend(u.ext.type.search,{html:function(a){return ca(a)?a:"string"===typeof a?a.replace(gc," ").replace(Ta,""):""},string:function(a){return ca(a)?a:"string"===typeof a?a.replace(gc," "):a}});var Sa=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=ic(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};k.extend(L.type.order,{"date-pre":function(a){a=Date.parse(a);return isNaN(a)?-Infinity:a},"html-pre":function(a){return ca(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return ca(a)?"":"string"===typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Va("");k.extend(!0,u.ext.renderer,{header:{_:function(a,b,c,d){k(a.nTable).on("order.dt.DT",function(f,e,g,h){a===e&&(f=c.idx,b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[f]?d.sSortAsc:"desc"==h[f]?d.sSortDesc:c.sSortingClass))})},jqueryui:function(a,b,c,d){k("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(k("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);k(a.nTable).on("order.dt.DT",function(f,e,g,h){a===e&&(f=c.idx,b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[f]?d.sSortAsc:"desc"==h[f]?d.sSortDesc:c.sSortingClass),b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass("asc"==h[f]?d.sSortJUIAsc:"desc"==h[f]?d.sSortJUIDesc:c.sSortingClassJUI))})}}});var xb=function(a){return"string"===typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};u.render={number:function(a,b,c,d,f){return{display:function(e){if("number"!==typeof e&&"string"!==typeof e)return e;var g=0>e?"-":"",h=parseFloat(e);if(isNaN(h))return xb(e);h=h.toFixed(c);e=Math.abs(h);h=parseInt(e,10);e=c?b+(e-h).toFixed(c).substring(2):"";return g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+e+(f||"")}}},text:function(){return{display:xb,filter:xb}}};k.extend(u.ext.internal,{_fnExternApiFunc:fc,_fnBuildAjax:La,_fnAjaxUpdate:Fb,_fnAjaxParameters:Ob,_fnAjaxUpdateDraw:Pb,_fnAjaxDataSrc:Ma,_fnAddColumn:Wa,_fnColumnOptions:Da,_fnAdjustColumnSizing:ra,_fnVisibleToColumnIndex:sa,_fnColumnIndexToVisible:ta,_fnVisbleColumns:na,_fnGetColumns:Fa,_fnColumnTypes:Ya,_fnApplyColumnDefs:Cb,_fnHungarianMap:G,_fnCamelToHungarian:O,_fnLanguageCompat:ma,_fnBrowserDetect:Ab,_fnAddData:ea,_fnAddTr:Ga,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==q?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return k.inArray(c,a.aoData[b].anCells)},_fnGetCellData:S,_fnSetCellData:Db,_fnSplitObjNotation:ab,_fnGetObjectDataFn:ia,_fnSetObjectDataFn:da,_fnGetDataMaster:bb,_fnClearTable:Ha,_fnDeleteIndex:Ia,_fnInvalidate:va,_fnGetRowElements:$a,_fnCreateTr:Za,_fnBuildHead:Eb,_fnDrawHead:xa,_fnDraw:fa,_fnReDraw:ja,_fnAddOptionsHtml:Hb,_fnDetectHeader:wa,_fnGetUniqueThs:Ka,_fnFeatureHtmlFilter:Jb,_fnFilterComplete:ya,_fnFilterCustom:Sb,_fnFilterColumn:Rb,_fnFilter:Qb,_fnFilterCreateSearch:gb,_fnEscapeRegex:hb,_fnFilterData:Tb,_fnFeatureHtmlInfo:Mb,_fnUpdateInfo:Wb,_fnInfoMacros:Xb,_fnInitialise:za,_fnInitComplete:Na,_fnLengthChange:ib,_fnFeatureHtmlLength:Ib,_fnFeatureHtmlPaginate:Nb,_fnPageChange:kb,_fnFeatureHtmlProcessing:Kb,_fnProcessingDisplay:U,_fnFeatureHtmlTable:Lb,_fnScrollDraw:Ea,_fnApplyToChildren:Z,_fnCalculateColumnWidths:Xa,_fnThrottle:fb,_fnConvertToWidth:Zb,_fnGetWidestNode:$b,_fnGetMaxLenString:ac,_fnStringToCss:K,_fnSortFlatten:pa,_fnSort:Gb,_fnSortAria:cc,_fnSortListener:nb,_fnSortAttachListener:db,_fnSortingClasses:Pa,_fnSortData:bc,_fnSaveState:Qa,_fnLoadState:dc,_fnSettingsFromNode:Ra,_fnLog:aa,_fnMap:V,_fnBindAction:ob,_fnCallbackReg:Q,_fnCallbackFire:I,_fnLengthOverflow:jb,_fnRenderer:eb,_fnDataSource:P,_fnRowAttributes:cb,_fnExtend:pb,_fnCalculateEnd:function(){}});k.fn.dataTable=u;u.$=k;k.fn.dataTableSettings=u.settings;k.fn.dataTableExt=u.ext;k.fn.DataTable=function(a){return k(this).dataTable(a).api()};k.each(u,function(a,b){k.fn.DataTable[a]=b});return k.fn.dataTable});(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','moment'],factory);}else if(typeof exports==='object'&&typeof module!=='undefined'){module.exports=factory(require('jquery'),require('moment'));}else{factory(jQuery,moment);}}(function($,moment){'use strict';$.dateRangePickerLanguages={"default":{"selected":"Selected:","day":"Day","days":"Days","apply":"Close","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W","month-name":["january","february","march","april","may","june","july","august","september","october","november","december"],"shortcuts":"Shortcuts","custom-values":"Custom Values","past":"Past","following":"Following","previous":"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year","next":"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range","time":"Time","hour":"Hour","minute":"Minute"},"id":{"selected":"Terpilih:","day":"Hari","days":"Hari","apply":"Tutup","week-1":"sen","week-2":"sel","week-3":"rab","week-4":"kam","week-5":"jum","week-6":"sab","week-7":"min","week-number":"W","month-name":["januari","februari","maret","april","mei","juni","juli","agustus","september","oktober","november","desember"],"shortcuts":"Pintas","custom-values":"Nilai yang ditentukan","past":"Yang Lalu","following":"Mengikuti","previous":"Sebelumnya","prev-week":"Minggu","prev-month":"Bulan","prev-year":"Tahun","next":"Selanjutnya","next-week":"Minggu","next-month":"Bulan","next-year":"Tahun","less-than":"Tanggal harus lebih dari %d hari","more-than":"Tanggal harus kurang dari %d hari","default-more":"Jarak tanggal harus lebih lama dari %d hari","default-single":"Silakan pilih tanggal","default-less":"Jarak rentang tanggal tidak boleh lebih lama dari %d hari","default-range":"Rentang tanggal harus antara %d dan %d hari","default-default":"Silakan pilih rentang tanggal","time":"Waktu","hour":"Jam","minute":"Menit"},"az":{"selected":"Seçildi:","day":" gün","days":" gün","apply":"tətbiq","week-1":"1","week-2":"2","week-3":"3","week-4":"4","week-5":"5","week-6":"6","week-7":"7","month-name":["yanvar","fevral","mart","aprel","may","iyun","iyul","avqust","sentyabr","oktyabr","noyabr","dekabr"],"shortcuts":"Qısayollar","past":"Keçmiş","following":"Növbəti","previous":"&nbsp;&nbsp;&nbsp;","prev-week":"Öncəki həftə","prev-month":"Öncəki ay","prev-year":"Öncəki il","next":"&nbsp;&nbsp;&nbsp;","next-week":"Növbəti həftə","next-month":"Növbəti ay","next-year":"Növbəti il","less-than":"Tarix aralığı %d gündən çox olmamalıdır","more-than":"Tarix aralığı %d gündən az olmamalıdır","default-more":"%d gündən çox bir tarix seçin","default-single":"Tarix seçin","default-less":"%d gündən az bir tarix seçin","default-range":"%d və %d gün aralığında tarixlər seçin","default-default":"Tarix aralığı seçin"},"bg":{"selected":"Избрано:","day":"Ден","days":"Дни","apply":"Затвори","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"нд","week-number":"С","month-name":["януари","февруари","март","април","май","юни","юли","август","септември","октомври","ноември","декември"],"shortcuts":"Преки пътища","custom-values":"Персонализирани стойности","past":"Минал","following":"Следващ","previous":"Предишен","prev-week":"Седмица","prev-month":"Месец","prev-year":"Година","next":"Следващ","next-week":"Седмица","next-month":"Месец","next-year":"Година","less-than":"Периодът от време не трябва да е повече от %d дни","more-than":"Периодът от време не трябва да е по-малко от %d дни","default-more":"Моля изберете период по-дълъг от %d дни","default-single":"Моля изберете дата","default-less":"Моля изберете период по-къс от %d дни","default-range":"Моля изберете период между %d и %d дни","default-default":"Моля изберете период","time":"Време","hour":"Час","minute":"Минута"},"cn":{"selected":"已选择:","day":"天","days":"天","apply":"确定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","week-number":"周","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],"shortcuts":"快捷选择","past":"过去","following":"将来","previous":"&nbsp;&nbsp;&nbsp;","prev-week":"上周","prev-month":"上个月","prev-year":"去年","next":"&nbsp;&nbsp;&nbsp;","next-week":"下周","next-month":"下个月","next-year":"明年","less-than":"所选日期范围不能大于%d天","more-than":"所选日期范围不能小于%d天","default-more":"请选择大于%d天的日期范围","default-less":"请选择小于%d天的日期范围","default-range":"请选择%d天到%d天的日期范围","default-single":"请选择一个日期","default-default":"请选择一个日期范围","time":"时间","hour":"小时","minute":"分钟"},"cz":{"selected":"Vybráno:","day":"Den","days":"Dny","apply":"Zavřít","week-1":"po","week-2":"út","week-3":"st","week-4":"čt","week-5":"pá","week-6":"so","week-7":"ne","month-name":["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],"shortcuts":"Zkratky","past":"po","following":"následující","previous":"předchozí","prev-week":"týden","prev-month":"měsíc","prev-year":"rok","next":"další","next-week":"týden","next-month":"měsíc","next-year":"rok","less-than":"Rozsah data by neměl být větší než %d dnů","more-than":"Rozsah data by neměl být menší než %d dnů","default-more":"Prosím zvolte rozsah data větší než %d dnů","default-single":"Prosím zvolte datum","default-less":"Prosím zvolte rozsah data menší než %d dnů","default-range":"Prosím zvolte rozsah data mezi %d a %d dny","default-default":"Prosím zvolte rozsah data"},"de":{"selected":"Auswahl:","day":"Tag","days":"Tage","apply":"Schließen","week-1":"mo","week-2":"di","week-3":"mi","week-4":"do","week-5":"fr","week-6":"sa","week-7":"so","month-name":["januar","februar","märz","april","mai","juni","juli","august","september","oktober","november","dezember"],"shortcuts":"Schnellwahl","past":"Vorherige","following":"Folgende","previous":"Vorherige","prev-week":"Woche","prev-month":"Monat","prev-year":"Jahr","next":"Nächste","next-week":"Woche","next-month":"Monat","next-year":"Jahr","less-than":"Datumsbereich darf nicht größer sein als %d Tage","more-than":"Datumsbereich darf nicht kleiner sein als %d Tage","default-more":"Bitte mindestens %d Tage auswählen","default-single":"Bitte ein Datum auswählen","default-less":"Bitte weniger als %d Tage auswählen","default-range":"Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen","default-default":"Bitte ein Start- und Enddatum auswählen","Time":"Zeit","hour":"Stunde","minute":"Minute"},"es":{"selected":"Seleccionado:","day":"Día","days":"Días","apply":"Cerrar","week-1":"lu","week-2":"ma","week-3":"mi","week-4":"ju","week-5":"vi","week-6":"sa","week-7":"do","month-name":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],"shortcuts":"Accesos directos","past":"Pasado","following":"Siguiente","previous":"Anterior","prev-week":"Semana","prev-month":"Mes","prev-year":"Año","next":"Siguiente","next-week":"Semana","next-month":"Mes","next-year":"Año","less-than":"El rango no debería ser mayor de %d días","more-than":"El rango no debería ser menor de %d días","default-more":"Por favor selecciona un rango mayor a %d días","default-single":"Por favor selecciona un día","default-less":"Por favor selecciona un rango menor a %d días","default-range":"Por favor selecciona un rango entre %d y %d días","default-default":"Por favor selecciona un rango de fechas."},"fr":{"selected":"Sélection:","day":"Jour","days":"Jours","apply":"Fermer","week-1":"lu","week-2":"ma","week-3":"me","week-4":"je","week-5":"ve","week-6":"sa","week-7":"di","month-name":["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],"shortcuts":"Raccourcis","past":"Passé","following":"Suivant","previous":"Précédent","prev-week":"Semaine","prev-month":"Mois","prev-year":"Année","next":"Suivant","next-week":"Semaine","next-month":"Mois","next-year":"Année","less-than":"L'intervalle ne doit pas être supérieure à %d jours","more-than":"L'intervalle ne doit pas être inférieure à %d jours","default-more":"Merci de choisir une intervalle supérieure à %d jours","default-single":"Merci de choisir une date","default-less":"Merci de choisir une intervalle inférieure %d jours","default-range":"Merci de choisir une intervalle comprise entre %d et %d jours","default-default":"Merci de choisir une date"},"hu":{"selected":"Kiválasztva:","day":"Nap","days":"Nap","apply":"Ok","week-1":"h","week-2":"k","week-3":"sz","week-4":"cs","week-5":"p","week-6":"sz","week-7":"v","month-name":["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],"shortcuts":"Gyorsválasztó","past":"Múlt","following":"Következő","previous":"Előző","prev-week":"Hét","prev-month":"Hónap","prev-year":"Év","next":"Következő","next-week":"Hét","next-month":"Hónap","next-year":"Év","less-than":"A kiválasztás nem lehet több %d napnál","more-than":"A kiválasztás nem lehet több %d napnál","default-more":"Válassz ki egy időszakot ami hosszabb mint %d nap","default-single":"Válassz egy napot","default-less":"Válassz ki egy időszakot ami rövidebb mint %d nap","default-range":"Válassz ki egy %d - %d nap hosszú időszakot","default-default":"Válassz ki egy időszakot"},"it":{"selected":"Selezionati:","day":"Giorno","days":"Giorni","apply":"Chiudi","week-1":"lu","week-2":"ma","week-3":"me","week-4":"gi","week-5":"ve","week-6":"sa","week-7":"do","month-name":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],"shortcuts":"Scorciatoie","past":"Scorso","following":"Successivo","previous":"Precedente","prev-week":"Settimana","prev-month":"Mese","prev-year":"Anno","next":"Prossimo","next-week":"Settimana","next-month":"Mese","next-year":"Anno","less-than":"L'intervallo non dev'essere maggiore di %d giorni","more-than":"L'intervallo non dev'essere minore di %d giorni","default-more":"Seleziona un intervallo maggiore di %d giorni","default-single":"Seleziona una data","default-less":"Seleziona un intervallo minore di %d giorni","default-range":"Seleziona un intervallo compreso tra i %d e i %d giorni","default-default":"Seleziona un intervallo di date"},"ko":{"selected":"기간:","day":"일","days":"일간","apply":"닫기","week-1":"월","week-2":"화","week-3":"수","week-4":"목","week-5":"금","week-6":"토","week-7":"일","week-number":"주","month-name":["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],"shortcuts":"단축키들","past":"지난(오늘기준)","following":"이후(오늘기준)","previous":"이전","prev-week":"1주","prev-month":"1달","prev-year":"1년","next":"다음","next-week":"1주","next-month":"1달","next-year":"1년","less-than":"날짜 범위는 %d 일보다 많을 수 없습니다","more-than":"날짜 범위는 %d 일보다 작을 수 없습니다","default-more":"날짜 범위를 %d 일보다 길게 선택해 주세요","default-single":"날짜를 선택해 주세요","default-less":"%d 일보다 작은 날짜를 선택해 주세요","default-range":"%d와 %d 일 사이의 날짜 범위를 선택해 주세요","default-default":"날짜 범위를 선택해 주세요","time":"시각","hour":"시","minute":"분"},"no":{"selected":"Valgt:","day":"Dag","days":"Dager","apply":"Lukk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lø","week-7":"sø","month-name":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],"shortcuts":"Snarveier","custom-values":"Egendefinerte Verdier","past":"Over","following":"Følger","previous":"Forrige","prev-week":"Uke","prev-month":"Måned","prev-year":"År","next":"Neste","next-week":"Uke","next-month":"Måned","next-year":"År","less-than":"Datoperioden skal ikkje være lengre enn %d dager","more-than":"Datoperioden skal ikkje være kortere enn %d dager","default-more":"Vennligst velg ein datoperiode lengre enn %d dager","default-single":"Vennligst velg ein dato","default-less":"Vennligst velg ein datoperiode mindre enn %d dager","default-range":"Vennligst velg ein datoperiode mellom %d og %d dager","default-default":"Vennligst velg ein datoperiode","time":"Tid","hour":"Time","minute":"Minutter"},"nl":{"selected":"Geselecteerd:","day":"Dag","days":"Dagen","apply":"Ok","week-1":"ma","week-2":"di","week-3":"wo","week-4":"do","week-5":"vr","week-6":"za","week-7":"zo","month-name":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],"shortcuts":"Snelkoppelingen","custom-values":"Aangepaste waarden","past":"Verleden","following":"Komend","previous":"Vorige","prev-week":"Week","prev-month":"Maand","prev-year":"Jaar","next":"Volgende","next-week":"Week","next-month":"Maand","next-year":"Jaar","less-than":"Interval moet langer dan %d dagen zijn","more-than":"Interval mag niet minder dan %d dagen zijn","default-more":"Selecteer een interval langer dan %dagen","default-single":"Selecteer een datum","default-less":"Selecteer een interval minder dan %d dagen","default-range":"Selecteer een interval tussen %d en %d dagen","default-default":"Selecteer een interval","time":"Tijd","hour":"Uur","minute":"Minuut"},"ru":{"selected":"Выбрано:","day":"День","days":"Дней","apply":"Применить","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"вс","month-name":["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],"shortcuts":"Быстрый выбор","custom-values":"Пользовательские значения","past":"Прошедшие","following":"Следующие","previous":"&nbsp;&nbsp;&nbsp;","prev-week":"Неделя","prev-month":"Месяц","prev-year":"Год","next":"&nbsp;&nbsp;&nbsp;","next-week":"Неделя","next-month":"Месяц","next-year":"Год","less-than":"Диапазон не может быть больше %d дней","more-than":"Диапазон не может быть меньше %d дней","default-more":"Пожалуйста выберите диапазон больше %d дней","default-single":"Пожалуйста выберите дату","default-less":"Пожалуйста выберите диапазон меньше %d дней","default-range":"Пожалуйста выберите диапазон между %d и %d днями","default-default":"Пожалуйста выберите диапазон","time":"Время","hour":"Часы","minute":"Минуты"},"uk":{"selected":"Вибрано:","day":"День","days":"Днів","apply":"Застосувати","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"нд","month-name":["січень","лютий","березень","квітень","травень","червень","липень","серпень","вересень","жовтень","листопад","грудень"],"shortcuts":"Швидкий вибір","custom-values":"Значення користувача","past":"Минулі","following":"Наступні","previous":"&nbsp;&nbsp;&nbsp;","prev-week":"Тиждень","prev-month":"Місяць","prev-year":"Рік","next":"&nbsp;&nbsp;&nbsp;","next-week":"Тиждень","next-month":"Місяць","next-year":"Рік","less-than":"Діапазон не може бути більш ніж %d днів","more-than":"Діапазон не може бути меньш ніж %d днів","default-more":"Будь ласка виберіть діапазон більше %d днів","default-single":"Будь ласка виберіть дату","default-less":"Будь ласка виберіть діапазон менше %d днів","default-range":"Будь ласка виберіть діапазон між %d та %d днями","default-default":"Будь ласка виберіть діапазон","time":"Час","hour":"Години","minute":"Хвилини"},"pl":{"selected":"Wybrany:","day":"Dzień","days":"Dni","apply":"Zamknij","week-1":"pon","week-2":"wt","week-3":"śr","week-4":"czw","week-5":"pt","week-6":"so","week-7":"nd","month-name":["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],"shortcuts":"Skróty","custom-values":"Niestandardowe wartości","past":"Przeszłe","following":"Następne","previous":"Poprzednie","prev-week":"tydzień","prev-month":"miesiąc","prev-year":"rok","next":"Następny","next-week":"tydzień","next-month":"miesiąc","next-year":"rok","less-than":"Okres nie powinien być dłuższy niż %d dni","more-than":"Okres nie powinien być krótszy niż  %d ni","default-more":"Wybierz okres dłuższy niż %d dni","default-single":"Wybierz datę","default-less":"Wybierz okres krótszy niż %d dni","default-range":"Wybierz okres trwający od %d do %d dni","default-default":"Wybierz okres","time":"Czas","hour":"Godzina","minute":"Minuta"},"se":{"selected":"Vald:","day":"dag","days":"dagar","apply":"godkänn","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lö","week-7":"sö","month-name":["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],"shortcuts":"genvägar","custom-values":"Anpassade värden","past":"över","following":"följande","previous":"förra","prev-week":"vecka","prev-month":"månad","prev-year":"år","next":"nästa","next-week":"vecka","next-month":"måned","next-year":"år","less-than":"Datumintervall bör inte vara mindre än %d dagar","more-than":"Datumintervall bör inte vara mer än %d dagar","default-more":"Välj ett datumintervall längre än %d dagar","default-single":"Välj ett datum","default-less":"Välj ett datumintervall mindre än %d dagar","default-range":"Välj ett datumintervall mellan %d och %d dagar","default-default":"Välj ett datumintervall","time":"tid","hour":"timme","minute":"minut"},"pt":{"selected":"Selecionado:","day":"Dia","days":"Dias","apply":"Fechar","week-1":"seg","week-2":"ter","week-3":"qua","week-4":"qui","week-5":"sex","week-6":"sab","week-7":"dom","week-number":"N","month-name":["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],"shortcuts":"Atalhos","custom-values":"Valores Personalizados","past":"Passado","following":"Seguinte","previous":"Anterior","prev-week":"Semana","prev-month":"Mês","prev-year":"Ano","next":"Próximo","next-week":"Próxima Semana","next-month":"Próximo Mês","next-year":"Próximo Ano","less-than":"O período selecionado não deve ser maior que %d dias","more-than":"O período selecionado não deve ser menor que %d dias","default-more":"Selecione um período superior a %d dias","default-single":"Selecione uma data","default-less":"Selecione um período inferior a %d dias","default-range":"Selecione um período de %d a %d dias","default-default":"Selecione um período","time":"Tempo","hour":"Hora","minute":"Minuto"},"tc":{"selected":"已選擇:","day":"天","days":"天","apply":"確定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","week-number":"周","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],"shortcuts":"快速選擇","past":"過去","following":"將來","previous":"&nbsp;&nbsp;&nbsp;","prev-week":"上週","prev-month":"上個月","prev-year":"去年","next":"&nbsp;&nbsp;&nbsp;","next-week":"下周","next-month":"下個月","next-year":"明年","less-than":"所選日期範圍不能大於%d天","more-than":"所選日期範圍不能小於%d天","default-more":"請選擇大於%d天的日期範圍","default-less":"請選擇小於%d天的日期範圍","default-range":"請選擇%d天到%d天的日期範圍","default-single":"請選擇一個日期","default-default":"請選擇一個日期範圍","time":"日期","hour":"小時","minute":"分鐘"},"ja":{"selected":"選択しました:","day":"日","days":"日々","apply":"閉じる","week-1":"月","week-2":"火","week-3":"水","week-4":"木","week-5":"金","week-6":"土","week-7":"日","month-name":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"shortcuts":"クイック選択","past":"過去","following":"将来","previous":"&nbsp;&nbsp;&nbsp;","prev-week":"先週、","prev-month":"先月","prev-year":"昨年","next":"&nbsp;&nbsp;&nbsp;","next-week":"来週","next-month":"来月","next-year":"来年","less-than":"日付の範囲は ％d 日以上にすべきではありません","more-than":"日付の範囲は ％d 日を下回ってはいけません","default-more":"％d 日よりも長い期間を選択してください","default-less":"％d 日未満の期間を選択してください","default-range":"％d と％ d日の間の日付範囲を選択してください","default-single":"日付を選択してください","default-default":"日付範囲を選択してください","time":"時間","hour":"時間","minute":"分"},"da":{"selected":"Valgt:","day":"Dag","days":"Dage","apply":"Luk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lö","week-7":"sö","month-name":["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],"shortcuts":"genveje","custom-values":"Brugerdefinerede værdier","past":"Forbi","following":"Følgende","previous":"Forrige","prev-week":"uge","prev-month":"månad","prev-year":"år","next":"Næste","next-week":"Næste uge","next-month":"Næste måned","next-year":"Næste år","less-than":"Dato interval bør ikke være med end %d dage","more-than":"Dato interval bør ikke være mindre end %d dage","default-more":"Vælg datointerval længere end %d dage","default-single":"Vælg dato","default-less":"Vælg datointerval mindre end %d dage","default-range":"Vælg datointerval mellem %d og %d dage","default-default":"Vælg datointerval","time":"tid","hour":"time","minute":"minut"},"fi":{"selected":"Valittu:","day":"Päivä","days":"Päivää","apply":"Sulje","week-1":"ma","week-2":"ti","week-3":"ke","week-4":"to","week-5":"pe","week-6":"la","week-7":"su","week-number":"V","month-name":["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],"shortcuts":"Pikavalinnat","custom-values":"Mukautetut Arvot","past":"Menneet","following":"Tulevat","previous":"Edellinen","prev-week":"Viikko","prev-month":"Kuukausi","prev-year":"Vuosi","next":"Seuraava","next-week":"Viikko","next-month":"Kuukausi","next-year":"Vuosi","less-than":"Aikajakson tulisi olla vähemmän kuin %d päivää","more-than":"Aikajakson ei tulisi olla vähempää kuin %d päivää","default-more":"Valitse pidempi aikajakso kuin %d päivää","default-single":"Valitse päivä","default-less":"Valitse lyhyempi aikajakso kuin %d päivää","default-range":"Valitse aikajakso %d ja %d päivän väliltä","default-default":"Valitse aikajakso","time":"Aika","hour":"Tunti","minute":"Minuutti"},"cat":{"selected":"Seleccionats:","day":"Dia","days":"Dies","apply":"Tanca","week-1":"Dl","week-2":"Dm","week-3":"Dc","week-4":"Dj","week-5":"Dv","week-6":"Ds","week-7":"Dg","week-number":"S","month-name":["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],"shortcuts":"Dreçeres","custom-values":"Valors personalitzats","past":"Passat","following":"Futur","previous":"Anterior","prev-week":"Setmana","prev-month":"Mes","prev-year":"Any","next":"Següent","next-week":"Setmana","next-month":"Mes","next-year":"Any","less-than":"El període no hauria de ser de més de %d dies","more-than":"El període no hauria de ser de menys de %d dies","default-more":"Perfavor selecciona un període més gran de %d dies","default-single":"Perfavor selecciona una data","default-less":"Perfavor selecciona un període de menys de %d dies","default-range":"Perfavor selecciona un període d'entre %d i %d dies","default-default":"Perfavor selecciona un període","time":"Temps","hour":"Hora","minute":"Minut"}};$.fn.dateRangePicker=function(opt){if(!opt)opt={};opt=$.extend(true,{autoClose:false,format:'YYYY-MM-DD',separator:' to ',language:'auto',startOfWeek:'sunday',getValue:function(){return $(this).val();},setValue:function(s){if(!$(this).attr('readonly')&&!$(this).is(':disabled')&&s!=$(this).val()){$(this).val(s);}},startDate:false,endDate:false,time:{enabled:false},minDays:0,maxDays:0,showShortcuts:false,shortcuts:{},customShortcuts:[],inline:false,container:'body',alwaysOpen:false,singleDate:false,lookBehind:false,batchMode:false,duration:200,stickyMonths:false,dayDivAttrs:[],dayTdAttrs:[],selectForward:false,selectBackward:false,applyBtnClass:'',singleMonth:'auto',hoveringTooltip:function(days,startTime,hoveringTime){return days>1?days+' '+translate('days'):'';},showTopbar:true,swapTime:false,showWeekNumbers:false,getWeekNumber:function(date)
{return moment(date).format('w');},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null,monthSelect:false,yearSelect:false},opt);opt.start=false;opt.end=false;opt.startWeek=false;opt.shortcutRangeSelected=false;opt.isTouchDevice='ontouchstart'in window||navigator.msMaxTouchPoints;if(opt.isTouchDevice)opt.hoveringTooltip=false;if(opt.singleMonth=='auto')opt.singleMonth=$(window).width()<480;if(opt.singleMonth)opt.stickyMonths=false;if(!opt.showTopbar)opt.autoClose=true;if(opt.startDate&&typeof opt.startDate=='string')opt.startDate=moment(opt.startDate,opt.format).toDate();if(opt.endDate&&typeof opt.endDate=='string')opt.endDate=moment(opt.endDate,opt.format).toDate();if(opt.yearSelect&&typeof opt.yearSelect==='boolean'){opt.yearSelect=function(current){return[current-5,current+5];}}
var languages=getLanguages();var box;var initiated=false;var self=this;var selfDom=$(self).get(0);var domChangeTimer;$(this).off('.datepicker').on('click.datepicker',function(evt){var isOpen=box.is(':visible');if(!isOpen)open(opt.duration);}).on('change.datepicker',function(evt){checkAndSetDefaultValue();}).on('keyup.datepicker',function(){try{clearTimeout(domChangeTimer);}catch(e){}
domChangeTimer=setTimeout(function(){checkAndSetDefaultValue();},2000);});init_datepicker.call(this);if(opt.alwaysOpen){open(0);}
$(this).data('dateRangePicker',{setStart:function(d1){if(typeof d1=='string'){d1=moment(d1,opt.format).toDate();}
opt.end=false;setSingleDate(d1);return this;},setEnd:function(d2,silent){var start=new Date();start.setTime(opt.start);if(typeof d2=='string'){d2=moment(d2,opt.format).toDate();}
setDateRange(start,d2,silent);return this;},setDateRange:function(d1,d2,silent){if(typeof d1=='string'&&typeof d2=='string'){d1=moment(d1,opt.format).toDate();d2=moment(d2,opt.format).toDate();}
setDateRange(d1,d2,silent);},clear:clearSelection,close:closeDatePicker,open:open,redraw:redrawDatePicker,getDatePicker:getDatePicker,resetMonthsView:resetMonthsView,resetMonthViewIfShortcutRangeSelected:resetMonthViewIfShortcutRangeSelected,destroy:function(){$(self).off('.datepicker');$(self).data('dateRangePicker','');$(self).data('date-picker-opened',null);box.remove();$(window).off('resize.datepicker',calcPosition);$(document).off('click.datepicker',outsideClickClose);}});$(window).on('resize.datepicker',calcPosition);return this;function IsOwnDatePickerClicked(evt,selfObj){return(selfObj.contains(evt.target)||evt.target==selfObj||(selfObj.childNodes!=undefined&&$.inArray(evt.target,selfObj.childNodes)>=0));}
function init_datepicker(){var self=this;if($(this).data('date-picker-opened')){closeDatePicker();return;}
$(this).data('date-picker-opened',true);box=createDom().hide();box.append('<div class="date-range-length-tip"></div>');$(opt.container).append(box);if(!opt.inline){calcPosition();}else{box.addClass('inline-wrapper');}
if(opt.alwaysOpen){box.find('.apply-btn').hide();}
var defaultTime=getDefaultTime();resetMonthsView(defaultTime);if(opt.time.enabled){if((opt.startDate&&opt.endDate)||(opt.start&&opt.end)){showTime(moment(opt.start||opt.startDate).toDate(),'time1');showTime(moment(opt.end||opt.endDate).toDate(),'time2');}else{var defaultEndTime=opt.defaultEndTime?opt.defaultEndTime:defaultTime;showTime(defaultTime,'time1');showTime(defaultEndTime,'time2');}}
var defaultTopText='';if(opt.singleDate)
defaultTopText=translate('default-single');else if(opt.minDays&&opt.maxDays)
defaultTopText=translate('default-range');else if(opt.minDays)
defaultTopText=translate('default-more');else if(opt.maxDays)
defaultTopText=translate('default-less');else
defaultTopText=translate('default-default');box.find('.default-top').html(defaultTopText.replace(/\%d/,opt.minDays).replace(/\%d/,opt.maxDays));if(opt.singleMonth){box.addClass('single-month');}else{box.addClass('two-months');}
setTimeout(function(){updateCalendarWidth();initiated=true;},0);box.click(function(evt){evt.stopPropagation();});$(document).on('click.datepicker',outsideClickClose);box.find('.next').click(function(){if(!opt.stickyMonths)
gotoNextMonth(this);else
gotoNextMonth_stickily(this);});function gotoNextMonth(self){var isMonth2=$(self).parents('table').hasClass('month2');var month=isMonth2?opt.month2:opt.month1;month=nextMonth(month);if(!opt.singleMonth&&!opt.singleDate&&!isMonth2&&compare_month(month,opt.month2)>=0||isMonthOutOfBounds(month))return;showMonth(month,isMonth2?'month2':'month1');showGap();}
function gotoNextMonth_stickily(self){var nextMonth1=nextMonth(opt.month1);var nextMonth2=nextMonth(opt.month2);if(isMonthOutOfBounds(nextMonth2))return;if(!opt.singleDate&&compare_month(nextMonth1,nextMonth2)>=0)return;showMonth(nextMonth1,'month1');showMonth(nextMonth2,'month2');showSelectedDays();}
box.find('.prev').click(function(){if(!opt.stickyMonths)
gotoPrevMonth(this);else
gotoPrevMonth_stickily(this);});function gotoPrevMonth(self){var isMonth2=$(self).parents('table').hasClass('month2');var month=isMonth2?opt.month2:opt.month1;month=prevMonth(month);if(isMonth2&&compare_month(month,opt.month1)<=0||isMonthOutOfBounds(month))return;showMonth(month,isMonth2?'month2':'month1');showGap();}
function gotoPrevMonth_stickily(self){var prevMonth1=prevMonth(opt.month1);var prevMonth2=prevMonth(opt.month2);if(isMonthOutOfBounds(prevMonth1))return;if(!opt.singleDate&&compare_month(prevMonth2,prevMonth1)<=0)return;showMonth(prevMonth2,'month2');showMonth(prevMonth1,'month1');showSelectedDays();}
box.attr('unselectable','on').css('user-select','none').on('selectstart',function(e){e.preventDefault();return false;});box.find('.apply-btn').click(function(){closeDatePicker();var dateRange=getDateString(new Date(opt.start))+opt.separator+getDateString(new Date(opt.end));$(self).trigger('datepicker-apply',{'value':dateRange,'date1':new Date(opt.start),'date2':new Date(opt.end)});});box.find('[custom]').click(function(){var valueName=$(this).attr('custom');opt.start=false;opt.end=false;box.find('.day.checked').removeClass('checked');opt.setValue.call(selfDom,valueName);checkSelectionValid();showSelectedInfo(true);showSelectedDays();if(opt.autoClose)closeDatePicker();});box.find('[shortcut]').click(function(){var shortcut=$(this).attr('shortcut');var end=new Date(),start=false;var dir;if(shortcut.indexOf('day')!=-1){var day=parseInt(shortcut.split(',',2)[1],10);start=new Date(new Date().getTime()+(day<0?(86400000*(day+1)):0));end=new Date(end.getTime()+(day>0?(86400000*(day-1)):0));}else if(shortcut.indexOf('week')!=-1){dir=shortcut.indexOf('prev,')!=-1?-1:1;var stopDay;if(dir==1)
stopDay=opt.startOfWeek=='monday'?1:0;else
stopDay=opt.startOfWeek=='monday'?0:6;end=new Date(end.getTime()-86400000);while(end.getDay()!=stopDay)end=new Date(end.getTime()+dir*86400000);start=new Date(end.getTime()+dir*86400000*6);}else if(shortcut.indexOf('month')!=-1){dir=shortcut.indexOf('prev,')!=-1?-1:1;if(dir==1)
start=nextMonth(end);else
start=prevMonth(end);start.setDate(1);end=nextMonth(start);end.setDate(1);end=new Date(end.getTime()-86400000);}else if(shortcut.indexOf('year')!=-1){dir=shortcut.indexOf('prev,')!=-1?-1:1;start=new Date();start.setFullYear(end.getFullYear()+dir);start.setMonth(0);start.setDate(1);end.setFullYear(end.getFullYear()+dir);end.setMonth(11);end.setDate(31);}else if(shortcut=='custom'){var name=$(this).html();if(opt.customShortcuts&&opt.customShortcuts.length>0){for(var i=0;i<opt.customShortcuts.length;i++){var sh=opt.customShortcuts[i];if(sh.name==name){var data=[];data=sh['dates'].call();if(data&&data.length==2){start=data[0];end=data[1];}
if(data&&data.length==1){var movetodate=data[0];showMonth(movetodate,'month1');showMonth(nextMonth(movetodate),'month2');showGap();}
break;}}}}
if(start&&end){opt.shortcutRangeSelected=true;setDateRange(start,end);checkSelectionValid();}});box.find('.time1 input[type=range]').on('change touchmove',function(e){var target=e.target,hour=target.name=='hour'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined,min=target.name=='minute'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined;setTime('time1',hour,min);});box.find('.time2 input[type=range]').on('change touchmove',function(e){var target=e.target,hour=target.name=='hour'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined,min=target.name=='minute'?$(target).val().replace(/^(\d{1})$/,'0$1'):undefined;setTime('time2',hour,min);});}
function calcPosition(){if(!opt.inline){var offset=$(self).offset();if($(opt.container).css('position')=='relative'){var containerOffset=$(opt.container).offset();var leftIndent=Math.max(0,offset.left+box.outerWidth()-$('body').width()+16);box.css({top:offset.top-containerOffset.top+$(self).outerHeight()+4,left:offset.left-containerOffset.left-leftIndent});}else{if(offset.left<460)
{box.css({top:offset.top+$(self).outerHeight()+parseInt($('body').css('border-top')||0,10),left:offset.left});}else{box.css({top:offset.top+$(self).outerHeight()+parseInt($('body').css('border-top')||0,10),left:offset.left+$(self).width()-box.width()-16});}}}}
function getDatePicker(){return box;}
function open(animationTime){redrawDatePicker();checkAndSetDefaultValue();if(opt.customOpenAnimation){opt.customOpenAnimation.call(box.get(0),function(){$(self).trigger('datepicker-opened',{relatedTarget:box});});}else{box.slideDown(animationTime,function(){$(self).trigger('datepicker-opened',{relatedTarget:box});});}
$(self).trigger('datepicker-open',{relatedTarget:box});showGap();updateCalendarWidth();calcPosition();}
function checkAndSetDefaultValue(){var __default_string=opt.getValue.call(selfDom);var defaults=__default_string?__default_string.split(opt.separator):'';if(defaults&&((defaults.length==1&&opt.singleDate)||defaults.length>=2)){var ___format=opt.format;if(___format.match(/Do/)){___format=___format.replace(/Do/,'D');defaults[0]=defaults[0].replace(/(\d+)(th|nd|st)/,'$1');if(defaults.length>=2){defaults[1]=defaults[1].replace(/(\d+)(th|nd|st)/,'$1');}}
initiated=false;if(defaults.length>=2){setDateRange(getValidValue(defaults[0],___format,moment.locale(opt.language)),getValidValue(defaults[1],___format,moment.locale(opt.language)));}else if(defaults.length==1&&opt.singleDate){setSingleDate(getValidValue(defaults[0],___format,moment.locale(opt.language)));}
initiated=true;}}
function getValidValue(date,format,locale){if(moment(date,format,locale).isValid()){return moment(date,format,locale).toDate();}else{return moment().toDate();}}
function updateCalendarWidth(){var gapMargin=box.find('.gap').css('margin-left');if(gapMargin)gapMargin=parseInt(gapMargin);var w1=box.find('.month1').width();var w2=box.find('.gap').width()+(gapMargin?gapMargin*2:0);var w3=box.find('.month2').width();box.find('.month-wrapper').width(w1+w2+w3);}
function renderTime(name,date){box.find('.'+name+' input[type=range].hour-range').val(moment(date).hours());box.find('.'+name+' input[type=range].minute-range').val(moment(date).minutes());setTime(name,moment(date).format('HH'),moment(date).format('mm'));}
function changeTime(name,date){opt[name]=parseInt(moment(parseInt(date)).startOf('day').add(moment(opt[name+'Time']).format('HH'),'h').add(moment(opt[name+'Time']).format('mm'),'m').valueOf());}
function swapTime(){renderTime('time1',opt.start);renderTime('time2',opt.end);}
function setTime(name,hour,minute){hour&&(box.find('.'+name+' .hour-val').text(hour));minute&&(box.find('.'+name+' .minute-val').text(minute));switch(name){case'time1':if(opt.start){setRange('start',moment(opt.start));}
setRange('startTime',moment(opt.startTime||moment().valueOf()));break;case'time2':if(opt.end){setRange('end',moment(opt.end));}
setRange('endTime',moment(opt.endTime||moment().valueOf()));break;}
function setRange(name,timePoint){var h=timePoint.format('HH'),m=timePoint.format('mm');opt[name]=timePoint.startOf('day').add(hour||h,'h').add(minute||m,'m').valueOf();}
checkSelectionValid();showSelectedInfo();showSelectedDays();}
function clearSelection(){opt.start=false;opt.end=false;box.find('.day.checked').removeClass('checked');box.find('.day.last-date-selected').removeClass('last-date-selected');box.find('.day.first-date-selected').removeClass('first-date-selected');opt.setValue.call(selfDom,'');checkSelectionValid();showSelectedInfo();showSelectedDays();}
function handleStart(time){var r=time;if(opt.batchMode==='week-range'){if(opt.startOfWeek==='monday'){r=moment(parseInt(time)).startOf('isoweek').valueOf();}else{r=moment(parseInt(time)).startOf('week').valueOf();}}else if(opt.batchMode==='month-range'){r=moment(parseInt(time)).startOf('month').valueOf();}
return r;}
function handleEnd(time){var r=time;if(opt.batchMode==='week-range'){if(opt.startOfWeek==='monday'){r=moment(parseInt(time)).endOf('isoweek').valueOf();}else{r=moment(parseInt(time)).endOf('week').valueOf();}}else if(opt.batchMode==='month-range'){r=moment(parseInt(time)).endOf('month').valueOf();}
return r;}
function dayClicked(day){if(day.hasClass('invalid'))return;var time=day.attr('time');day.addClass('checked');if(opt.singleDate){opt.start=time;opt.end=false;}else if(opt.batchMode==='week'){if(opt.startOfWeek==='monday'){opt.start=moment(parseInt(time)).startOf('isoweek').valueOf();opt.end=moment(parseInt(time)).endOf('isoweek').valueOf();}else{opt.end=moment(parseInt(time)).endOf('week').valueOf();opt.start=moment(parseInt(time)).startOf('week').valueOf();}}else if(opt.batchMode==='workweek'){opt.start=moment(parseInt(time)).day(1).valueOf();opt.end=moment(parseInt(time)).day(5).valueOf();}else if(opt.batchMode==='weekend'){opt.start=moment(parseInt(time)).day(6).valueOf();opt.end=moment(parseInt(time)).day(7).valueOf();}else if(opt.batchMode==='month'){opt.start=moment(parseInt(time)).startOf('month').valueOf();opt.end=moment(parseInt(time)).endOf('month').valueOf();}else if((opt.start&&opt.end)||(!opt.start&&!opt.end)){opt.start=handleStart(time);opt.end=false;}else if(opt.start){opt.end=handleEnd(time);if(opt.time.enabled){changeTime('end',opt.end);}}
if(opt.time.enabled){if(opt.start){changeTime('start',opt.start);}
if(opt.end){changeTime('end',opt.end);}}
if(!opt.singleDate&&opt.start&&opt.end&&opt.start>opt.end){var tmp=opt.end;opt.end=handleEnd(opt.start);opt.start=handleStart(tmp);if(opt.time.enabled&&opt.swapTime){swapTime();}}
opt.start=parseInt(opt.start);opt.end=parseInt(opt.end);clearHovering();if(opt.start&&!opt.end){$(self).trigger('datepicker-first-date-selected',{'date1':new Date(opt.start)});dayHovering(day);}
updateSelectableRange(time);checkSelectionValid();showSelectedInfo();showSelectedDays();autoclose();}
function weekNumberClicked(weekNumberDom){var thisTime=parseInt(weekNumberDom.attr('data-start-time'),10);var date1,date2;if(!opt.startWeek){opt.startWeek=thisTime;weekNumberDom.addClass('week-number-selected');date1=new Date(thisTime);opt.start=moment(date1).day(opt.startOfWeek=='monday'?1:0).valueOf();opt.end=moment(date1).day(opt.startOfWeek=='monday'?7:6).valueOf();}else{box.find('.week-number-selected').removeClass('week-number-selected');date1=new Date(thisTime<opt.startWeek?thisTime:opt.startWeek);date2=new Date(thisTime<opt.startWeek?opt.startWeek:thisTime);opt.startWeek=false;opt.start=moment(date1).day(opt.startOfWeek=='monday'?1:0).valueOf();opt.end=moment(date2).day(opt.startOfWeek=='monday'?7:6).valueOf();}
updateSelectableRange();checkSelectionValid();showSelectedInfo();showSelectedDays();autoclose();}
function isValidTime(time){time=parseInt(time,10);if(opt.startDate&&compare_day(time,opt.startDate)<0)return false;if(opt.endDate&&compare_day(time,opt.endDate)>0)return false;if(opt.start&&!opt.end&&!opt.singleDate){if(opt.maxDays>0&&countDays(time,opt.start)>opt.maxDays)return false;if(opt.minDays>0&&countDays(time,opt.start)<opt.minDays)return false;if(opt.selectForward&&time<opt.start)return false;if(opt.selectBackward&&time>opt.start)return false;if(opt.beforeShowDay&&typeof opt.beforeShowDay=='function'){var valid=true;var timeTmp=time;while(countDays(timeTmp,opt.start)>1){var arr=opt.beforeShowDay(new Date(timeTmp));if(!arr[0]){valid=false;break;}
if(Math.abs(timeTmp-opt.start)<86400000)break;if(timeTmp>opt.start)timeTmp-=86400000;if(timeTmp<opt.start)timeTmp+=86400000;}
if(!valid)return false;}}
return true;}
function updateSelectableRange(){box.find('.day.invalid.tmp').removeClass('tmp invalid').addClass('valid');if(opt.start&&!opt.end){box.find('.day.toMonth.valid').each(function(){var time=parseInt($(this).attr('time'),10);if(!isValidTime(time))
$(this).addClass('invalid tmp').removeClass('valid');else
$(this).addClass('valid tmp').removeClass('invalid');});}
return true;}
function dayHovering(day){var hoverTime=parseInt(day.attr('time'));var tooltip='';if(day.hasClass('has-tooltip')&&day.attr('data-tooltip')){tooltip='<span class="tooltip-content">'+day.attr('data-tooltip')+'</span>';}else if(!day.hasClass('invalid')){if(opt.singleDate){box.find('.day.hovering').removeClass('hovering');day.addClass('hovering');}else{box.find('.day').each(function(){var time=parseInt($(this).attr('time')),start=opt.start,end=opt.end;if(time==hoverTime){$(this).addClass('hovering');}else{$(this).removeClass('hovering');}
if((opt.start&&!opt.end)&&((opt.start<time&&hoverTime>=time)||(opt.start>time&&hoverTime<=time))){$(this).addClass('hovering');}else{$(this).removeClass('hovering');}});if(opt.start&&!opt.end){var days=countDays(hoverTime,opt.start);if(opt.hoveringTooltip){if(typeof opt.hoveringTooltip=='function'){tooltip=opt.hoveringTooltip(days,opt.start,hoverTime);}else if(opt.hoveringTooltip===true&&days>1){tooltip=days+' '+translate('days');}}}}}
if(tooltip){var posDay=day.offset();var posBox=box.offset();var _left=posDay.left-posBox.left;var _top=posDay.top-posBox.top;_left+=day.width()/2;var $tip=box.find('.date-range-length-tip');var w=$tip.css({'visibility':'hidden','display':'none'}).html(tooltip).width();var h=$tip.height();_left-=w/2;_top-=h;setTimeout(function(){$tip.css({left:_left,top:_top,display:'block','visibility':'visible'});},10);}else{box.find('.date-range-length-tip').hide();}}
function clearHovering(){box.find('.day.hovering').removeClass('hovering');box.find('.date-range-length-tip').hide();}
function dateChanged(date){var value=date.val();var name=date.attr('name');var type=date.parents('table').hasClass('month1')?'month1':'month2';var oppositeType=type==='month1'?'month2':'month1';var startDate=opt.startDate?moment(opt.startDate):false;var endDate=opt.endDate?moment(opt.endDate):false;var newDate=moment(opt[type])[name](value);if(startDate&&newDate.isSameOrBefore(startDate)){newDate=startDate.add(type==='month2'?1:0,'month');}
if(endDate&&newDate.isSameOrAfter(endDate)){newDate=endDate.add(!opt.singleMonth&&type==='month1'?-1:0,'month');}
showMonth(newDate,type);if(type==='month1'){if(opt.stickyMonths||moment(newDate).isSameOrAfter(opt[oppositeType],'month')){showMonth(moment(newDate).add(1,'month'),oppositeType);}}else{if(opt.stickyMonths||moment(newDate).isSameOrBefore(opt[oppositeType],'month')){showMonth(moment(newDate).add(-1,'month'),oppositeType);}}
showGap();}
function autoclose(){if(opt.singleDate===true){if(initiated&&opt.start){if(opt.autoClose)closeDatePicker();}}else{if(initiated&&opt.start&&opt.end){if(opt.autoClose)closeDatePicker();}}}
function checkSelectionValid(){var days=Math.ceil((opt.end-opt.start)/86400000)+1;if(opt.singleDate){if(opt.start&&!opt.end)
box.find('.drp_top-bar').removeClass('error').addClass('normal');else
box.find('.drp_top-bar').removeClass('error').removeClass('normal');}else if(opt.maxDays&&days>opt.maxDays){opt.start=false;opt.end=false;box.find('.day').removeClass('checked');box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html(translate('less-than').replace('%d',opt.maxDays));}else if(opt.minDays&&days<opt.minDays){opt.start=false;opt.end=false;box.find('.day').removeClass('checked');box.find('.drp_top-bar').removeClass('normal').addClass('error').find('.error-top').html(translate('more-than').replace('%d',opt.minDays));}else{if(opt.start||opt.end)
box.find('.drp_top-bar').removeClass('error').addClass('normal');else
box.find('.drp_top-bar').removeClass('error').removeClass('normal');}
if((opt.singleDate&&opt.start&&!opt.end)||(!opt.singleDate&&opt.start&&opt.end)){box.find('.apply-btn').removeClass('disabled');}else{box.find('.apply-btn').addClass('disabled');}
if(opt.batchMode){if((opt.start&&opt.startDate&&compare_day(opt.start,opt.startDate)<0)||(opt.end&&opt.endDate&&compare_day(opt.end,opt.endDate)>0)){opt.start=false;opt.end=false;box.find('.day').removeClass('checked');}}}
function showSelectedInfo(forceValid,silent){box.find('.start-day').html('...');box.find('.end-day').html('...');box.find('.selected-days').hide();if(opt.start){box.find('.start-day').html(getDateString(new Date(parseInt(opt.start))));}
if(opt.end){box.find('.end-day').html(getDateString(new Date(parseInt(opt.end))));}
var dateRange;if(opt.start&&opt.singleDate){box.find('.apply-btn').removeClass('disabled');dateRange=getDateString(new Date(opt.start));opt.setValue.call(selfDom,dateRange,getDateString(new Date(opt.start)),getDateString(new Date(opt.end)));if(initiated&&!silent){$(self).trigger('datepicker-change',{'value':dateRange,'date1':new Date(opt.start)});}}else if(opt.start&&opt.end){box.find('.selected-days').show().find('.selected-days-num').html(countDays(opt.end,opt.start));box.find('.apply-btn').removeClass('disabled');dateRange=getDateString(new Date(opt.start))+opt.separator+getDateString(new Date(opt.end));opt.setValue.call(selfDom,dateRange,getDateString(new Date(opt.start)),getDateString(new Date(opt.end)));if(initiated&&!silent){$(self).trigger('datepicker-change',{'value':dateRange,'date1':new Date(opt.start),'date2':new Date(opt.end)});}}else if(forceValid){box.find('.apply-btn').removeClass('disabled');}else{box.find('.apply-btn').addClass('disabled');}}
function countDays(start,end){return Math.abs(moment(start).diff(moment(end),'d'))+1;}
function setDateRange(date1,date2,silent){if(date1.getTime()>date2.getTime()){var tmp=date2;date2=date1;date1=tmp;tmp=null;}
var valid=true;if(opt.startDate&&compare_day(date1,opt.startDate)<0)valid=false;if(opt.endDate&&compare_day(date2,opt.endDate)>0)valid=false;if(!valid){showMonth(opt.startDate,'month1');showMonth(nextMonth(opt.startDate),'month2');showGap();return;}
opt.start=date1.getTime();opt.end=date2.getTime();if(opt.time.enabled){renderTime('time1',date1);renderTime('time2',date2);}
if(opt.stickyMonths||(compare_day(date1,date2)>0&&compare_month(date1,date2)===0)){if(opt.lookBehind){date1=prevMonth(date2);}else{date2=nextMonth(date1);}}
if(opt.stickyMonths&&opt.endDate!==false&&compare_month(date2,opt.endDate)>0){date1=prevMonth(date1);date2=prevMonth(date2);}
if(!opt.stickyMonths){if(compare_month(date1,date2)===0){if(opt.lookBehind){date1=prevMonth(date2);}else{date2=nextMonth(date1);}}}
showMonth(date1,'month1');showMonth(date2,'month2');showGap();checkSelectionValid();showSelectedInfo(false,silent);autoclose();}
function setSingleDate(date1){var valid=true;if(opt.startDate&&compare_day(date1,opt.startDate)<0)valid=false;if(opt.endDate&&compare_day(date1,opt.endDate)>0)valid=false;if(!valid){showMonth(opt.startDate,'month1');return;}
opt.start=date1.getTime();if(opt.time.enabled){renderTime('time1',date1);}
showMonth(date1,'month1');if(opt.singleMonth!==true){var date2=nextMonth(date1);showMonth(date2,'month2');}
showGap();showSelectedInfo();autoclose();}
function showSelectedDays(){if(!opt.start&&!opt.end)return;box.find('.day').each(function(){var time=parseInt($(this).attr('time')),start=opt.start,end=opt.end;if(opt.time.enabled){time=moment(time).startOf('day').valueOf();start=moment(start||moment().valueOf()).startOf('day').valueOf();end=moment(end||moment().valueOf()).startOf('day').valueOf();}
if((opt.start&&opt.end&&end>=time&&start<=time)||(opt.start&&!opt.end&&moment(start).format('YYYY-MM-DD')==moment(time).format('YYYY-MM-DD'))){$(this).addClass('checked');}else{$(this).removeClass('checked');}
if(opt.start&&moment(start).format('YYYY-MM-DD')==moment(time).format('YYYY-MM-DD')){$(this).addClass('first-date-selected');}else{$(this).removeClass('first-date-selected');}
if(opt.end&&moment(end).format('YYYY-MM-DD')==moment(time).format('YYYY-MM-DD')){$(this).addClass('last-date-selected');}else{$(this).removeClass('last-date-selected');}});box.find('.week-number').each(function(){if($(this).attr('data-start-time')==opt.startWeek){$(this).addClass('week-number-selected');}});}
function showMonth(date,month){date=moment(date).toDate();var monthElement=generateMonthElement(date,month);var yearElement=generateYearElement(date,month);box.find('.'+month+' .month-name').html(monthElement+' '+yearElement);box.find('.'+month+' tbody').html(createMonthHTML(date));opt[month]=date;updateSelectableRange();bindEvents();}
function generateMonthElement(date,month){date=moment(date);var currentMonth=date.get('month');var currentMonthName=nameMonth(currentMonth);var nonSelectableMonth='<div class="month-element">'+currentMonthName+'</div>';if(!opt.monthSelect){return nonSelectableMonth;}
var startDate=opt.startDate?moment(opt.startDate).add(!opt.singleMonth&&month==='month2'?1:0,'month'):false;var endDate=opt.endDate?moment(opt.endDate).add(!opt.singleMonth&&month==='month1'?-1:0,'month'):false;var minSelectableMonth=startDate&&date.isSame(startDate,'year')?startDate.get('month'):0;var maxSelectableMonth=endDate&&date.isSame(endDate,'year')?endDate.get('month'):11;var minVisibleMonth=Math.min(minSelectableMonth,currentMonth);var maxVisibleMonth=Math.max(maxSelectableMonth,currentMonth);if(minVisibleMonth===maxVisibleMonth){return nonSelectableMonth;}
var selectData=generateSelectData({minSelectable:minSelectableMonth,maxSelectable:maxSelectableMonth,minVisible:minVisibleMonth,maxVisible:maxVisibleMonth,},currentMonth,function(value){return nameMonth(value);})
return generateSelect('month',selectData);}
function generateYearElement(date,month){date=moment(date);var currentYear=date.get('year');var nonSelectableMonth='<div class="month-element">'+currentYear+'</div>';if(!opt.yearSelect){return nonSelectableMonth;}
var isYearFunction=opt.yearSelect&&typeof opt.yearSelect==='function';var startDate=opt.startDate?moment(opt.startDate).add(!opt.singleMonth&&month==='month2'?1:0,'month'):false;var endDate=opt.endDate?moment(opt.endDate).add(!opt.singleMonth&&month==='month1'?-1:0,'month'):false;var range=isYearFunction?opt.yearSelect(currentYear):opt.yearSelect.slice();var minSelectableYear=startDate?Math.max(range[0],startDate.get('year')):Math.min(range[0],currentYear);var maxSelectableYear=endDate?Math.min(range[1],endDate.get('year')):Math.max(range[1],currentYear);var minVisibleYear=Math.min(minSelectableYear,currentYear);var maxVisibleYear=Math.max(maxSelectableYear,currentYear);if(minVisibleYear===maxVisibleYear){return nonSelectableMonth;}
var selectData=generateSelectData({minSelectable:minSelectableYear,maxSelectable:maxSelectableYear,minVisible:minVisibleYear,maxVisible:maxVisibleYear,},currentYear)
return generateSelect('year',selectData);}
function generateSelectData(range,current,valueBeautifier){var data=[];valueBeautifier=valueBeautifier||function(value){return value;};for(var i=range.minVisible;i<=range.maxVisible;i++){data.push({value:i,text:valueBeautifier(i),selected:i===current,disabled:((i<range.minSelectable)||(i>range.maxSelectable)),});}
return data;}
function generateSelect(name,data){var select='<div class="select-wrapper"><select class="'+name+'" name="'+name+'">';var current;for(var i=0,l=data.length;i<l;i++){var item=data[i];select+='<option value="'+item.value+'"'+
(item.selected?' selected':'')+
(item.disabled?' disabled':'')+'>'+
item.text+'</option>';if(item.selected){current=item.text;}}
select+='</select>'+current+'</div>';return select;}
function bindEvents(){box.find('.day').off("click").click(function(evt){dayClicked($(this));});box.find('.day').off("mouseenter").mouseenter(function(evt){dayHovering($(this));});box.find('.day').off("mouseleave").mouseleave(function(evt){box.find('.date-range-length-tip').hide();if(opt.singleDate){clearHovering();}});box.find('.week-number').off("click").click(function(evt){weekNumberClicked($(this));});box.find('.month').off("change").change(function(evt){dateChanged($(this));});box.find('.year').off("change").change(function(evt){dateChanged($(this));});}
function showTime(date,name){box.find('.'+name).append(getTimeHTML());renderTime(name,date);}
function nameMonth(m){return translate('month-name')[m];}
function getDateString(d){return moment(d).format(opt.format);}
function showGap(){showSelectedDays();var m1=parseInt(moment(opt.month1).format('YYYYMM'));var m2=parseInt(moment(opt.month2).format('YYYYMM'));var p=Math.abs(m1-m2);var shouldShow=(p>1&&p!=89);if(shouldShow){box.addClass('has-gap').removeClass('no-gap').find('.gap').css('visibility','visible');}else{box.removeClass('has-gap').addClass('no-gap').find('.gap').css('visibility','hidden');}
var h1=box.find('table.month1').height();var h2=box.find('table.month2').height();box.find('.gap').height(Math.max(h1,h2)+10);}
function closeDatePicker(){if(opt.alwaysOpen)return;var afterAnim=function(){$(self).data('date-picker-opened',false);$(self).trigger('datepicker-closed',{relatedTarget:box});};if(opt.customCloseAnimation){opt.customCloseAnimation.call(box.get(0),afterAnim);}else{$(box).slideUp(opt.duration,afterAnim);}
$(self).trigger('datepicker-close',{relatedTarget:box});}
function redrawDatePicker(){showMonth(opt.month1,'month1');showMonth(opt.month2,'month2');}
function compare_month(m1,m2){var p=parseInt(moment(m1).format('YYYYMM'))-parseInt(moment(m2).format('YYYYMM'));if(p>0)return 1;if(p===0)return 0;return-1;}
function compare_day(m1,m2){var p=parseInt(moment(m1).format('YYYYMMDD'))-parseInt(moment(m2).format('YYYYMMDD'));if(p>0)return 1;if(p===0)return 0;return-1;}
function nextMonth(month){return moment(month).add(1,'months').toDate();}
function prevMonth(month){return moment(month).add(-1,'months').toDate();}
function getTimeHTML(){return'<div>'+'<span>'+translate('Time')+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span>'+'</div>'+'<div class="hour">'+'<label>'+translate('Hour')+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label>'+'</div>'+'<div class="minute">'+'<label>'+translate('Minute')+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label>'+'</div>';}
function createDom(){var html='<div class="date-picker-wrapper';if(opt.extraClass)html+=' '+opt.extraClass+' ';if(opt.singleDate)html+=' single-date ';if(!opt.showShortcuts)html+=' no-shortcuts ';if(!opt.showTopbar)html+=' no-topbar ';if(opt.customTopBar)html+=' custom-topbar ';html+='">';if(opt.showTopbar){html+='<div class="drp_top-bar">';if(opt.customTopBar){if(typeof opt.customTopBar=='function')opt.customTopBar=opt.customTopBar();html+='<div class="custom-top">'+opt.customTopBar+'</div>';}else{html+='<div class="normal-top">'+'<span class="selection-top">'+translate('selected')+' </span> <b class="start-day">...</b>';if(!opt.singleDate){html+=' <span class="separator-day">'+opt.separator+'</span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> '+translate('days')+')</i>';}
html+='</div>';html+='<div class="error-top">error</div>'+'<div class="default-top">default</div>';}
html+='<input type="button" class="apply-btn disabled'+getApplyBtnClass()+'" value="'+translate('apply')+'" />';html+='</div>';}
var _colspan=opt.showWeekNumbers?6:5;var arrowPrev='&lt;';if(opt.customArrowPrevSymbol)arrowPrev=opt.customArrowPrevSymbol;var arrowNext='&gt;';if(opt.customArrowNextSymbol)arrowNext=opt.customArrowNextSymbol;html+='<div class="month-wrapper">'+'   <table class="month1" cellspacing="0" border="0" cellpadding="0">'+'       <thead>'+'           <tr class="caption">'+'               <th>'+'                   <span class="prev">'+
arrowPrev+'                   </span>'+'               </th>'+'               <th colspan="'+_colspan+'" class="month-name">'+'               </th>'+'               <th>'+
(opt.singleDate||!opt.stickyMonths?'<span class="next">'+arrowNext+'</span>':'')+'               </th>'+'           </tr>'+'           <tr class="week-name">'+getWeekHead()+'       </thead>'+'       <tbody></tbody>'+'   </table>';if(hasMonth2()){html+='<div class="gap">'+getGapHTML()+'</div>'+'<table class="month2" cellspacing="0" border="0" cellpadding="0">'+'   <thead>'+'   <tr class="caption">'+'       <th>'+
(!opt.stickyMonths?'<span class="prev">'+arrowPrev+'</span>':'')+'       </th>'+'       <th colspan="'+_colspan+'" class="month-name">'+'       </th>'+'       <th>'+'           <span class="next">'+arrowNext+'</span>'+'       </th>'+'   </tr>'+'   <tr class="week-name">'+getWeekHead()+'   </thead>'+'   <tbody></tbody>'+'</table>';}
html+='<div class="dp-clearfix"></div>'+'<div class="time">'+'<div class="time1"></div>';if(!opt.singleDate){html+='<div class="time2"></div>';}
html+='</div>'+'<div class="dp-clearfix"></div>'+'</div>';html+='<div class="footer">';if(opt.showShortcuts){html+='<div class="shortcuts"><b>'+translate('shortcuts')+'</b>';var data=opt.shortcuts;if(data){var name;if(data['prev-days']&&data['prev-days'].length>0){html+='&nbsp;<span class="prev-days">'+translate('past');for(var i=0;i<data['prev-days'].length;i++){name=data['prev-days'][i];name+=(data['prev-days'][i]>1)?translate('days'):translate('day');html+=' <a href="javascript:;" shortcut="day,-'+data['prev-days'][i]+'">'+name+'</a>';}
html+='</span>';}
if(data['next-days']&&data['next-days'].length>0){html+='&nbsp;<span class="next-days">'+translate('following');for(var i=0;i<data['next-days'].length;i++){name=data['next-days'][i];name+=(data['next-days'][i]>1)?translate('days'):translate('day');html+=' <a href="javascript:;" shortcut="day,'+data['next-days'][i]+'">'+name+'</a>';}
html+='</span>';}
if(data.prev&&data.prev.length>0){html+='&nbsp;<span class="prev-buttons">'+translate('previous');for(var i=0;i<data.prev.length;i++){name=translate('prev-'+data.prev[i]);html+=' <a href="javascript:;" shortcut="prev,'+data.prev[i]+'">'+name+'</a>';}
html+='</span>';}
if(data.next&&data.next.length>0){html+='&nbsp;<span class="next-buttons">'+translate('next');for(var i=0;i<data.next.length;i++){name=translate('next-'+data.next[i]);html+=' <a href="javascript:;" shortcut="next,'+data.next[i]+'">'+name+'</a>';}
html+='</span>';}}
if(opt.customShortcuts){for(var i=0;i<opt.customShortcuts.length;i++){var sh=opt.customShortcuts[i];html+='&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+sh.name+'</a></span>';}}
html+='</div>';}
if(opt.showCustomValues){html+='<div class="customValues"><b>'+(opt.customValueLabel||translate('custom-values'))+'</b>';if(opt.customValues){for(var i=0;i<opt.customValues.length;i++){var val=opt.customValues[i];html+='&nbsp;<span class="custom-value"><a href="javascript:;" custom="'+val.value+'">'+val.name+'</a></span>';}}}
html+='</div></div>';return $(html);}
function getApplyBtnClass(){var klass='';if(opt.autoClose===true){klass+=' hide';}
if(opt.applyBtnClass!==''){klass+=' '+opt.applyBtnClass;}
return klass;}
function getWeekHead(){var prepend=opt.showWeekNumbers?'<th>'+translate('week-number')+'</th>':'';if(opt.startOfWeek=='monday'){return prepend+'<th>'+translate('week-1')+'</th>'+'<th>'+translate('week-2')+'</th>'+'<th>'+translate('week-3')+'</th>'+'<th>'+translate('week-4')+'</th>'+'<th>'+translate('week-5')+'</th>'+'<th>'+translate('week-6')+'</th>'+'<th>'+translate('week-7')+'</th>';}else{return prepend+'<th>'+translate('week-7')+'</th>'+'<th>'+translate('week-1')+'</th>'+'<th>'+translate('week-2')+'</th>'+'<th>'+translate('week-3')+'</th>'+'<th>'+translate('week-4')+'</th>'+'<th>'+translate('week-5')+'</th>'+'<th>'+translate('week-6')+'</th>';}}
function isMonthOutOfBounds(month){month=moment(month);if(opt.startDate&&month.endOf('month').isBefore(opt.startDate)){return true;}
if(opt.endDate&&month.startOf('month').isAfter(opt.endDate)){return true;}
return false;}
function getGapHTML(){var html=['<div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines">'];for(var i=0;i<20;i++){html.push('<div class="gap-line">'+'<div class="gap-1"></div>'+'<div class="gap-2"></div>'+'<div class="gap-3"></div>'+'</div>');}
html.push('</div>');return html.join('');}
function hasMonth2(){return(!opt.singleMonth);}
function attributesCallbacks(initialObject,callbacksArray,today){var resultObject=$.extend(true,{},initialObject);$.each(callbacksArray,function(cbAttrIndex,cbAttr){var addAttributes=cbAttr(today);for(var attr in addAttributes){if(resultObject.hasOwnProperty(attr)){resultObject[attr]+=addAttributes[attr];}else{resultObject[attr]=addAttributes[attr];}}});var attrString='';for(var attr in resultObject){if(resultObject.hasOwnProperty(attr)){attrString+=attr+'="'+resultObject[attr]+'" ';}}
return attrString;}
function createMonthHTML(d){var days=[];d.setDate(1);var lastMonth=new Date(d.getTime()-86400000);var now=new Date();var dayOfWeek=d.getDay();if((dayOfWeek===0)&&(opt.startOfWeek==='monday')){dayOfWeek=7;}
var today,valid;if(dayOfWeek>0){for(var i=dayOfWeek;i>0;i--){var day=new Date(d.getTime()-86400000*i);valid=isValidTime(day.getTime());if(opt.startDate&&compare_day(day,opt.startDate)<0)valid=false;if(opt.endDate&&compare_day(day,opt.endDate)>0)valid=false;days.push({date:day,type:'lastMonth',day:day.getDate(),time:day.getTime(),valid:valid});}}
var toMonth=d.getMonth();for(var i=0;i<40;i++){today=moment(d).add(i,'days').toDate();valid=isValidTime(today.getTime());if(opt.startDate&&compare_day(today,opt.startDate)<0)valid=false;if(opt.endDate&&compare_day(today,opt.endDate)>0)valid=false;days.push({date:today,type:today.getMonth()==toMonth?'toMonth':'nextMonth',day:today.getDate(),time:today.getTime(),valid:valid});}
var html=[];for(var week=0;week<6;week++){if(days[week*7].type=='nextMonth')break;html.push('<tr>');for(var day=0;day<7;day++){var _day=(opt.startOfWeek=='monday')?day+1:day;today=days[week*7+_day];var highlightToday=moment(today.time).format('L')==moment(now).format('L');today.extraClass='';today.tooltip='';if(today.valid&&opt.beforeShowDay&&typeof opt.beforeShowDay=='function'){var _r=opt.beforeShowDay(moment(today.time).toDate());today.valid=_r[0];today.extraClass=_r[1]||'';today.tooltip=_r[2]||'';if(today.tooltip!=='')today.extraClass+=' has-tooltip ';}
var todayDivAttr={time:today.time,'data-tooltip':today.tooltip,'class':'day '+today.type+' '+today.extraClass+' '+(today.valid?'valid':'invalid')+' '+(highlightToday?'real-today':'')};if(day===0&&opt.showWeekNumbers){html.push('<td><div class="week-number" data-start-time="'+today.time+'">'+opt.getWeekNumber(today.date)+'</div></td>');}
html.push('<td '+attributesCallbacks({},opt.dayTdAttrs,today)+'><div '+attributesCallbacks(todayDivAttr,opt.dayDivAttrs,today)+'>'+showDayHTML(today.time,today.day)+'</div></td>');}
html.push('</tr>');}
return html.join('');}
function showDayHTML(time,date){if(opt.showDateFilter&&typeof opt.showDateFilter=='function')return opt.showDateFilter(time,date);return date;}
function getLanguages(){if(opt.language=='auto'){var language=navigator.language?navigator.language:navigator.browserLanguage;if(!language){return $.dateRangePickerLanguages['default'];}
language=language.toLowerCase();if(language in $.dateRangePickerLanguages){return $.dateRangePickerLanguages[language];}
return $.dateRangePickerLanguages['default'];}else if(opt.language&&opt.language in $.dateRangePickerLanguages){return $.dateRangePickerLanguages[opt.language];}else{return $.dateRangePickerLanguages['default'];}}
function translate(translationKey){var translationKeyLowerCase=translationKey.toLowerCase();var result=(translationKey in languages)?languages[translationKey]:(translationKeyLowerCase in languages)?languages[translationKeyLowerCase]:null;var defaultLanguage=$.dateRangePickerLanguages['default'];if(result==null)result=(translationKey in defaultLanguage)?defaultLanguage[translationKey]:(translationKeyLowerCase in defaultLanguage)?defaultLanguage[translationKeyLowerCase]:'';return result;}
function getDefaultTime(){var defaultTime=opt.defaultTime?opt.defaultTime:new Date();if(opt.lookBehind){if(opt.startDate&&compare_month(defaultTime,opt.startDate)<0)defaultTime=nextMonth(moment(opt.startDate).toDate());if(opt.endDate&&compare_month(defaultTime,opt.endDate)>0)defaultTime=moment(opt.endDate).toDate();}else{if(opt.startDate&&compare_month(defaultTime,opt.startDate)<0)defaultTime=moment(opt.startDate).toDate();if(opt.endDate&&compare_month(nextMonth(defaultTime),opt.endDate)>0)defaultTime=prevMonth(moment(opt.endDate).toDate());}
if(opt.singleDate){if(opt.startDate&&compare_month(defaultTime,opt.startDate)<0)defaultTime=moment(opt.startDate).toDate();if(opt.endDate&&compare_month(defaultTime,opt.endDate)>0)defaultTime=moment(opt.endDate).toDate();}
return defaultTime;}
function resetMonthsView(time){if(!time){time=getDefaultTime();}
if(opt.lookBehind){showMonth(prevMonth(time),'month1');showMonth(time,'month2');}else{showMonth(time,'month1');showMonth(nextMonth(time),'month2');}
if(opt.singleDate){showMonth(time,'month1');}
showSelectedDays();showGap();}
function resetMonthViewIfShortcutRangeSelected(time){if(opt.shortcutRangeSelected){opt.shortcutRangeSelected=false;resetMonthsView(time);}}
function outsideClickClose(evt){if(!IsOwnDatePickerClicked(evt,self[0])){if(box.is(':visible'))closeDatePicker();}}};}));(function($){$.extend($.fn,{pstrength:function(options){var options=$.extend({verdicts:["Too Short!","Very Weak","Weak","Medium","Strong","Very Strong"],colors:["#ccc","#f00","#c06","#f60","#3c0","#3f0"],values:[20,30,40,60,80,100],scores:[10,15,30,40],minchar:6,minCharText:"Minimum length is %d characters"},options);return this.each(function(){var infoarea=$(this).attr('id');$(this).after($("<div>").attr("id",infoarea+"_bar").addClass("progress").css("display","none").append($("<div>").addClass("progress-bar").css("width","0%").attr({"role":"progressbar","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100}).append($("<span>").attr("id",infoarea+"_text").text("0%"))));if(options.minchar>0){$(this).after($("<div>").addClass("help-block").attr("id",infoarea+"_minchar").text(options.minCharText.replace('%d',options.minchar)));}
options.$ctlBar=$(document).find("#"+infoarea+"_bar .progress-bar");options.$ctlText=$(document).find("#"+infoarea+"_text");$(this).keyup(function(){if(options.minchar<=$(this).val().length&&$(document).find("#"+infoarea+'_bar:hidden')){$(document).find("#"+infoarea+'_bar').show();}
$.fn.runPassword($(this).val(),infoarea,options);});});},runPassword:function(password,infoarea,options){nPerc=$.fn.checkPassword(password,options);var statusNum;if(nPerc<0){statusNum=0}
else if(nPerc<=options.scores[0]){statusNum=1}
else if(nPerc>options.scores[0]&&nPerc<=options.scores[1]){statusNum=2}
else if(nPerc>options.scores[1]&&nPerc<=options.scores[2]){statusNum=3}
else if(nPerc>options.scores[2]&&nPerc<=options.scores[3]){statusNum=4}
else{statusNum=5}
options.$ctlBar.css({width:options.values[statusNum]+"%"});options.$ctlBar.attr("aria-valuenow",options.values[statusNum]);options.$ctlBar.css({backgroundColor:options.colors[statusNum]});options.$ctlText.html(options.verdicts[statusNum]);},checkPassword:function(password,options)
{var intScore=0;var strVerdict=options.verdicts[0];if(password.length<options.minchar){intScore=(intScore-100)}
else if(password.length>options.minchar+1&&password.length<options.minchar+3){intScore=(intScore+6)}
else if(password.length>options.minchar+2&&password.length<options.minchar+4){intScore=(intScore+12)}
else if(password.length>options.minchar*2){intScore=(intScore+18)}
if(password.match(/[a-z]/)){intScore=(intScore+1)}
if(password.match(/[A-Z]/)){intScore=(intScore+5)}
if(password.match(/\d+/)){intScore=(intScore+5)}
if(password.match(/(.*[0-9].*[0-9].*[0-9])/)){intScore=(intScore+5)}
if(password.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)){intScore=(intScore+5)}
if(password.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){intScore=(intScore+5)}
if(password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){intScore=(intScore+2)}
if(password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)){intScore=(intScore+2)}
if(password.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)){intScore=(intScore+2)}
return intScore;}});})(jQuery);(function($){var defaults={url:false,callback:false,target:false,duration:120,on:'mouseover',touch:true,onZoomIn:false,onZoomOut:false,zoomEnableCallBack:false,zoomEnable:true,magnify:1,longtouchtimer:function(){},touchduration:500};$.zoom=function(target,source,img,magnify){var targetHeight,targetWidth,sourceHeight,sourceWidth,xRatio,yRatio,offset,position=$(target).css('position'),$source=$(source);target.style.position=/(absolute|fixed)/.test(position)?position:'relative';target.style.overflow='hidden';img.style.width=img.style.height='';var i=$("<div class='zoomImg'><div class='zoomImgMask'></div></div>").css({width:img.width*magnify,height:img.height*magnify,}).appendTo(target);$(img).appendTo(i);return{init:function(){targetWidth=$(target).outerWidth();targetHeight=$(target).outerHeight();if(source===target){sourceWidth=targetWidth;sourceHeight=targetHeight;}else{sourceWidth=$source.outerWidth();sourceHeight=$source.outerHeight();}
xRatio=(img.width-targetWidth)/sourceWidth;yRatio=(img.height-targetHeight)/sourceHeight;offset=$source.offset();},move:function(e){if(offset==undefined){offset={left:0,top:0}}
var left=(e.pageX-offset.left),top=(e.pageY-offset.top);top=Math.max(Math.min(top,sourceHeight),0);left=Math.max(Math.min(left,sourceWidth),0);$(img).parent(".zoomImg").css("left",(left*-xRatio)+'px');$(img).parent(".zoomImg").css("top",(top*-yRatio)+'px');}};};$.fn.zoom=function(options){return this.each(function(){var
settings=$.extend({},defaults,options||{}),target=settings.target||this,source=this,$source=$(source),img=document.createElement('img'),$img=$(img),mousemove='mousemove.zoom',clicked=false,touched=false,$urlElement;if(!settings.url){$urlElement=$source.find('img');if($urlElement[0]){settings.url=$urlElement.data('src')||$urlElement.attr('src');}
if(!settings.url){return;}}
(function(){var position=target.style.position;var overflow=target.style.overflow;$source.one('zoom.destroy',function(){$source.off(".zoom");target.style.position=position;target.style.overflow=overflow;$img.remove();});}());img.onload=function(){var zoom=$.zoom(target,source,img,settings.magnify);function start(e){if($.isFunction(settings.zoomEnableCallBack)){settings.zoomEnable=settings.zoomEnableCallBack.call(img)}
if(!settings.zoomEnable){return false;}
zoom.init();zoom.move(e);$(img).parent(".zoomImg").stop().fadeTo($.support.opacity?settings.duration:0,1,$.isFunction(settings.onZoomIn)?settings.onZoomIn.call(img):false);}
function stop(){if(settings.longtouchtimer){clearTimeout(settings.longtouchtimer);}
$(img).parent(".zoomImg").stop().fadeTo(settings.duration,0,$.isFunction(settings.onZoomOut)?settings.onZoomOut.call(img):false);}
if(settings.on==='grab'){$source.on('mousedown.zoom',function(e){if(e.which===1){$(document).one('mouseup.zoom',function(){stop();$(document).off(mousemove,zoom.move);});settings.longtouchtimer=setTimeout(function(){start(e);$(document).on(mousemove,zoom.move);},settings.touchduration);e.preventDefault();}});}else if(settings.on==='click'){$source.on('click.zoom',function(e){if(clicked){return;}else{clicked=true;start(e);$(document).on(mousemove,zoom.move);$(document).one('click.zoom',function(){stop();clicked=false;$(document).off(mousemove,zoom.move);});return false;}});}else if(settings.on==='toggle'){$source.on('click.zoom',function(e){if(clicked){stop();}else{start(e);}
clicked=!clicked;});}else if(settings.on==='mouseover'){zoom.init();$source.on('mouseenter.zoom',start).on('mouseleave.zoom',stop).on(mousemove,function(){if(settings.longtouchtimer){clearTimeout(settings.longtouchtimer);}
zoom.move()});}
if(settings.touch){touched=false
$source.on('touchstart.zoom',function(e){clearTimeout(settings.longtouchtimer);settings.longtouchtimer=setTimeout(function(){if(touched){touched=false;stop();}else{touched=true;e.preventDefault();start(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]);}},settings.touchduration);}).on('touchmove.zoom',function(e){if(touched){e.preventDefault();zoom.move(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]);}}).on('touchend.zoom',function(e){e.preventDefault();if(settings.longtouchtimer){clearTimeout(settings.longtouchtimer);}
stop();touched=false});}
if($.isFunction(settings.callback)){settings.callback.call(img);}};img.src=settings.url;});};$.fn.zoom.defaults=defaults;}(window.jQuery));(function(window,document){'use strict';var Sharer=function(elem){this.elem=elem;};Sharer.init=function(){var elems=document.querySelectorAll('[data-sharer]'),i,l=elems.length;for(i=0;i<l;i++){elems[i].addEventListener('click',Sharer.add);}};Sharer.add=function(elem){var target=elem.currentTarget||elem.srcElement;var sharer=new Sharer(target);sharer.share();};Sharer.prototype={constructor:Sharer,getValue:function(attr){var val=this.elem.getAttribute('data-'+attr);if(val&&attr==='hashtag'){if(!val.startsWith('#')){val='#'+val;}}
return val;},share:function(){var sharer=this.getValue('sharer').toLowerCase(),sharers={facebook:{shareUrl:'https://www.facebook.com/sharer/sharer.php',params:{u:window.location.href,quote:this.getValue('disclaimer'),hashtag:this.getValue('hashtag')}},linkedin:{shareUrl:'https://www.linkedin.com/shareArticle',params:{url:this.getValue('url'),mini:true}},twitter:{shareUrl:'https://twitter.com/intent/tweet/',params:{text:this.getValue('disclaimer')+'\n\n'+this.getValue('title'),url:window.location.href,hashtags:this.getValue('hashtags'),via:this.getValue('via')}},email:{shareUrl:'mailto:'+this.getValue('to')||'',params:{subject:this.getValue('subject'),body:this.getValue('disclaimer')+'\n\n'+this.getValue('title')+'\n'+window.location.href},isLink:true},whatsapp:{shareUrl:this.getValue('web')!==null?'https://api.whatsapp.com/send':'whatsapp://send',params:{text:this.getValue('disclaimer')+'\n\n'+this.getValue('title')+' '+window.location.href},isLink:true},telegram:{shareUrl:'https://telegram.me/share/url',params:{text:this.getValue('title'),url:this.getValue('url'),to:this.getValue('to')},isLink:true},viber:{shareUrl:'viber://forward',params:{text:this.getValue('title')+' '+this.getValue('url')},isLink:true},line:{shareUrl:'http://line.me/R/msg/text/?'+
encodeURIComponent(this.getValue('title')+' '+this.getValue('url')),isLink:true},pinterest:{shareUrl:'https://www.pinterest.com/pin/create/button/',params:{url:this.getValue('url'),media:this.getValue('image'),description:this.getValue('description')}},tumblr:{shareUrl:'http://tumblr.com/widgets/share/tool',params:{canonicalUrl:this.getValue('url'),content:this.getValue('url'),posttype:'link',title:this.getValue('title'),caption:this.getValue('caption'),tags:this.getValue('tags')}},hackernews:{shareUrl:'https://news.ycombinator.com/submitlink',params:{u:this.getValue('url'),t:this.getValue('title')}},reddit:{shareUrl:'https://www.reddit.com/submit',params:{url:this.getValue('url')}},vk:{shareUrl:'http://vk.com/share.php',params:{url:this.getValue('url'),title:this.getValue('title'),description:this.getValue('caption'),image:this.getValue('image')}},xing:{shareUrl:'https://www.xing.com/app/user',params:{op:'share',url:this.getValue('url'),title:this.getValue('title')}},buffer:{shareUrl:'https://buffer.com/add',params:{url:this.getValue('url'),title:this.getValue('title'),via:this.getValue('via'),picture:this.getValue('picture')}},instapaper:{shareUrl:'http://www.instapaper.com/edit',params:{url:this.getValue('url'),title:this.getValue('title'),description:this.getValue('description')}},pocket:{shareUrl:'https://getpocket.com/save',params:{url:this.getValue('url')}},digg:{shareUrl:'http://www.digg.com/submit',params:{url:this.getValue('url')}},stumbleupon:{shareUrl:'http://www.stumbleupon.com/submit',params:{url:this.getValue('url'),title:this.getValue('title')}},flipboard:{shareUrl:'https://share.flipboard.com/bookmarklet/popout',params:{v:2,title:this.getValue('title'),url:this.getValue('url'),t:Date.now()}},weibo:{shareUrl:'http://service.weibo.com/share/share.php',params:{url:this.getValue('url'),title:this.getValue('title'),pic:this.getValue('image'),appkey:this.getValue('appkey'),ralateUid:this.getValue('ralateuid'),language:'zh_cn'}},renren:{shareUrl:'http://share.renren.com/share/buttonshare',params:{link:this.getValue('url')}},myspace:{shareUrl:'https://myspace.com/post',params:{u:this.getValue('url'),t:this.getValue('title'),c:this.getValue('description')}},blogger:{shareUrl:'https://www.blogger.com/blog-this.g',params:{u:this.getValue('url'),n:this.getValue('title'),t:this.getValue('description')}},baidu:{shareUrl:'http://cang.baidu.com/do/add',params:{it:this.getValue('title'),iu:this.getValue('url')}},douban:{shareUrl:'https://www.douban.com/share/service',params:{name:this.getValue('title'),href:this.getValue('url'),image:this.getValue('image')}},okru:{shareUrl:'https://connect.ok.ru/dk',params:{'st.cmd':'WidgetSharePreview','st.shareUrl':this.getValue('url'),title:this.getValue('title')}},mailru:{shareUrl:'http://connect.mail.ru/share',params:{share_url:this.getValue('url'),linkname:this.getValue('title'),linknote:this.getValue('description'),type:'page'}},evernote:{shareUrl:'http://www.evernote.com/clip.action',params:{url:this.getValue('url'),title:this.getValue('title')}},skype:{shareUrl:'https://web.skype.com/share',params:{url:this.getValue('url'),title:this.getValue('title')}}},s=sharers[sharer];if(s){s.width=this.getValue('width');s.height=this.getValue('height');}
return s!==undefined?this.urlSharer(s):false;},urlSharer:function(sharer){var p=sharer.params||{},keys=Object.keys(p),i,str=keys.length>0?'?':'';for(i=0;i<keys.length;i++){if(str!=='?'){str+='&';}
if(p[keys[i]]){str+=keys[i]+'='+encodeURIComponent(p[keys[i]]);}}
sharer.shareUrl+=str;if(!sharer.isLink){var popWidth=sharer.width||600,popHeight=sharer.height||480,left=window.innerWidth/2-popWidth/2+window.screenX,top=window.innerHeight/2-popHeight/2+window.screenY,popParams='scrollbars=no, width='+
popWidth+', height='+
popHeight+', top='+
top+', left='+
left,newWindow;if(this.getValue('openInNewTab')=="true"){newWindow=window.open(sharer.shareUrl,'_blank');}else{newWindow=window.open(sharer.shareUrl,'',popParams);}
if(window.focus){newWindow.focus();}}else{window.location.href=sharer.shareUrl;}}};if(document.readyState==='complete'||document.readyState!=='loading'){Sharer.init();}else{document.addEventListener('DOMContentLoaded',Sharer.init);}
window.addEventListener('page:load',Sharer.init);window.Sharer=Sharer;})(window,document);var u="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function v(){v=function(){},u.Symbol||(u.Symbol=A)}var B=0;function A(t){return"jscomp_symbol_"+(t||"")+B++}!function(t){function i(n){if(e[n])return e[n].R;var o=e[n]={ia:n,ea:!1,R:{}};return t[n].call(o.R,o,o.R,i),o.ea=!0,o.R}var e={};i.u=t,i.h=e,i.c=function(t,e,n){i.g(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){v(),v(),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(v(),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})),Object.defineProperty(t,"__esModule",{value:!0})},i.m=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.aa)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.c(n,o,function(i){return t[i]}.bind(null,o));return n},i.i=function(t){var e=t&&t.aa?function(){return t.default}:function(){return t};return i.c(e,"a",e),e},i.g=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.o="",i(i.w=0)}([function(t,i,e){function n(t,i){if(i=void 0===i?{}:i,this.h=t,this.g=this.g.bind(this),!a(this.h))throw new TypeError("`new Drift` requires a DOM element as its first argument.");t=i.namespace||null;var e=i.showWhitespaceAtEdges||!1,n=i.containInline||!1,o=i.inlineOffsetX||0,s=i.inlineOffsetY||0,h=i.inlineContainer||document.body,r=i.sourceAttribute||"data-zoom",d=i.zoomFactor||3,f=void 0===i.paneContainer?document.body:i.paneContainer,u=i.inlinePane||375,p=!("handleTouch"in i)||!!i.handleTouch,l=i.onShow||null,c=i.onHide||null,b=!("injectBaseStyles"in i)||!!i.injectBaseStyles,m=i.hoverDelay||0,v=i.touchDelay||0,y=i.hoverBoundingBox||!1,g=i.touchBoundingBox||!1;if(i=i.boundingBoxContainer||document.body,!0!==u&&!a(f))throw new TypeError("`paneContainer` must be a DOM element when `inlinePane !== true`");if(!a(h))throw new TypeError("`inlineContainer` must be a DOM element");this.a={j:t,N:e,H:n,J:o,K:s,v:h,O:r,f:d,fa:f,da:u,A:p,M:l,L:c,ca:b,C:m,F:v,B:y,D:g,G:i},this.a.ca&&!document.querySelector(".drift-base-styles")&&((i=document.createElement("style")).type="text/css",i.classList.add("drift-base-styles"),i.appendChild(document.createTextNode(".drift-bounding-box,.drift-zoom-pane{position:absolute;pointer-events:none}@keyframes noop{0%{zoom:1}}@-webkit-keyframes noop{0%{zoom:1}}.drift-zoom-pane.drift-open{display:block}.drift-zoom-pane.drift-closing,.drift-zoom-pane.drift-opening{animation:noop 1ms;-webkit-animation:noop 1ms}.drift-zoom-pane{overflow:hidden;width:100%;height:100%;top:0;left:0}.drift-zoom-pane-loader{display:none}.drift-zoom-pane img{position:absolute;display:block;max-width:none;max-height:none}")),(t=document.head).insertBefore(i,t.firstChild)),this.w(),this.u()}function o(t){t=void 0===t?{}:t,this.h=this.h.bind(this),this.g=this.g.bind(this),this.m=this.m.bind(this),this.s=!1;var i=void 0===t.I?null:t.I,e=void 0===t.f?f():t.f,n=void 0===t.S?f():t.S,o=void 0===t.j?null:t.j,s=void 0===t.N?f():t.N,h=void 0===t.H?f():t.H;this.a={I:i,f:e,S:n,j:o,N:s,H:h,J:void 0===t.J?0:t.J,K:void 0===t.K?0:t.K,v:void 0===t.v?document.body:t.v},this.o=this.i("open"),this.X=this.i("opening"),this.u=this.i("closing"),this.w=this.i("inline"),this.W=this.i("loading"),this.ga()}function s(t){t=void 0===t?{}:t,this.m=this.m.bind(this),this.h=this.h.bind(this),this.g=this.g.bind(this),this.c=this.c.bind(this);var i=t;t=void 0===i.b?f():i.b;var e=void 0===i.l?f():i.l,n=void 0===i.O?f():i.O,o=void 0===i.A?f():i.A,s=void 0===i.M?null:i.M,a=void 0===i.L?null:i.L,r=void 0===i.C?0:i.C,d=void 0===i.F?0:i.F,u=void 0===i.B?f():i.B,p=void 0===i.D?f():i.D,l=void 0===i.j?null:i.j,c=void 0===i.f?f():i.f;i=void 0===i.G?f():i.G,this.a={b:t,l:e,O:n,A:o,M:s,L:a,C:r,F:d,B:u,D:p,j:l,f:c,G:i},(this.a.B||this.a.D)&&(this.o=new h({j:this.a.j,f:this.a.f,P:this.a.G})),this.enabled=!0,this.w()}function h(t){this.s=!1;var i=void 0===t.j?null:t.j,e=void 0===t.f?f():t.f;t=void 0===t.P?f():t.P,this.a={j:i,f:e,P:t},this.c=this.g("open"),this.h()}function a(t){return p?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function r(t,i){i.forEach(function(i){t.classList.add(i)})}function d(t,i){i.forEach(function(i){t.classList.remove(i)})}function f(){throw Error("Missing parameter")}e.r(i);var p="object"==typeof HTMLElement;h.prototype.g=function(t){var i=["drift-"+t],e=this.a.j;return e&&i.push(e+"-"+t),i},h.prototype.h=function(){this.b=document.createElement("div"),r(this.b,this.g("bounding-box"))},h.prototype.show=function(t,i){this.s=!0,this.a.P.appendChild(this.b);var e=this.b.style;e.width=Math.round(t/this.a.f)+"px",e.height=Math.round(i/this.a.f)+"px",r(this.b,this.c)},h.prototype.U=function(){this.s&&this.a.P.removeChild(this.b),this.s=!1,d(this.b,this.c)},h.prototype.setPosition=function(t,i,e){var n=window.pageXOffset,o=window.pageYOffset;t=e.left+t*e.width-this.b.clientWidth/2+n,i=e.top+i*e.height-this.b.clientHeight/2+o,t<e.left+n?t=e.left+n:t+this.b.clientWidth>e.left+e.width+n&&(t=e.left+e.width-this.b.clientWidth+n),i<e.top+o?i=e.top+o:i+this.b.clientHeight>e.top+e.height+o&&(i=e.top+e.height-this.b.clientHeight+o),this.b.style.left=t+"px",this.b.style.top=i+"px"},s.prototype.w=function(){this.a.b.addEventListener("mouseenter",this.g,!1),this.a.b.addEventListener("mouseleave",this.h,!1),this.a.b.addEventListener("mousemove",this.c,!1),this.a.A&&(this.a.b.addEventListener("touchstart",this.g,!1),this.a.b.addEventListener("touchend",this.h,!1),this.a.b.addEventListener("touchmove",this.c,!1))},s.prototype.ba=function(){this.a.b.removeEventListener("mouseenter",this.g,!1),this.a.b.removeEventListener("mouseleave",this.h,!1),this.a.b.removeEventListener("mousemove",this.c,!1),this.a.A&&(this.a.b.removeEventListener("touchstart",this.g,!1),this.a.b.removeEventListener("touchend",this.h,!1),this.a.b.removeEventListener("touchmove",this.c,!1))},s.prototype.g=function(t){t.preventDefault(),this.i=t,"mouseenter"==t.type&&this.a.C?this.u=setTimeout(this.m,this.a.C):this.a.F?this.u=setTimeout(this.m,this.a.F):this.m()},s.prototype.m=function(){if(this.enabled){var t=this.a.M;t&&"function"==typeof t&&t(),this.a.l.show(this.a.b.getAttribute(this.a.O),this.a.b.clientWidth,this.a.b.clientHeight),this.i&&((t=this.i.touches)&&this.a.D||!t&&this.a.B)&&this.o.show(this.a.l.b.clientWidth,this.a.l.b.clientHeight),this.c()}},s.prototype.h=function(t){t.preventDefault(),this.i=null,this.u&&clearTimeout(this.u),this.o&&this.o.U(),(t=this.a.L)&&"function"==typeof t&&t(),this.a.l.U()},s.prototype.c=function(t){if(t)t.preventDefault(),this.i=t;else{if(!this.i)return;t=this.i}if(t.touches)var i=(t=t.touches[0]).clientX,e=t.clientY;else i=t.clientX,e=t.clientY;i=(i-(t=this.a.b.getBoundingClientRect()).left)/this.a.b.clientWidth,e=(e-t.top)/this.a.b.clientHeight,this.o&&this.o.setPosition(i,e,t),this.a.l.setPosition(i,e,t)},u.Object.defineProperties(s.prototype,{s:{configurable:!0,enumerable:!0,get:function(){return this.a.l.s}}}),t=document.createElement("div").style;var l="undefined"!=typeof document&&("animation"in t||"webkitAnimation"in t);o.prototype.i=function(t){var i=["drift-"+t],e=this.a.j;return e&&i.push(e+"-"+t),i},o.prototype.ga=function(){this.b=document.createElement("div"),r(this.b,this.i("zoom-pane"));var t=document.createElement("div");r(t,this.i("zoom-pane-loader")),this.b.appendChild(t),this.c=document.createElement("img"),this.b.appendChild(this.c)},o.prototype.V=function(t){this.c.setAttribute("src",t)},o.prototype.Y=function(t,i){this.c.style.width=t*this.a.f+"px",this.c.style.height=i*this.a.f+"px"},o.prototype.setPosition=function(t,i,e){var n=this.c.offsetWidth,o=this.c.offsetHeight,s=this.b.offsetWidth,h=this.b.offsetHeight,a=s/2-n*t,r=h/2-o*i,d=s-n,f=h-o,u=0<d,p=0<f;o=u?d/2:0,n=p?f/2:0,d=u?d/2:d,f=p?f/2:f,this.b.parentElement===this.a.v&&(p=window.pageXOffset,u=window.pageYOffset,t=e.left+t*e.width-s/2+this.a.J+p,i=e.top+i*e.height-h/2+this.a.K+u,this.a.H&&(t<e.left+p?t=e.left+p:t+s>e.left+e.width+p&&(t=e.left+e.width-s+p),i<e.top+u?i=e.top+u:i+h>e.top+e.height+u&&(i=e.top+e.height-h+u)),this.b.style.left=t+"px",this.b.style.top=i+"px"),this.a.N||(a>o?a=o:a<d&&(a=d),r>n?r=n:r<f&&(r=f)),this.c.style.transform="translate("+a+"px, "+r+"px)",this.c.style.webkitTransform="translate("+a+"px, "+r+"px)"},o.prototype.T=function(){this.b.removeEventListener("animationend",this.h,!1),this.b.removeEventListener("animationend",this.g,!1),this.b.removeEventListener("webkitAnimationEnd",this.h,!1),this.b.removeEventListener("webkitAnimationEnd",this.g,!1),d(this.b,this.o),d(this.b,this.u)},o.prototype.show=function(t,i,e){this.T(),this.s=!0,r(this.b,this.o),r(this.b,this.W),this.c.addEventListener("load",this.m,!1),this.V(t),this.Y(i,e),this.ha?this.$():this.Z(),l&&(this.b.addEventListener("animationend",this.h,!1),this.b.addEventListener("webkitAnimationEnd",this.h,!1),r(this.b,this.X))},o.prototype.$=function(){this.a.v.appendChild(this.b),r(this.b,this.w)},o.prototype.Z=function(){this.a.I.appendChild(this.b)},o.prototype.U=function(){this.T(),this.s=!1,l?(this.b.addEventListener("animationend",this.g,!1),this.b.addEventListener("webkitAnimationEnd",this.g,!1),r(this.b,this.u)):(d(this.b,this.o),d(this.b,this.w))},o.prototype.h=function(){this.b.removeEventListener("animationend",this.h,!1),this.b.removeEventListener("webkitAnimationEnd",this.h,!1),d(this.b,this.X)},o.prototype.g=function(){this.b.removeEventListener("animationend",this.g,!1),this.b.removeEventListener("webkitAnimationEnd",this.g,!1),d(this.b,this.o),d(this.b,this.u),d(this.b,this.w),this.b.setAttribute("style",""),this.b.parentElement===this.a.I?this.a.I.removeChild(this.b):this.b.parentElement===this.a.v&&this.a.v.removeChild(this.b)},o.prototype.m=function(){this.c.removeEventListener("load",this.m,!1),d(this.b,this.W)},u.Object.defineProperties(o.prototype,{ha:{configurable:!0,enumerable:!0,get:function(){var t=this.a.S;return!0===t||"number"==typeof t&&window.innerWidth<=t}}}),n.prototype.w=function(){this.l=new o({I:this.a.fa,f:this.a.f,N:this.a.N,H:this.a.H,S:this.a.da,j:this.a.j,J:this.a.J,K:this.a.K,v:this.a.v})},n.prototype.u=function(){this.c=new s({b:this.h,l:this.l,A:this.a.A,M:this.a.M,L:this.a.L,O:this.a.O,C:this.a.C,F:this.a.F,B:this.a.B,D:this.a.D,j:this.a.j,f:this.a.f,G:this.a.G})},n.prototype.T=function(t){this.l.V(t)},n.prototype.i=function(){this.c.enabled=!1},n.prototype.m=function(){this.c.enabled=!0},n.prototype.g=function(){this.c.ba()},u.Object.defineProperties(n.prototype,{s:{configurable:!0,enumerable:!0,get:function(){return this.l.s}},f:{configurable:!0,enumerable:!0,get:function(){return this.a.f},set:function(t){this.a.f=t,this.l.a.f=t,this.c.a.f=t,this.o.a.f=t}}}),Object.defineProperty(n.prototype,"isShowing",{get:function(){return this.s}}),Object.defineProperty(n.prototype,"zoomFactor",{get:function(){return this.f},set:function(t){this.f=t}}),n.prototype.setZoomImageURL=n.prototype.T,n.prototype.disable=n.prototype.i,n.prototype.enable=n.prototype.m,n.prototype.destroy=n.prototype.g,window.Drift=n}]);(function(global,factory){if(typeof define==="function"&&define.amd){define(['exports'],factory);}else if(typeof exports!=="undefined"){factory(exports);}else{var mod={exports:{}};factory(mod.exports);global.PinchZoom=mod.exports;}})(this,function(exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});if(typeof Object.assign!='function'){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){if(target==null){throw new TypeError('Cannot convert undefined or null to object');}
var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}
return to;},writable:true,configurable:true});}
if(typeof Array.from!='function'){Array.from=function(object){return[].slice.call(object);};}
var buildElement=function buildElement(str){var tmp=document.implementation.createHTMLDocument('');tmp.body.innerHTML=str;return Array.from(tmp.body.children)[0];};var triggerEvent=function triggerEvent(el,name){var event=document.createEvent('HTMLEvents');event.initEvent(name,true,false);el.dispatchEvent(event);};var definePinchZoom=function definePinchZoom(){var PinchZoom=function PinchZoom(el,options){this.el=el;this.zoomFactor=1;this.lastScale=1;this.offset={x:0,y:0};this.initialOffset={x:0,y:0};this.options=Object.assign({},this.defaults,options);this.setupMarkup();this.bindEvents();this.update();if(this.isImageLoaded(this.el)){this.updateAspectRatio();this.setupOffsets();}
this.enable();},sum=function sum(a,b){return a+b;},isCloseTo=function isCloseTo(value,expected){return value>expected-0.01&&value<expected+0.01;};PinchZoom.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,maxZoom:4,minZoom:0.5,draggableUnzoomed:true,lockDragAxis:false,setOffsetsOnce:false,use2d:true,zoomStartEventName:'pz_zoomstart',zoomUpdateEventName:'pz_zoomupdate',zoomEndEventName:'pz_zoomend',dragStartEventName:'pz_dragstart',dragUpdateEventName:'pz_dragupdate',dragEndEventName:'pz_dragend',doubleTapEventName:'pz_doubletap',verticalPadding:0,horizontalPadding:0},handleDragStart:function handleDragStart(event){triggerEvent(this.el,this.options.dragStartEventName);this.stopAnimation();this.lastDragPosition=false;this.hasInteraction=true;this.handleDrag(event);},handleDrag:function handleDrag(event){var touch=this.getTouches(event)[0];this.drag(touch,this.lastDragPosition);this.offset=this.sanitizeOffset(this.offset);this.lastDragPosition=touch;},handleDragEnd:function handleDragEnd(){triggerEvent(this.el,this.options.dragEndEventName);this.end();},handleZoomStart:function handleZoomStart(event){triggerEvent(this.el,this.options.zoomStartEventName);this.stopAnimation();this.lastScale=1;this.nthZoom=0;this.lastZoomCenter=false;this.hasInteraction=true;},handleZoom:function handleZoom(event,newScale){var touchCenter=this.getTouchCenter(this.getTouches(event)),scale=newScale/this.lastScale;this.lastScale=newScale;this.nthZoom+=1;if(this.nthZoom>3){this.scale(scale,touchCenter);this.drag(touchCenter,this.lastZoomCenter);}
this.lastZoomCenter=touchCenter;},handleZoomEnd:function handleZoomEnd(){triggerEvent(this.el,this.options.zoomEndEventName);this.end();},handleDoubleTap:function handleDoubleTap(event){var center=this.getTouches(event)[0],zoomFactor=this.zoomFactor>1?1:this.options.tapZoomFactor,startZoomFactor=this.zoomFactor,updateProgress=function(progress){this.scaleTo(startZoomFactor+progress*(zoomFactor-startZoomFactor),center);}.bind(this);if(this.hasInteraction){return;}
this.isDoubleTap=true;if(startZoomFactor>zoomFactor){center=this.getCurrentZoomCenter();}
this.animate(this.options.animationDuration,updateProgress,this.swing);triggerEvent(this.el,this.options.doubleTapEventName);},computeInitialOffset:function computeInitialOffset(){this.initialOffset={x:-Math.abs(this.el.offsetWidth*this.getInitialZoomFactor()-this.container.offsetWidth)/2,y:-Math.abs(this.el.offsetHeight*this.getInitialZoomFactor()-this.container.offsetHeight)/2};},resetOffset:function resetOffset(){this.offset.x=this.initialOffset.x;this.offset.y=this.initialOffset.y;},isImageLoaded:function isImageLoaded(el){if(el.nodeName==='IMG'){return el.complete&&el.naturalHeight!==0;}else{return Array.from(el.querySelectorAll('img')).every(this.isImageLoaded);}},setupOffsets:function setupOffsets(){if(this.options.setOffsetsOnce&&this._isOffsetsSet){return;}
this._isOffsetsSet=true;this.computeInitialOffset();this.resetOffset();},sanitizeOffset:function sanitizeOffset(offset){var elWidth=this.el.offsetWidth*this.getInitialZoomFactor()*this.zoomFactor;var elHeight=this.el.offsetHeight*this.getInitialZoomFactor()*this.zoomFactor;var maxX=elWidth-this.getContainerX()+this.options.horizontalPadding,maxY=elHeight-this.getContainerY()+this.options.verticalPadding,maxOffsetX=Math.max(maxX,0),maxOffsetY=Math.max(maxY,0),minOffsetX=Math.min(maxX,0)-this.options.horizontalPadding,minOffsetY=Math.min(maxY,0)-this.options.verticalPadding;return{x:Math.min(Math.max(offset.x,minOffsetX),maxOffsetX),y:Math.min(Math.max(offset.y,minOffsetY),maxOffsetY)};},scaleTo:function scaleTo(zoomFactor,center){this.scale(zoomFactor/this.zoomFactor,center);},scale:function scale(_scale,center){_scale=this.scaleZoomFactor(_scale);this.addOffset({x:(_scale-1)*(center.x+this.offset.x),y:(_scale-1)*(center.y+this.offset.y)});triggerEvent(this.el,this.options.zoomUpdateEventName);},scaleZoomFactor:function scaleZoomFactor(scale){var originalZoomFactor=this.zoomFactor;this.zoomFactor*=scale;this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom));return this.zoomFactor/originalZoomFactor;},canDrag:function canDrag(){return this.options.draggableUnzoomed||!isCloseTo(this.zoomFactor,1);},drag:function drag(center,lastCenter){if(lastCenter){if(this.options.lockDragAxis){if(Math.abs(center.x-lastCenter.x)>Math.abs(center.y-lastCenter.y)){this.addOffset({x:-(center.x-lastCenter.x),y:0});}else{this.addOffset({y:-(center.y-lastCenter.y),x:0});}}else{this.addOffset({y:-(center.y-lastCenter.y),x:-(center.x-lastCenter.x)});}
triggerEvent(this.el,this.options.dragUpdateEventName);}},getTouchCenter:function getTouchCenter(touches){return this.getVectorAvg(touches);},getVectorAvg:function getVectorAvg(vectors){return{x:vectors.map(function(v){return v.x;}).reduce(sum)/vectors.length,y:vectors.map(function(v){return v.y;}).reduce(sum)/vectors.length};},addOffset:function addOffset(offset){this.offset={x:this.offset.x+offset.x,y:this.offset.y+offset.y};},sanitize:function sanitize(){if(this.zoomFactor<this.options.zoomOutFactor){this.zoomOutAnimation();}else if(this.isInsaneOffset(this.offset)){this.sanitizeOffsetAnimation();}},isInsaneOffset:function isInsaneOffset(offset){var sanitizedOffset=this.sanitizeOffset(offset);return sanitizedOffset.x!==offset.x||sanitizedOffset.y!==offset.y;},sanitizeOffsetAnimation:function sanitizeOffsetAnimation(){var targetOffset=this.sanitizeOffset(this.offset),startOffset={x:this.offset.x,y:this.offset.y},updateProgress=function(progress){this.offset.x=startOffset.x+progress*(targetOffset.x-startOffset.x);this.offset.y=startOffset.y+progress*(targetOffset.y-startOffset.y);this.update();}.bind(this);this.animate(this.options.animationDuration,updateProgress,this.swing);},zoomOutAnimation:function zoomOutAnimation(){if(this.zoomFactor===1){return;}
var startZoomFactor=this.zoomFactor,zoomFactor=1,center=this.getCurrentZoomCenter(),updateProgress=function(progress){this.scaleTo(startZoomFactor+progress*(zoomFactor-startZoomFactor),center);}.bind(this);this.animate(this.options.animationDuration,updateProgress,this.swing);},updateAspectRatio:function updateAspectRatio(){this.unsetContainerY();this.setContainerY(this.container.parentElement.offsetHeight);},getInitialZoomFactor:function getInitialZoomFactor(){var xZoomFactor=this.container.offsetWidth/this.el.offsetWidth;var yZoomFactor=this.container.offsetHeight/this.el.offsetHeight;return Math.min(xZoomFactor,yZoomFactor);},getAspectRatio:function getAspectRatio(){return this.el.offsetWidth/this.el.offsetHeight;},getCurrentZoomCenter:function getCurrentZoomCenter(){var offsetLeft=this.offset.x-this.initialOffset.x;var centerX=-1*this.offset.x-offsetLeft/(1/this.zoomFactor-1);var offsetTop=this.offset.y-this.initialOffset.y;var centerY=-1*this.offset.y-offsetTop/(1/this.zoomFactor-1);return{x:centerX,y:centerY};},getTouches:function getTouches(event){var rect=this.container.getBoundingClientRect();var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;var scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;var posTop=rect.top+scrollTop;var posLeft=rect.left+scrollLeft;return Array.prototype.slice.call(event.touches).map(function(touch){return{x:touch.pageX-posLeft,y:touch.pageY-posTop};});},animate:function animate(duration,framefn,timefn,callback){var startTime=new Date().getTime(),renderFrame=function(){if(!this.inAnimation){return;}
var frameTime=new Date().getTime()-startTime,progress=frameTime/duration;if(frameTime>=duration){framefn(1);if(callback){callback();}
this.update();this.stopAnimation();this.update();}else{if(timefn){progress=timefn(progress);}
framefn(progress);this.update();requestAnimationFrame(renderFrame);}}.bind(this);this.inAnimation=true;requestAnimationFrame(renderFrame);},stopAnimation:function stopAnimation(){this.inAnimation=false;},swing:function swing(p){return-Math.cos(p*Math.PI)/2+0.5;},getContainerX:function getContainerX(){return this.container.offsetWidth;},getContainerY:function getContainerY(){return this.container.offsetHeight;},setContainerY:function setContainerY(y){return this.container.style.height=y+'px';},unsetContainerY:function unsetContainerY(){this.container.style.height=null;},setupMarkup:function setupMarkup(){this.container=buildElement('<div class="pinch-zoom-container"></div>');this.el.parentNode.insertBefore(this.container,this.el);this.container.appendChild(this.el);this.container.style.overflow='hidden';this.container.style.position='relative';this.el.style.webkitTransformOrigin='0% 0%';this.el.style.mozTransformOrigin='0% 0%';this.el.style.msTransformOrigin='0% 0%';this.el.style.oTransformOrigin='0% 0%';this.el.style.transformOrigin='0% 0%';this.el.style.position='absolute';},end:function end(){this.hasInteraction=false;this.sanitize();this.update();},bindEvents:function bindEvents(){var self=this;detectGestures(this.container,this);window.addEventListener('resize',this.update.bind(this));Array.from(this.el.querySelectorAll('img')).forEach(function(imgEl){imgEl.addEventListener('load',self.update.bind(self));});if(this.el.nodeName==='IMG'){this.el.addEventListener('load',this.update.bind(this));}},update:function update(event){if(this.updatePlaned){return;}
this.updatePlaned=true;window.setTimeout(function(){this.updatePlaned=false;if(event&&event.type==='resize'){this.updateAspectRatio();this.setupOffsets();}
if(event&&event.type==='load'){this.updateAspectRatio();this.setupOffsets();}
var zoomFactor=this.getInitialZoomFactor()*this.zoomFactor,offsetX=-this.offset.x/zoomFactor,offsetY=-this.offset.y/zoomFactor,transform3d='scale3d('+zoomFactor+', '+zoomFactor+',1) '+'translate3d('+offsetX+'px,'+offsetY+'px,0px)',transform2d='scale('+zoomFactor+', '+zoomFactor+') '+'translate('+offsetX+'px,'+offsetY+'px)',removeClone=function(){if(this.clone){this.clone.parentNode.removeChild(this.clone);delete this.clone;}}.bind(this);if(!this.options.use2d||this.hasInteraction||this.inAnimation){this.is3d=true;removeClone();this.el.style.webkitTransform=transform3d;this.el.style.mozTransform=transform2d;this.el.style.msTransform=transform2d;this.el.style.oTransform=transform2d;this.el.style.transform=transform3d;}else{if(this.is3d){this.clone=this.el.cloneNode(true);this.clone.style.pointerEvents='none';this.container.appendChild(this.clone);window.setTimeout(removeClone,200);}
this.el.style.webkitTransform=transform2d;this.el.style.mozTransform=transform2d;this.el.style.msTransform=transform2d;this.el.style.oTransform=transform2d;this.el.style.transform=transform2d;this.is3d=false;}}.bind(this),0);},enable:function enable(){this.enabled=true;},disable:function disable(){this.enabled=false;}};var detectGestures=function detectGestures(el,target){var interaction=null,fingers=0,lastTouchStart=null,startTouches=null,setInteraction=function setInteraction(newInteraction,event){if(interaction!==newInteraction){if(interaction&&!newInteraction){switch(interaction){case"zoom":target.handleZoomEnd(event);break;case'drag':target.handleDragEnd(event);break;}}
switch(newInteraction){case'zoom':target.handleZoomStart(event);break;case'drag':target.handleDragStart(event);break;}}
interaction=newInteraction;},updateInteraction=function updateInteraction(event){if(fingers===2){setInteraction('zoom');}else if(fingers===1&&target.canDrag()){setInteraction('drag',event);}else{setInteraction(null,event);}},targetTouches=function targetTouches(touches){return Array.from(touches).map(function(touch){return{x:touch.pageX,y:touch.pageY};});},getDistance=function getDistance(a,b){var x,y;x=a.x-b.x;y=a.y-b.y;return Math.sqrt(x*x+y*y);},calculateScale=function calculateScale(startTouches,endTouches){var startDistance=getDistance(startTouches[0],startTouches[1]),endDistance=getDistance(endTouches[0],endTouches[1]);return endDistance/startDistance;},cancelEvent=function cancelEvent(event){event.stopPropagation();event.preventDefault();},detectDoubleTap=function detectDoubleTap(event){var time=new Date().getTime();if(fingers>1){lastTouchStart=null;}
if(time-lastTouchStart<300){cancelEvent(event);target.handleDoubleTap(event);switch(interaction){case"zoom":target.handleZoomEnd(event);break;case'drag':target.handleDragEnd(event);break;}}else{target.isDoubleTap=false;}
if(fingers===1){lastTouchStart=time;}},firstMove=true;el.addEventListener('touchstart',function(event){if(target.enabled){firstMove=true;fingers=event.touches.length;detectDoubleTap(event);}});el.addEventListener('touchmove',function(event){if(target.enabled&&!target.isDoubleTap){if(firstMove){updateInteraction(event);if(interaction){cancelEvent(event);}
startTouches=targetTouches(event.touches);}else{switch(interaction){case'zoom':target.handleZoom(event,calculateScale(startTouches,targetTouches(event.touches)));break;case'drag':target.handleDrag(event);break;}
if(interaction){cancelEvent(event);target.update();}}
firstMove=false;}});el.addEventListener('touchend',function(event){if(target.enabled){fingers=event.touches.length;updateInteraction(event);}});};return PinchZoom;};var PinchZoom=definePinchZoom();exports.default=PinchZoom;});(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')
module.exports=factory();else if(typeof define==='function'&&define.amd)
define([],factory);else if(typeof exports==='object')
exports["Cleave"]=factory();else
root["Cleave"]=factory();})(this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])
return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})
([(function(module,exports,__webpack_require__){(function(global){'use strict';var Cleave=function(element,opts){var owner=this;var hasMultipleElements=false;if(typeof element==='string'){owner.element=document.querySelector(element);hasMultipleElements=document.querySelectorAll(element).length>1;}else{if(typeof element.length!=='undefined'&&element.length>0){owner.element=element[0];hasMultipleElements=element.length>1;}else{owner.element=element;}}
if(!owner.element){throw new Error('[cleave.js] Please check the element');}
if(hasMultipleElements){try{console.warn('[cleave.js] Multiple input fields matched, cleave.js will only take the first one.');}catch(e){}}
opts.initValue=owner.element.value;owner.properties=Cleave.DefaultProperties.assign({},opts);owner.init();};Cleave.prototype={init:function(){var owner=this,pps=owner.properties;if(!pps.numeral&&!pps.phone&&!pps.creditCard&&!pps.time&&!pps.date&&(pps.blocksLength===0&&!pps.prefix)){owner.onInput(pps.initValue);return;}
pps.maxLength=Cleave.Util.getMaxLength(pps.blocks);owner.isAndroid=Cleave.Util.isAndroid();owner.lastInputValue='';owner.onChangeListener=owner.onChange.bind(owner);owner.onKeyDownListener=owner.onKeyDown.bind(owner);owner.onFocusListener=owner.onFocus.bind(owner);owner.onCutListener=owner.onCut.bind(owner);owner.onCopyListener=owner.onCopy.bind(owner);owner.element.addEventListener('input',owner.onChangeListener);owner.element.addEventListener('keydown',owner.onKeyDownListener);owner.element.addEventListener('focus',owner.onFocusListener);owner.element.addEventListener('cut',owner.onCutListener);owner.element.addEventListener('copy',owner.onCopyListener);owner.initPhoneFormatter();owner.initDateFormatter();owner.initTimeFormatter();owner.initNumeralFormatter();if(pps.initValue||(pps.prefix&&!pps.noImmediatePrefix)){owner.onInput(pps.initValue);}},initNumeralFormatter:function(){var owner=this,pps=owner.properties;if(!pps.numeral){return;}
pps.numeralFormatter=new Cleave.NumeralFormatter(pps.numeralDecimalMark,pps.numeralIntegerScale,pps.numeralDecimalScale,pps.numeralThousandsGroupStyle,pps.numeralPositiveOnly,pps.stripLeadingZeroes,pps.delimiter);},initTimeFormatter:function(){var owner=this,pps=owner.properties;if(!pps.time){return;}
pps.timeFormatter=new Cleave.TimeFormatter(pps.timePattern,pps.timeFormat);pps.blocks=pps.timeFormatter.getBlocks();pps.blocksLength=pps.blocks.length;pps.maxLength=Cleave.Util.getMaxLength(pps.blocks);},initDateFormatter:function(){var owner=this,pps=owner.properties;if(!pps.date){return;}
pps.dateFormatter=new Cleave.DateFormatter(pps.datePattern);pps.blocks=pps.dateFormatter.getBlocks();pps.blocksLength=pps.blocks.length;pps.maxLength=Cleave.Util.getMaxLength(pps.blocks);},initPhoneFormatter:function(){var owner=this,pps=owner.properties;if(!pps.phone){return;}
try{pps.phoneFormatter=new Cleave.PhoneFormatter(new pps.root.Cleave.AsYouTypeFormatter(pps.phoneRegionCode),pps.delimiter);}catch(ex){throw new Error('[cleave.js] Please include phone-type-formatter.{country}.js lib');}},onKeyDown:function(event){var owner=this,pps=owner.properties,charCode=event.which||event.keyCode,Util=Cleave.Util,currentValue=owner.element.value;owner.hasBackspaceSupport=owner.hasBackspaceSupport||charCode===8;if(!owner.hasBackspaceSupport&&Util.isAndroidBackspaceKeydown(owner.lastInputValue,currentValue)){charCode=8;}
owner.lastInputValue=currentValue;var postDelimiter=Util.getPostDelimiter(currentValue,pps.delimiter,pps.delimiters);if(charCode===8&&postDelimiter){pps.postDelimiterBackspace=postDelimiter;}else{pps.postDelimiterBackspace=false;}},onChange:function(){this.onInput(this.element.value);},onFocus:function(){var owner=this,pps=owner.properties;Cleave.Util.fixPrefixCursor(owner.element,pps.prefix,pps.delimiter,pps.delimiters);},onCut:function(e){this.copyClipboardData(e);this.onInput('');},onCopy:function(e){this.copyClipboardData(e);},copyClipboardData:function(e){var owner=this,pps=owner.properties,Util=Cleave.Util,inputValue=owner.element.value,textToCopy='';if(!pps.copyDelimiter){textToCopy=Util.stripDelimiters(inputValue,pps.delimiter,pps.delimiters);}else{textToCopy=inputValue;}
try{if(e.clipboardData){e.clipboardData.setData('Text',textToCopy);}else{window.clipboardData.setData('Text',textToCopy);}
e.preventDefault();}catch(ex){}},onInput:function(value){var owner=this,pps=owner.properties,Util=Cleave.Util;var postDelimiterAfter=Util.getPostDelimiter(value,pps.delimiter,pps.delimiters);if(!pps.numeral&&pps.postDelimiterBackspace&&!postDelimiterAfter){value=Util.headStr(value,value.length-pps.postDelimiterBackspace.length);}
if(pps.phone){if(pps.prefix&&(!pps.noImmediatePrefix||value.length)){pps.result=pps.prefix+pps.phoneFormatter.format(value).slice(pps.prefix.length);}else{pps.result=pps.phoneFormatter.format(value);}
owner.updateValueState();return;}
if(pps.numeral){if(pps.prefix&&(!pps.noImmediatePrefix||value.length)){pps.result=pps.prefix+pps.numeralFormatter.format(value);}else{pps.result=pps.numeralFormatter.format(value);}
owner.updateValueState();return;}
if(pps.date){value=pps.dateFormatter.getValidatedDate(value);}
if(pps.time){value=pps.timeFormatter.getValidatedTime(value);}
value=Util.stripDelimiters(value,pps.delimiter,pps.delimiters);value=Util.getPrefixStrippedValue(value,pps.prefix,pps.prefixLength,pps.result,pps.delimiter,pps.delimiters);value=pps.numericOnly?Util.strip(value,/[^\d]/g):value;value=pps.uppercase?value.toUpperCase():value;value=pps.lowercase?value.toLowerCase():value;if(pps.prefix&&(!pps.noImmediatePrefix||value.length)){value=pps.prefix+value;if(pps.blocksLength===0){pps.result=value;owner.updateValueState();return;}}
if(pps.creditCard){owner.updateCreditCardPropsByValue(value);}
value=Util.headStr(value,pps.maxLength);pps.result=Util.getFormattedValue(value,pps.blocks,pps.blocksLength,pps.delimiter,pps.delimiters,pps.delimiterLazyShow);owner.updateValueState();},updateCreditCardPropsByValue:function(value){var owner=this,pps=owner.properties,Util=Cleave.Util,creditCardInfo;if(Util.headStr(pps.result,4)===Util.headStr(value,4)){return;}
creditCardInfo=Cleave.CreditCardDetector.getInfo(value,pps.creditCardStrictMode);pps.blocks=creditCardInfo.blocks;pps.blocksLength=pps.blocks.length;pps.maxLength=Util.getMaxLength(pps.blocks);if(pps.creditCardType!==creditCardInfo.type){pps.creditCardType=creditCardInfo.type;pps.onCreditCardTypeChanged.call(owner,pps.creditCardType);}},updateValueState:function(){var owner=this,Util=Cleave.Util,pps=owner.properties;if(!owner.element){return;}
var endPos=owner.element.selectionEnd;var oldValue=owner.element.value;var newValue=pps.result;endPos=Util.getNextCursorPosition(endPos,oldValue,newValue,pps.delimiter,pps.delimiters);if(owner.isAndroid){window.setTimeout(function(){owner.element.value=newValue;Util.setSelection(owner.element,endPos,pps.document,false);owner.callOnValueChanged();},1);return;}
owner.element.value=newValue;Util.setSelection(owner.element,endPos,pps.document,false);owner.callOnValueChanged();},callOnValueChanged:function(){var owner=this,pps=owner.properties;pps.onValueChanged.call(owner,{target:{value:pps.result,rawValue:owner.getRawValue()}});},setPhoneRegionCode:function(phoneRegionCode){var owner=this,pps=owner.properties;pps.phoneRegionCode=phoneRegionCode;owner.initPhoneFormatter();owner.onChange();},setRawValue:function(value){var owner=this,pps=owner.properties;value=value!==undefined&&value!==null?value.toString():'';if(pps.numeral){value=value.replace('.',pps.numeralDecimalMark);}
pps.postDelimiterBackspace=false;owner.element.value=value;owner.onInput(value);},getRawValue:function(){var owner=this,pps=owner.properties,Util=Cleave.Util,rawValue=owner.element.value;if(pps.rawValueTrimPrefix){rawValue=Util.getPrefixStrippedValue(rawValue,pps.prefix,pps.prefixLength,pps.result,pps.delimiter,pps.delimiters);}
if(pps.numeral){rawValue=pps.numeralFormatter.getRawValue(rawValue);}else{rawValue=Util.stripDelimiters(rawValue,pps.delimiter,pps.delimiters);}
return rawValue;},getISOFormatDate:function(){var owner=this,pps=owner.properties;return pps.date?pps.dateFormatter.getISOFormatDate():'';},getISOFormatTime:function(){var owner=this,pps=owner.properties;return pps.time?pps.timeFormatter.getISOFormatTime():'';},getFormattedValue:function(){return this.element.value;},destroy:function(){var owner=this;owner.element.removeEventListener('input',owner.onChangeListener);owner.element.removeEventListener('keydown',owner.onKeyDownListener);owner.element.removeEventListener('focus',owner.onFocusListener);owner.element.removeEventListener('cut',owner.onCutListener);owner.element.removeEventListener('copy',owner.onCopyListener);},toString:function(){return'[Cleave Object]';}};Cleave.NumeralFormatter=__webpack_require__(1);Cleave.DateFormatter=__webpack_require__(2);Cleave.TimeFormatter=__webpack_require__(3);Cleave.PhoneFormatter=__webpack_require__(4);Cleave.CreditCardDetector=__webpack_require__(5);Cleave.Util=__webpack_require__(6);Cleave.DefaultProperties=__webpack_require__(7);((typeof global==='object'&&global)?global:window)['Cleave']=Cleave;module.exports=Cleave;}.call(exports,(function(){return this;}())))}),(function(module,exports){'use strict';var NumeralFormatter=function(numeralDecimalMark,numeralIntegerScale,numeralDecimalScale,numeralThousandsGroupStyle,numeralPositiveOnly,stripLeadingZeroes,delimiter){var owner=this;owner.numeralDecimalMark=numeralDecimalMark||'.';owner.numeralIntegerScale=numeralIntegerScale>0?numeralIntegerScale:0;owner.numeralDecimalScale=numeralDecimalScale>=0?numeralDecimalScale:2;owner.numeralThousandsGroupStyle=numeralThousandsGroupStyle||NumeralFormatter.groupStyle.thousand;owner.numeralPositiveOnly=!!numeralPositiveOnly;owner.stripLeadingZeroes=stripLeadingZeroes!==false;owner.delimiter=(delimiter||delimiter==='')?delimiter:',';owner.delimiterRE=delimiter?new RegExp('\\'+delimiter,'g'):'';};NumeralFormatter.groupStyle={thousand:'thousand',lakh:'lakh',wan:'wan',none:'none'};NumeralFormatter.prototype={getRawValue:function(value){return value.replace(this.delimiterRE,'').replace(this.numeralDecimalMark,'.');},format:function(value){var owner=this,parts,partInteger,partDecimal='';value=value.replace(/[A-Za-z]/g,'').replace(owner.numeralDecimalMark,'M').replace(/[^\dM-]/g,'').replace(/^\-/,'N').replace(/\-/g,'').replace('N',owner.numeralPositiveOnly?'':'-').replace('M',owner.numeralDecimalMark);if(owner.stripLeadingZeroes){value=value.replace(/^(-)?0+(?=\d)/,'$1');}
partInteger=value;if(value.indexOf(owner.numeralDecimalMark)>=0){parts=value.split(owner.numeralDecimalMark);partInteger=parts[0];partDecimal=owner.numeralDecimalMark+parts[1].slice(0,owner.numeralDecimalScale);}
if(owner.numeralIntegerScale>0){partInteger=partInteger.slice(0,owner.numeralIntegerScale+(value.slice(0,1)==='-'?1:0));}
switch(owner.numeralThousandsGroupStyle){case NumeralFormatter.groupStyle.lakh:partInteger=partInteger.replace(/(\d)(?=(\d\d)+\d$)/g,'$1'+owner.delimiter);break;case NumeralFormatter.groupStyle.wan:partInteger=partInteger.replace(/(\d)(?=(\d{4})+$)/g,'$1'+owner.delimiter);break;case NumeralFormatter.groupStyle.thousand:partInteger=partInteger.replace(/(\d)(?=(\d{3})+$)/g,'$1'+owner.delimiter);break;}
return partInteger.toString()+(owner.numeralDecimalScale>0?partDecimal.toString():'');}};module.exports=NumeralFormatter;}),(function(module,exports){'use strict';var DateFormatter=function(datePattern){var owner=this;owner.date=[];owner.blocks=[];owner.datePattern=datePattern;owner.initBlocks();};DateFormatter.prototype={initBlocks:function(){var owner=this;owner.datePattern.forEach(function(value){if(value==='Y'){owner.blocks.push(4);}else{owner.blocks.push(2);}});},getISOFormatDate:function(){var owner=this,date=owner.date;return date[2]?(date[2]+'-'+owner.addLeadingZero(date[1])+'-'+owner.addLeadingZero(date[0])):'';},getBlocks:function(){return this.blocks;},getValidatedDate:function(value){var owner=this,result='';value=value.replace(/[^\d]/g,'');owner.blocks.forEach(function(length,index){if(value.length>0){var sub=value.slice(0,length),sub0=sub.slice(0,1),rest=value.slice(length);switch(owner.datePattern[index]){case'd':if(sub==='00'){sub='01';}else if(parseInt(sub0,10)>3){sub='0'+sub0;}else if(parseInt(sub,10)>31){sub='31';}
break;case'm':if(sub==='00'){sub='01';}else if(parseInt(sub0,10)>1){sub='0'+sub0;}else if(parseInt(sub,10)>12){sub='12';}
break;}
result+=sub;value=rest;}});return this.getFixedDateString(result);},getFixedDateString:function(value){var owner=this,datePattern=owner.datePattern,date=[],dayIndex=0,monthIndex=0,yearIndex=0,dayStartIndex=0,monthStartIndex=0,yearStartIndex=0,day,month,year,fullYearDone=false;if(value.length===4&&datePattern[0].toLowerCase()!=='y'&&datePattern[1].toLowerCase()!=='y'){dayStartIndex=datePattern[0]==='d'?0:2;monthStartIndex=2-dayStartIndex;day=parseInt(value.slice(dayStartIndex,dayStartIndex+2),10);month=parseInt(value.slice(monthStartIndex,monthStartIndex+2),10);date=this.getFixedDate(day,month,0);}
if(value.length===8){datePattern.forEach(function(type,index){switch(type){case'd':dayIndex=index;break;case'm':monthIndex=index;break;default:yearIndex=index;break;}});yearStartIndex=yearIndex*2;dayStartIndex=(dayIndex<=yearIndex)?dayIndex*2:(dayIndex*2+2);monthStartIndex=(monthIndex<=yearIndex)?monthIndex*2:(monthIndex*2+2);day=parseInt(value.slice(dayStartIndex,dayStartIndex+2),10);month=parseInt(value.slice(monthStartIndex,monthStartIndex+2),10);year=parseInt(value.slice(yearStartIndex,yearStartIndex+4),10);fullYearDone=value.slice(yearStartIndex,yearStartIndex+4).length===4;date=this.getFixedDate(day,month,year);}
owner.date=date;return date.length===0?value:datePattern.reduce(function(previous,current){switch(current){case'd':return previous+owner.addLeadingZero(date[0]);case'm':return previous+owner.addLeadingZero(date[1]);default:return previous+(fullYearDone?owner.addLeadingZeroForYear(date[2]):'');}},'');},getFixedDate:function(day,month,year){day=Math.min(day,31);month=Math.min(month,12);year=parseInt((year||0),10);if((month<7&&month%2===0)||(month>8&&month%2===1)){day=Math.min(day,month===2?(this.isLeapYear(year)?29:28):30);}
return[day,month,year];},isLeapYear:function(year){return((year%4===0)&&(year%100!==0))||(year%400===0);},addLeadingZero:function(number){return(number<10?'0':'')+number;},addLeadingZeroForYear:function(number){return(number<10?'000':(number<100?'00':(number<1000?'0':'')))+number;}};module.exports=DateFormatter;}),(function(module,exports){'use strict';var TimeFormatter=function(timePattern,timeFormat){var owner=this;owner.time=[];owner.blocks=[];owner.timePattern=timePattern;owner.timeFormat=timeFormat;owner.initBlocks();};TimeFormatter.prototype={initBlocks:function(){var owner=this;owner.timePattern.forEach(function(){owner.blocks.push(2);});},getISOFormatTime:function(){var owner=this,time=owner.time;return time[2]?(owner.addLeadingZero(time[0])+':'+owner.addLeadingZero(time[1])+':'+owner.addLeadingZero(time[2])):'';},getBlocks:function(){return this.blocks;},getTimeFormatOptions:function(){var owner=this;if(String(owner.timeFormat)==='12'){return{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60};}
return{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60};},getValidatedTime:function(value){var owner=this,result='';value=value.replace(/[^\d]/g,'');var timeFormatOptions=owner.getTimeFormatOptions();owner.blocks.forEach(function(length,index){if(value.length>0){var sub=value.slice(0,length),sub0=sub.slice(0,1),rest=value.slice(length);switch(owner.timePattern[index]){case'h':if(parseInt(sub0,10)>timeFormatOptions.maxHourFirstDigit){sub='0'+sub0;}else if(parseInt(sub,10)>timeFormatOptions.maxHours){sub=timeFormatOptions.maxHours+'';}
break;case'm':case's':if(parseInt(sub0,10)>timeFormatOptions.maxMinutesFirstDigit){sub='0'+sub0;}else if(parseInt(sub,10)>timeFormatOptions.maxMinutes){sub=timeFormatOptions.maxMinutes+'';}
break;}
result+=sub;value=rest;}});return this.getFixedTimeString(result);},getFixedTimeString:function(value){var owner=this,timePattern=owner.timePattern,time=[],secondIndex=0,minuteIndex=0,hourIndex=0,secondStartIndex=0,minuteStartIndex=0,hourStartIndex=0,second,minute,hour;if(value.length===6){timePattern.forEach(function(type,index){switch(type){case's':secondIndex=index*2;break;case'm':minuteIndex=index*2;break;case'h':hourIndex=index*2;break;}});hourStartIndex=hourIndex;minuteStartIndex=minuteIndex;secondStartIndex=secondIndex;second=parseInt(value.slice(secondStartIndex,secondStartIndex+2),10);minute=parseInt(value.slice(minuteStartIndex,minuteStartIndex+2),10);hour=parseInt(value.slice(hourStartIndex,hourStartIndex+2),10);time=this.getFixedTime(hour,minute,second);}
if(value.length===4&&owner.timePattern.indexOf('s')<0){timePattern.forEach(function(type,index){switch(type){case'm':minuteIndex=index*2;break;case'h':hourIndex=index*2;break;}});hourStartIndex=hourIndex;minuteStartIndex=minuteIndex;second=0;minute=parseInt(value.slice(minuteStartIndex,minuteStartIndex+2),10);hour=parseInt(value.slice(hourStartIndex,hourStartIndex+2),10);time=this.getFixedTime(hour,minute,second);}
owner.time=time;return time.length===0?value:timePattern.reduce(function(previous,current){switch(current){case's':return previous+owner.addLeadingZero(time[2]);case'm':return previous+owner.addLeadingZero(time[1]);case'h':return previous+owner.addLeadingZero(time[0]);}},'');},getFixedTime:function(hour,minute,second){second=Math.min(parseInt(second||0,10),60);minute=Math.min(minute,60);hour=Math.min(hour,60);return[hour,minute,second];},addLeadingZero:function(number){return(number<10?'0':'')+number;}};module.exports=TimeFormatter;}),(function(module,exports){'use strict';var PhoneFormatter=function(formatter,delimiter){var owner=this;owner.delimiter=(delimiter||delimiter==='')?delimiter:' ';owner.delimiterRE=delimiter?new RegExp('\\'+delimiter,'g'):'';owner.formatter=formatter;};PhoneFormatter.prototype={setFormatter:function(formatter){this.formatter=formatter;},format:function(phoneNumber){var owner=this;owner.formatter.clear();phoneNumber=phoneNumber.replace(/[^\d+]/g,'');phoneNumber=phoneNumber.replace(/^\+/,'B').replace(/\+/g,'').replace('B','+');phoneNumber=phoneNumber.replace(owner.delimiterRE,'');var result='',current,validated=false;for(var i=0,iMax=phoneNumber.length;i<iMax;i++){current=owner.formatter.inputDigit(phoneNumber.charAt(i));if(/[\s()-]/g.test(current)){result=current;validated=true;}else{if(!validated){result=current;}}}
result=result.replace(/[()]/g,'');result=result.replace(/[\s-]/g,owner.delimiter);return result;}};module.exports=PhoneFormatter;}),(function(module,exports){'use strict';var CreditCardDetector={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4],generalStrict:[4,4,4,7]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^62\d{0,14}/},getInfo:function(value,strictMode){var blocks=CreditCardDetector.blocks,re=CreditCardDetector.re;strictMode=!!strictMode;for(var key in re){if(re[key].test(value)){var block;if(strictMode){block=blocks.generalStrict;}else{block=blocks[key];}
return{type:key,blocks:block};}}
return{type:'unknown',blocks:strictMode?blocks.generalStrict:blocks.general};}};module.exports=CreditCardDetector;}),(function(module,exports){'use strict';var Util={noop:function(){},strip:function(value,re){return value.replace(re,'');},getPostDelimiter:function(value,delimiter,delimiters){if(delimiters.length===0){return value.slice(-delimiter.length)===delimiter?delimiter:'';}
var matchedDelimiter='';delimiters.forEach(function(current){if(value.slice(-current.length)===current){matchedDelimiter=current;}});return matchedDelimiter;},getDelimiterREByDelimiter:function(delimiter){return new RegExp(delimiter.replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1'),'g');},getNextCursorPosition:function(prevPos,oldValue,newValue,delimiter,delimiters){if(oldValue.length===prevPos){return newValue.length;}
return prevPos+this.getPositionOffset(prevPos,oldValue,newValue,delimiter,delimiters);},getPositionOffset:function(prevPos,oldValue,newValue,delimiter,delimiters){var oldRawValue,newRawValue,lengthOffset;oldRawValue=this.stripDelimiters(oldValue.slice(0,prevPos),delimiter,delimiters);newRawValue=this.stripDelimiters(newValue.slice(0,prevPos),delimiter,delimiters);lengthOffset=oldRawValue.length-newRawValue.length;return(lengthOffset!==0)?(lengthOffset/Math.abs(lengthOffset)):0;},stripDelimiters:function(value,delimiter,delimiters){var owner=this;if(delimiters.length===0){var delimiterRE=delimiter?owner.getDelimiterREByDelimiter(delimiter):'';return value.replace(delimiterRE,'');}
delimiters.forEach(function(current){current.split('').forEach(function(letter){value=value.replace(owner.getDelimiterREByDelimiter(letter),'');});});return value;},headStr:function(str,length){return str.slice(0,length);},getMaxLength:function(blocks){return blocks.reduce(function(previous,current){return previous+current;},0);},getPrefixStrippedValue:function(value,prefix,prefixLength,prevResult,delimiter,delimiters){if(prefixLength===0){return value;}
if(prevResult.slice(0,prefixLength)!==prefix){return'';}
var prevValue=this.stripDelimiters(prevResult,delimiter,delimiters);if(value.slice(0,prefixLength)!==prefix){return prevValue.slice(prefixLength);}
return value.slice(prefixLength);},getFirstDiffIndex:function(prev,current){var index=0;while(prev.charAt(index)===current.charAt(index)){if(prev.charAt(index++)===''){return-1;}}
return index;},getFormattedValue:function(value,blocks,blocksLength,delimiter,delimiters,delimiterLazyShow){var result='',multipleDelimiters=delimiters.length>0,currentDelimiter;if(blocksLength===0){return value;}
blocks.forEach(function(length,index){if(value.length>0){var sub=value.slice(0,length),rest=value.slice(length);if(multipleDelimiters){currentDelimiter=delimiters[delimiterLazyShow?(index-1):index]||currentDelimiter;}else{currentDelimiter=delimiter;}
if(delimiterLazyShow){if(index>0){result+=currentDelimiter;}
result+=sub;}else{result+=sub;if(sub.length===length&&index<blocksLength-1){result+=currentDelimiter;}}
value=rest;}});return result;},fixPrefixCursor:function(el,prefix,delimiter,delimiters){if(!el){return;}
var val=el.value,appendix=delimiter||(delimiters[0]||' ');if(!el.setSelectionRange||!prefix||(prefix.length+appendix.length)<val.length){return;}
var len=val.length*2;setTimeout(function(){el.setSelectionRange(len,len);},1);},setSelection:function(element,position,doc){if(element!==this.getActiveElement(doc)){return;}
if(element&&element.value.length<=position){return;}
if(element.createTextRange){var range=element.createTextRange();range.move('character',position);range.select();}else{try{element.setSelectionRange(position,position);}catch(e){console.warn('The input element type does not support selection');}}},getActiveElement:function(parent){var activeElement=parent.activeElement;if(activeElement&&activeElement.shadowRoot){return this.getActiveElement(activeElement.shadowRoot);}
return activeElement;},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent);},isAndroidBackspaceKeydown:function(lastInputValue,currentInputValue){if(!this.isAndroid()||!lastInputValue||!currentInputValue){return false;}
return currentInputValue===lastInputValue.slice(0,-1);}};module.exports=Util;}),(function(module,exports){(function(global){'use strict';var DefaultProperties={assign:function(target,opts){target=target||{};opts=opts||{};target.creditCard=!!opts.creditCard;target.creditCardStrictMode=!!opts.creditCardStrictMode;target.creditCardType='';target.onCreditCardTypeChanged=opts.onCreditCardTypeChanged||(function(){});target.phone=!!opts.phone;target.phoneRegionCode=opts.phoneRegionCode||'AU';target.phoneFormatter={};target.time=!!opts.time;target.timePattern=opts.timePattern||['h','m','s'];target.timeFormat=opts.timeFormat||'24';target.timeFormatter={};target.date=!!opts.date;target.datePattern=opts.datePattern||['d','m','Y'];target.dateFormatter={};target.numeral=!!opts.numeral;target.numeralIntegerScale=opts.numeralIntegerScale>0?opts.numeralIntegerScale:0;target.numeralDecimalScale=opts.numeralDecimalScale>=0?opts.numeralDecimalScale:2;target.numeralDecimalMark=opts.numeralDecimalMark||'.';target.numeralThousandsGroupStyle=opts.numeralThousandsGroupStyle||'thousand';target.numeralPositiveOnly=!!opts.numeralPositiveOnly;target.stripLeadingZeroes=opts.stripLeadingZeroes!==false;target.numericOnly=target.creditCard||target.date||!!opts.numericOnly;target.uppercase=!!opts.uppercase;target.lowercase=!!opts.lowercase;target.prefix=(target.creditCard||target.date)?'':(opts.prefix||'');target.noImmediatePrefix=!!opts.noImmediatePrefix;target.prefixLength=target.prefix.length;target.rawValueTrimPrefix=!!opts.rawValueTrimPrefix;target.copyDelimiter=!!opts.copyDelimiter;target.initValue=(opts.initValue!==undefined&&opts.initValue!==null)?opts.initValue.toString():'';target.delimiter=(opts.delimiter||opts.delimiter==='')?opts.delimiter:(opts.date?'/':(opts.time?':':(opts.numeral?',':(opts.phone?' ':' '))));target.delimiterLength=target.delimiter.length;target.delimiterLazyShow=!!opts.delimiterLazyShow;target.delimiters=opts.delimiters||[];target.blocks=opts.blocks||[];target.blocksLength=target.blocks.length;target.root=(typeof global==='object'&&global)?global:window;target.document=opts.document||target.root.document;target.maxLength=0;target.backspace=false;target.result='';target.onValueChanged=opts.onValueChanged||(function(){});return target;}};module.exports=DefaultProperties;}.call(exports,(function(){return this;}())))})])});;!function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],a);else if("object"==typeof exports)module.exports=a(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";a(jQuery,moment)}}(function(a,b){"use strict";if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c=function(c,d){var e,f,g,h,i,j,k,l={},m=!0,n=!1,o=!1,p=0,q=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],r=["days","months","years","decades"],s=["top","bottom","auto"],t=["left","right","auto"],u=["default","top","bottom"],v={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},w={},x=function(){return void 0!==b.tz&&void 0!==d.timeZone&&null!==d.timeZone&&""!==d.timeZone},y=function(a){var c;return c=void 0===a||null===a?b():b.isDate(a)||b.isMoment(a)?b(a):x()?b.tz(a,j,d.useStrict,d.timeZone):b(a,j,d.useStrict),x()&&c.tz(d.timeZone),c},z=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return i.indexOf("Y")!==-1;case"M":return i.indexOf("M")!==-1;case"d":return i.toLowerCase().indexOf("d")!==-1;case"h":case"H":return i.toLowerCase().indexOf("h")!==-1;case"m":return i.indexOf("m")!==-1;case"s":return i.indexOf("s")!==-1;default:return!1}},A=function(){return z("h")||z("m")||z("s")},B=function(){return z("y")||z("M")||z("d")},C=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",d.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(d.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",d.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},D=function(){var b=a("<tr>"),c=a("<tr>"),e=a("<tr>");return z("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:d.tooltips.pickHour}).attr("data-action","showHours"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(d.icons.down))))),z("m")&&(z("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:d.tooltips.pickMinute}).attr("data-action","showMinutes"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(d.icons.down))))),z("s")&&(z("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:d.tooltips.pickSecond}).attr("data-action","showSeconds"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(d.icons.down))))),h||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:d.tooltips.togglePeriod}))),e.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,e]))},E=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[D()];return z("h")&&e.push(b),z("m")&&e.push(c),z("s")&&e.push(d),e},F=function(){var b=[];return d.showTodayButton&&b.push(a("<td>").append(a("<a>").attr({"data-action":"today",title:d.tooltips.today}).append(a("<span>").addClass(d.icons.today)))),!d.sideBySide&&B()&&A()&&b.push(a("<td>").append(a("<a>").attr({"data-action":"togglePicker",title:d.tooltips.selectTime}).append(a("<span>").addClass(d.icons.time)))),d.showClear&&b.push(a("<td>").append(a("<a>").attr({"data-action":"clear",title:d.tooltips.clear}).append(a("<span>").addClass(d.icons.clear)))),d.showClose&&b.push(a("<td>").append(a("<a>").attr({"data-action":"close",title:d.tooltips.close}).append(a("<span>").addClass(d.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},G=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(C()),e=a("<div>").addClass("timepicker").append(E()),f=a("<ul>").addClass("list-unstyled"),g=a("<li>").addClass("picker-switch"+(d.collapse?" accordion-toggle":"")).append(F());return d.inline&&b.removeClass("dropdown-menu"),h&&b.addClass("usetwentyfour"),z("s")&&!h&&b.addClass("wider"),d.sideBySide&&B()&&A()?(b.addClass("timepicker-sbs"),"top"===d.toolbarPlacement&&b.append(g),b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))),"bottom"===d.toolbarPlacement&&b.append(g),b):("top"===d.toolbarPlacement&&f.append(g),B()&&f.append(a("<li>").addClass(d.collapse&&A()?"collapse in":"").append(c)),"default"===d.toolbarPlacement&&f.append(g),A()&&f.append(a("<li>").addClass(d.collapse&&B()?"collapse":"").append(e)),"bottom"===d.toolbarPlacement&&f.append(g),b.append(f))},H=function(){var b,e={};return b=c.is("input")||d.inline?c.data():c.find("input").data(),b.dateOptions&&b.dateOptions instanceof Object&&(e=a.extend(!0,e,b.dateOptions)),a.each(d,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(e[a]=b[c])}),e},I=function(){var b,e=(n||c).position(),f=(n||c).offset(),g=d.widgetPositioning.vertical,h=d.widgetPositioning.horizontal;if(d.widgetParent)b=d.widgetParent.append(o);else if(c.is("input"))b=c.after(o).parent();else{if(d.inline)return void(b=c.append(o));b=c,c.children().first().after(o)}if("auto"===g&&(g=f.top+1.5*o.height()>=a(window).height()+a(window).scrollTop()&&o.height()+c.outerHeight()<f.top?"top":"bottom"),"auto"===h&&(h=b.width()<f.left+o.outerWidth()/2&&f.left+o.outerWidth()>a(window).width()?"right":"left"),"top"===g?o.addClass("top").removeClass("bottom"):o.addClass("bottom").removeClass("top"),"right"===h?o.addClass("pull-right"):o.removeClass("pull-right"),"static"===b.css("position")&&(b=b.parents().filter(function(){return"static"!==a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");o.css({top:"top"===g?"auto":e.top+c.outerHeight(),bottom:"top"===g?b.outerHeight()-(b===c?0:e.top):"auto",left:"left"===h?b===c?0:e.left:"auto",right:"left"===h?"auto":b.outerWidth()-c.outerWidth()-(b===c?0:e.left)})},J=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||c.trigger(a)},K=function(a){"y"===a&&(a="YYYY"),J({type:"dp.update",change:a,viewDate:f.clone()})},L=function(a){o&&(a&&(k=Math.max(p,Math.min(3,k+a))),o.find(".datepicker > div").hide().filter(".datepicker-"+q[k].clsName).show())},M=function(){var b=a("<tr>"),c=f.clone().startOf("w").startOf("d");for(d.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(f.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");o.find(".datepicker-days thead").append(b)},N=function(a){return d.disabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){return d.enabledDates[a.format("YYYY-MM-DD")]===!0},P=function(a){return d.disabledHours[a.format("H")]===!0},Q=function(a){return d.enabledHours[a.format("H")]===!0},R=function(b,c){if(!b.isValid())return!1;if(d.disabledDates&&"d"===c&&N(b))return!1;if(d.enabledDates&&"d"===c&&!O(b))return!1;if(d.minDate&&b.isBefore(d.minDate,c))return!1;if(d.maxDate&&b.isAfter(d.maxDate,c))return!1;if(d.daysOfWeekDisabled&&"d"===c&&d.daysOfWeekDisabled.indexOf(b.day())!==-1)return!1;if(d.disabledHours&&("h"===c||"m"===c||"s"===c)&&P(b))return!1;if(d.enabledHours&&("h"===c||"m"===c||"s"===c)&&!Q(b))return!1;if(d.disabledTimeIntervals&&("h"===c||"m"===c||"s"===c)){var e=!1;if(a.each(d.disabledTimeIntervals,function(){if(b.isBetween(this[0],this[1]))return e=!0,!1}),e)return!1}return!0},S=function(){for(var b=[],c=f.clone().startOf("y").startOf("d");c.isSame(f,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");o.find(".datepicker-months td").empty().append(b)},T=function(){var b=o.find(".datepicker-months"),c=b.find("th"),g=b.find("tbody").find("span");c.eq(0).find("span").attr("title",d.tooltips.prevYear),c.eq(1).attr("title",d.tooltips.selectYear),c.eq(2).find("span").attr("title",d.tooltips.nextYear),b.find(".disabled").removeClass("disabled"),R(f.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(f.year()),R(f.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),g.removeClass("active"),e.isSame(f,"y")&&!m&&g.eq(e.month()).addClass("active"),g.each(function(b){R(f.clone().month(b),"M")||a(this).addClass("disabled")})},U=function(){var a=o.find(".datepicker-years"),b=a.find("th"),c=f.clone().subtract(5,"y"),g=f.clone().add(6,"y"),h="";for(b.eq(0).find("span").attr("title",d.tooltips.prevDecade),b.eq(1).attr("title",d.tooltips.selectDecade),b.eq(2).find("span").attr("title",d.tooltips.nextDecade),a.find(".disabled").removeClass("disabled"),d.minDate&&d.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+g.year()),d.maxDate&&d.maxDate.isBefore(g,"y")&&b.eq(2).addClass("disabled");!c.isAfter(g,"y");)h+='<span data-action="selectYear" class="year'+(c.isSame(e,"y")&&!m?" active":"")+(R(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(h)},V=function(){var a,c=o.find(".datepicker-decades"),g=c.find("th"),h=b({y:f.year()-f.year()%100-1}),i=h.clone().add(100,"y"),j=h.clone(),k=!1,l=!1,m="";for(g.eq(0).find("span").attr("title",d.tooltips.prevCentury),g.eq(2).find("span").attr("title",d.tooltips.nextCentury),c.find(".disabled").removeClass("disabled"),(h.isSame(b({y:1900}))||d.minDate&&d.minDate.isAfter(h,"y"))&&g.eq(0).addClass("disabled"),g.eq(1).text(h.year()+"-"+i.year()),(h.isSame(b({y:2e3}))||d.maxDate&&d.maxDate.isBefore(i,"y"))&&g.eq(2).addClass("disabled");!h.isAfter(i,"y");)a=h.year()+12,k=d.minDate&&d.minDate.isAfter(h,"y")&&d.minDate.year()<=a,l=d.maxDate&&d.maxDate.isAfter(h,"y")&&d.maxDate.year()<=a,m+='<span data-action="selectDecade" class="decade'+(e.isAfter(h)&&e.year()<=a?" active":"")+(R(h,"y")||k||l?"":" disabled")+'" data-selection="'+(h.year()+6)+'">'+(h.year()+1)+" - "+(h.year()+12)+"</span>",h.add(12,"y");m+="<span></span><span></span><span></span>",c.find("td").html(m),g.eq(1).text(j.year()+1+"-"+h.year())},W=function(){var b,c,g,h=o.find(".datepicker-days"),i=h.find("th"),j=[],k=[];if(B()){for(i.eq(0).find("span").attr("title",d.tooltips.prevMonth),i.eq(1).attr("title",d.tooltips.selectMonth),i.eq(2).find("span").attr("title",d.tooltips.nextMonth),h.find(".disabled").removeClass("disabled"),i.eq(1).text(f.format(d.dayViewHeaderFormat)),R(f.clone().subtract(1,"M"),"M")||i.eq(0).addClass("disabled"),R(f.clone().add(1,"M"),"M")||i.eq(2).addClass("disabled"),b=f.clone().startOf("M").startOf("w").startOf("d"),g=0;g<42;g++)0===b.weekday()&&(c=a("<tr>"),d.calendarWeeks&&c.append('<td class="cw">'+b.week()+"</td>"),j.push(c)),k=["day"],b.isBefore(f,"M")&&k.push("old"),b.isAfter(f,"M")&&k.push("new"),b.isSame(e,"d")&&!m&&k.push("active"),R(b,"d")||k.push("disabled"),b.isSame(y(),"d")&&k.push("today"),0!==b.day()&&6!==b.day()||k.push("weekend"),J({type:"dp.classify",date:b,classNames:k}),c.append('<td data-action="selectDay" data-day="'+b.format("L")+'" class="'+k.join(" ")+'">'+b.date()+"</td>"),b.add(1,"d");h.find("tbody").empty().append(j),T(),U(),V()}},X=function(){var b=o.find(".timepicker-hours table"),c=f.clone().startOf("d"),d=[],e=a("<tr>");for(f.hour()>11&&!h&&c.hour(12);c.isSame(f,"d")&&(h||f.hour()<12&&c.hour()<12||f.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(R(c,"h")?"":" disabled")+'">'+c.format(h?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},Y=function(){for(var b=o.find(".timepicker-minutes table"),c=f.clone().startOf("h"),e=[],g=a("<tr>"),h=1===d.stepping?5:d.stepping;f.isSame(c,"h");)c.minute()%(4*h)===0&&(g=a("<tr>"),e.push(g)),g.append('<td data-action="selectMinute" class="minute'+(R(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(h,"m");b.empty().append(e)},Z=function(){for(var b=o.find(".timepicker-seconds table"),c=f.clone().startOf("m"),d=[],e=a("<tr>");f.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(R(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},$=function(){var a,b,c=o.find(".timepicker span[data-time-component]");h||(a=o.find(".timepicker [data-action=togglePeriod]"),b=e.clone().add(e.hours()>=12?-12:12,"h"),a.text(e.format("A")),R(b,"h")?a.removeClass("disabled"):a.addClass("disabled")),c.filter("[data-time-component=hours]").text(e.format(h?"HH":"hh")),c.filter("[data-time-component=minutes]").text(e.format("mm")),c.filter("[data-time-component=seconds]").text(e.format("ss")),X(),Y(),Z()},_=function(){o&&(W(),$())},aa=function(a){var b=m?null:e;if(!a)return m=!0,g.val(""),c.data("date",""),J({type:"dp.change",date:!1,oldDate:b}),void _();if(a=a.clone().locale(d.locale),x()&&a.tz(d.timeZone),1!==d.stepping)for(a.minutes(Math.round(a.minutes()/d.stepping)*d.stepping).seconds(0);d.minDate&&a.isBefore(d.minDate);)a.add(d.stepping,"minutes");R(a)?(e=a,f=e.clone(),g.val(e.format(i)),c.data("date",e.format(i)),m=!1,_(),J({type:"dp.change",date:e.clone(),oldDate:b})):(d.keepInvalid?J({type:"dp.change",date:a,oldDate:b}):g.val(m?"":e.format(i)),J({type:"dp.error",date:a,oldDate:b}))},ba=function(){var b=!1;return o?(o.find(".collapse").each(function(){var c=a(this).data("collapse");return!c||!c.transitioning||(b=!0,!1)}),b?l:(n&&n.hasClass("btn")&&n.toggleClass("active"),o.hide(),a(window).off("resize",I),o.off("click","[data-action]"),o.off("mousedown",!1),o.remove(),o=!1,J({type:"dp.hide",date:e.clone()}),g.blur(),f=e.clone(),l)):l},ca=function(){aa(null)},da=function(a){return void 0===d.parseInputDate?(!b.isMoment(a)||a instanceof Date)&&(a=y(a)):a=d.parseInputDate(a),a},ea={next:function(){var a=q[k].navFnc;f.add(q[k].navStep,a),W(),K(a)},previous:function(){var a=q[k].navFnc;f.subtract(q[k].navStep,a),W(),K(a)},pickerSwitch:function(){L(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));f.month(c),k===p?(aa(e.clone().year(f.year()).month(f.month())),d.inline||ba()):(L(-1),W()),K("M")},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;f.year(c),k===p?(aa(e.clone().year(f.year())),d.inline||ba()):(L(-1),W()),K("YYYY")},selectDecade:function(b){var c=parseInt(a(b.target).data("selection"),10)||0;f.year(c),k===p?(aa(e.clone().year(f.year())),d.inline||ba()):(L(-1),W()),K("YYYY")},selectDay:function(b){var c=f.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),aa(c.date(parseInt(a(b.target).text(),10))),A()||d.keepOpen||d.inline||ba()},incrementHours:function(){var a=e.clone().add(1,"h");R(a,"h")&&aa(a)},incrementMinutes:function(){var a=e.clone().add(d.stepping,"m");R(a,"m")&&aa(a)},incrementSeconds:function(){var a=e.clone().add(1,"s");R(a,"s")&&aa(a)},decrementHours:function(){var a=e.clone().subtract(1,"h");R(a,"h")&&aa(a)},decrementMinutes:function(){var a=e.clone().subtract(d.stepping,"m");R(a,"m")&&aa(a)},decrementSeconds:function(){var a=e.clone().subtract(1,"s");R(a,"s")&&aa(a)},togglePeriod:function(){aa(e.clone().add(e.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,e=a(b.target),f=e.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),e.is("span")?e.toggleClass(d.icons.time+" "+d.icons.date):e.find("span").toggleClass(d.icons.time+" "+d.icons.date)}},showPicker:function(){o.find(".timepicker > div:not(.timepicker-picker)").hide(),o.find(".timepicker .timepicker-picker").show()},showHours:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-hours").show()},showMinutes:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);h||(e.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),aa(e.clone().hours(c)),ea.showPicker.call(l)},selectMinute:function(b){aa(e.clone().minutes(parseInt(a(b.target).text(),10))),ea.showPicker.call(l)},selectSecond:function(b){aa(e.clone().seconds(parseInt(a(b.target).text(),10))),ea.showPicker.call(l)},clear:ca,today:function(){var a=y();R(a,"d")&&aa(a)},close:ba},fa=function(b){return!a(b.currentTarget).is(".disabled")&&(ea[a(b.currentTarget).data("action")].apply(l,arguments),!1)},ga=function(){var b,c={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return g.prop("disabled")||!d.ignoreReadonly&&g.prop("readonly")||o?l:(void 0!==g.val()&&0!==g.val().trim().length?aa(da(g.val().trim())):m&&d.useCurrent&&(d.inline||g.is("input")&&0===g.val().trim().length)&&(b=y(),"string"==typeof d.useCurrent&&(b=c[d.useCurrent](b)),aa(b)),o=G(),M(),S(),o.find(".timepicker-hours").hide(),o.find(".timepicker-minutes").hide(),o.find(".timepicker-seconds").hide(),_(),L(),a(window).on("resize",I),o.on("click","[data-action]",fa),o.on("mousedown",!1),n&&n.hasClass("btn")&&n.toggleClass("active"),I(),o.show(),d.focusOnShow&&!g.is(":focus")&&g.focus(),J({type:"dp.show"}),l)},ha=function(){return o?ba():ga()},ia=function(a){var b,c,e,f,g=null,h=[],i={},j=a.which,k="p";w[j]=k;for(b in w)w.hasOwnProperty(b)&&w[b]===k&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in d.keyBinds)if(d.keyBinds.hasOwnProperty(b)&&"function"==typeof d.keyBinds[b]&&(e=b.split(" "),e.length===h.length&&v[j]===e[e.length-1])){for(f=!0,c=e.length-2;c>=0;c--)if(!(v[e[c]]in i)){f=!1;break}if(f){g=d.keyBinds[b];break}}g&&(g.call(l,o),a.stopPropagation(),a.preventDefault())},ja=function(a){w[a.which]="r",a.stopPropagation(),a.preventDefault()},ka=function(b){var c=a(b.target).val().trim(),d=c?da(c):null;return aa(d),b.stopImmediatePropagation(),!1},la=function(){g.on({change:ka,blur:d.debug?"":ba,keydown:ia,keyup:ja,focus:d.allowInputToggle?ga:""}),c.is("input")?g.on({focus:ga}):n&&(n.on("click",ha),n.on("mousedown",!1))},ma=function(){g.off({change:ka,blur:blur,keydown:ia,keyup:ja,focus:d.allowInputToggle?ba:""}),c.is("input")?g.off({focus:ga}):n&&(n.off("click",ha),n.off("mousedown",!1))},na=function(b){var c={};return a.each(b,function(){var a=da(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),!!Object.keys(c).length&&c},oa=function(b){var c={};return a.each(b,function(){c[this]=!0}),!!Object.keys(c).length&&c},pa=function(){var a=d.format||"L LT";i=a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){var b=e.localeData().longDateFormat(a)||a;return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){return e.localeData().longDateFormat(a)||a})}),j=d.extraFormats?d.extraFormats.slice():[],j.indexOf(a)<0&&j.indexOf(i)<0&&j.push(i),h=i.toLowerCase().indexOf("a")<1&&i.replace(/\[.*?\]/g,"").indexOf("h")<1,z("y")&&(p=2),z("M")&&(p=1),z("d")&&(p=0),k=Math.max(p,k),m||aa(e)};if(l.destroy=function(){ba(),ma(),c.removeData("DateTimePicker"),c.removeData("date")},l.toggle=ha,l.show=ga,l.hide=ba,l.disable=function(){return ba(),n&&n.hasClass("btn")&&n.addClass("disabled"),g.prop("disabled",!0),l},l.enable=function(){return n&&n.hasClass("btn")&&n.removeClass("disabled"),g.prop("disabled",!1),l},l.ignoreReadonly=function(a){if(0===arguments.length)return d.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return d.ignoreReadonly=a,l},l.options=function(b){if(0===arguments.length)return a.extend(!0,{},d);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,d,b),a.each(d,function(a,b){if(void 0===l[a])throw new TypeError("option "+a+" is not recognized!");l[a](b)}),l},l.date=function(a){if(0===arguments.length)return m?null:e.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return aa(null===a?null:da(a)),l},l.format=function(a){if(0===arguments.length)return d.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a string or boolean:false parameter "+a);return d.format=a,i&&pa(),l},l.timeZone=function(a){if(0===arguments.length)return d.timeZone;if("string"!=typeof a)throw new TypeError("newZone() expects a string parameter");return d.timeZone=a,l},l.dayViewHeaderFormat=function(a){if(0===arguments.length)return d.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return d.dayViewHeaderFormat=a,l},l.extraFormats=function(a){if(0===arguments.length)return d.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return d.extraFormats=a,j&&pa(),l},l.disabledDates=function(b){if(0===arguments.length)return d.disabledDates?a.extend({},d.disabledDates):d.disabledDates;if(!b)return d.disabledDates=!1,_(),l;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return d.disabledDates=na(b),d.enabledDates=!1,_(),l},l.enabledDates=function(b){if(0===arguments.length)return d.enabledDates?a.extend({},d.enabledDates):d.enabledDates;if(!b)return d.enabledDates=!1,_(),l;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return d.enabledDates=na(b),d.disabledDates=!1,_(),l},l.daysOfWeekDisabled=function(a){if(0===arguments.length)return d.daysOfWeekDisabled.splice(0);if("boolean"==typeof a&&!a)return d.daysOfWeekDisabled=!1,_(),l;if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(d.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||b<0||isNaN(b)?a:(a.indexOf(b)===-1&&a.push(b),a)},[]).sort(),d.useCurrent&&!d.keepInvalid){for(var b=0;!R(e,"d");){if(e.add(1,"d"),31===b)throw"Tried 31 times to find a valid date";b++}aa(e)}return _(),l},l.maxDate=function(a){if(0===arguments.length)return d.maxDate?d.maxDate.clone():d.maxDate;if("boolean"==typeof a&&a===!1)return d.maxDate=!1,_(),l;"string"==typeof a&&("now"!==a&&"moment"!==a||(a=y()));var b=da(a);if(!b.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(d.minDate&&b.isBefore(d.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+b.format(i));return d.maxDate=b,d.useCurrent&&!d.keepInvalid&&e.isAfter(a)&&aa(d.maxDate),f.isAfter(b)&&(f=b.clone().subtract(d.stepping,"m")),_(),l},l.minDate=function(a){if(0===arguments.length)return d.minDate?d.minDate.clone():d.minDate;if("boolean"==typeof a&&a===!1)return d.minDate=!1,_(),l;"string"==typeof a&&("now"!==a&&"moment"!==a||(a=y()));var b=da(a);if(!b.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(d.maxDate&&b.isAfter(d.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+b.format(i));return d.minDate=b,d.useCurrent&&!d.keepInvalid&&e.isBefore(a)&&aa(d.minDate),f.isBefore(b)&&(f=b.clone().add(d.stepping,"m")),_(),l},l.defaultDate=function(a){if(0===arguments.length)return d.defaultDate?d.defaultDate.clone():d.defaultDate;if(!a)return d.defaultDate=!1,l;"string"==typeof a&&(a="now"===a||"moment"===a?y():y(a));var b=da(a);if(!b.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!R(b))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return d.defaultDate=b,(d.defaultDate&&d.inline||""===g.val().trim())&&aa(d.defaultDate),l},l.locale=function(a){if(0===arguments.length)return d.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return d.locale=a,e.locale(d.locale),f.locale(d.locale),i&&pa(),o&&(ba(),ga()),l},l.stepping=function(a){return 0===arguments.length?d.stepping:(a=parseInt(a,10),(isNaN(a)||a<1)&&(a=1),d.stepping=a,l)},l.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return d.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&b.indexOf(a.toLowerCase())===-1)throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return d.useCurrent=a,l},l.collapse=function(a){if(0===arguments.length)return d.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return d.collapse===a?l:(d.collapse=a,o&&(ba(),ga()),l)},l.icons=function(b){if(0===arguments.length)return a.extend({},d.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(d.icons,b),o&&(ba(),ga()),l},l.tooltips=function(b){if(0===arguments.length)return a.extend({},d.tooltips);if(!(b instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return a.extend(d.tooltips,b),o&&(ba(),ga()),l},l.useStrict=function(a){if(0===arguments.length)return d.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return d.useStrict=a,l},l.sideBySide=function(a){if(0===arguments.length)return d.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return d.sideBySide=a,o&&(ba(),ga()),l},l.viewMode=function(a){if(0===arguments.length)return d.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(r.indexOf(a)===-1)throw new TypeError("viewMode() parameter must be one of ("+r.join(", ")+") value");return d.viewMode=a,k=Math.max(r.indexOf(a),p),L(),l},l.toolbarPlacement=function(a){if(0===arguments.length)return d.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(u.indexOf(a)===-1)throw new TypeError("toolbarPlacement() parameter must be one of ("+u.join(", ")+") value");return d.toolbarPlacement=a,o&&(ba(),ga()),l},l.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},d.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),t.indexOf(b.horizontal)===-1)throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+t.join(", ")+")");d.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),s.indexOf(b.vertical)===-1)throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+s.join(", ")+")");d.widgetPositioning.vertical=b.vertical}return _(),l},l.calendarWeeks=function(a){if(0===arguments.length)return d.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return d.calendarWeeks=a,_(),l},l.showTodayButton=function(a){if(0===arguments.length)return d.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return d.showTodayButton=a,o&&(ba(),ga()),l},l.showClear=function(a){if(0===arguments.length)return d.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return d.showClear=a,o&&(ba(),ga()),l},l.widgetParent=function(b){if(0===arguments.length)return d.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return d.widgetParent=b,o&&(ba(),ga()),l},l.keepOpen=function(a){if(0===arguments.length)return d.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return d.keepOpen=a,l},l.focusOnShow=function(a){if(0===arguments.length)return d.focusOnShow;if("boolean"!=typeof a)throw new TypeError("focusOnShow() expects a boolean parameter");return d.focusOnShow=a,l},l.inline=function(a){if(0===arguments.length)return d.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return d.inline=a,l},l.clear=function(){return ca(),l},l.keyBinds=function(a){return 0===arguments.length?d.keyBinds:(d.keyBinds=a,l)},l.getMoment=function(a){return y(a)},l.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return d.debug=a,l},l.allowInputToggle=function(a){if(0===arguments.length)return d.allowInputToggle;if("boolean"!=typeof a)throw new TypeError("allowInputToggle() expects a boolean parameter");return d.allowInputToggle=a,l},l.showClose=function(a){if(0===arguments.length)return d.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return d.showClose=a,l},l.keepInvalid=function(a){if(0===arguments.length)return d.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");return d.keepInvalid=a,l},l.datepickerInput=function(a){if(0===arguments.length)return d.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return d.datepickerInput=a,l},l.parseInputDate=function(a){if(0===arguments.length)return d.parseInputDate;if("function"!=typeof a)throw new TypeError("parseInputDate() sholud be as function");return d.parseInputDate=a,l},l.disabledTimeIntervals=function(b){if(0===arguments.length)return d.disabledTimeIntervals?a.extend({},d.disabledTimeIntervals):d.disabledTimeIntervals;if(!b)return d.disabledTimeIntervals=!1,_(),l;if(!(b instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return d.disabledTimeIntervals=b,_(),l},l.disabledHours=function(b){if(0===arguments.length)return d.disabledHours?a.extend({},d.disabledHours):d.disabledHours;if(!b)return d.disabledHours=!1,_(),l;if(!(b instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(d.disabledHours=oa(b),d.enabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!R(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}aa(e)}return _(),l},l.enabledHours=function(b){if(0===arguments.length)return d.enabledHours?a.extend({},d.enabledHours):d.enabledHours;if(!b)return d.enabledHours=!1,_(),l;if(!(b instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(d.enabledHours=oa(b),d.disabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!R(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}aa(e)}return _(),l},l.viewDate=function(a){if(0===arguments.length)return f.clone();if(!a)return f=e.clone(),l;if(!("string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return f=da(a),K(),l},c.is("input"))g=c;else if(g=c.find(d.datepickerInput),0===g.length)g=c.find("input");else if(!g.is("input"))throw new Error('CSS class "'+d.datepickerInput+'" cannot be applied to non input element');if(c.hasClass("input-group")&&(n=0===c.find(".datepickerbutton").length?c.find(".input-group-addon"):c.find(".datepickerbutton")),!d.inline&&!g.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e=y(),f=e.clone(),a.extend(!0,d,H()),l.options(d),pa(),la(),g.prop("disabled")&&l.disable(),g.is("input")&&0!==g.val().trim().length?aa(da(g.val().trim())):d.defaultDate&&void 0===g.attr("placeholder")&&aa(d.defaultDate),d.inline&&ga(),l};return a.fn.datetimepicker=function(b){b=b||{};var d,e=Array.prototype.slice.call(arguments,1),f=!0,g=["destroy","hide","show","toggle"];if("object"==typeof b)return this.each(function(){var d,e=a(this);e.data("DateTimePicker")||(d=a.extend(!0,{},a.fn.datetimepicker.defaults,b),e.data("DateTimePicker",c(e,d)))});if("string"==typeof b)return this.each(function(){var c=a(this),g=c.data("DateTimePicker");if(!g)throw new Error('bootstrap-datetimepicker("'+b+'") method was called on an element that is not using DateTimePicker');d=g[b].apply(g,e),f=d===g}),f||a.inArray(b,g)>-1?this:d;throw new TypeError("Invalid arguments for DateTimePicker: "+b)},a.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(7,"d")):this.date(b.clone().add(this.stepping(),"m"))}},down:function(a){if(!a)return void this.show();var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(7,"d")):this.date(b.clone().subtract(this.stepping(),"m"))},"control up":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(1,"y")):this.date(b.clone().add(1,"h"))}},"control down":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(1,"y")):this.date(b.clone().subtract(1,"h"))}},left:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"d"))}},right:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"d"))}},pageUp:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a&&a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},a.fn.datetimepicker});!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}var e=c(1)["default"];b.__esModule=!0;var f=c(2),g=e(f),h=c(35),i=e(h),j=c(36),k=c(41),l=c(42),m=e(l),n=c(39),o=e(n),p=c(34),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(3)["default"],f=c(1)["default"];b.__esModule=!0;var g=c(4),h=e(g),i=c(21),j=f(i),k=c(6),l=f(k),m=c(5),n=e(m),o=c(22),p=e(o),q=c(34),r=f(q),s=d();s.create=d,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(1)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(5),g=c(6),h=e(g),i=c(10),j=c(18),k=c(20),l=e(k),m="4.1.2";b.VERSION=m;var n=7;b.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.REVISION_CHANGES=o;var p="[object Object]";d.prototype={constructor:d,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;b.log=q,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return!a&&0!==a||!(!p(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,g=void 0,h=void 0;c&&(g=c.start.line,h=c.start.column,a+=" - "+g+":"+h);for(var i=Error.prototype.constructor.call(this,a),j=0;j<f.length;j++)this[f[j]]=i[f[j]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=g,e?Object.defineProperty(this,"column",{value:h,enumerable:!0}):this.column=h)}catch(k){}}var e=c(7)["default"];b.__esModule=!0;var f=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){a.exports={"default":c(8),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b,c){return d.setDesc(a,b,c)}},function(a,b){var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b,c){"use strict";function d(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultHelpers=d;var f=c(11),g=e(f),h=c(12),i=e(h),j=c(13),k=e(j),l=c(14),m=e(l),n=c(15),o=e(n),p=c(16),q=e(p),r=c(17),s=e(r)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(5),f=c(6),g=d(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;h<l;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(6),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b){if(!a)return a;if("constructor"!==b||a.propertyIsEnumerable(b))return a[b]})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultDecorators=d;var f=c(19),g=e(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=s.COMPILER_REVISION;if(b!==c){if(b<c){var d=s.REVISION_CHANGES[c],e=s.REVISION_CHANGES[b];throw new r["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new r["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=p.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new r["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=j(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!=f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=k(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new r["default"]("No environment passed to template");if(!a||!a.main)throw new r["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new r["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:p.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=p.extend({},b,a)),c},nullContext:l({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new r["default"]("must pass block params");if(a.useDepths&&!g)throw new r["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&!function(){c.data=s.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=s.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=p.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new r["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?s.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),p.extend(b,g)}return b}var l=c(23)["default"],m=c(3)["default"],n=c(1)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var o=c(5),p=m(o),q=c(6),r=n(q),s=c(4)},function(a,b,c){a.exports={"default":c(24),__esModule:!0}},function(a,b,c){c(25),a.exports=c(30).Object.seal},function(a,b,c){var d=c(26);c(27)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(28),e=c(30),f=c(33);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(29),e=c(30),f=c(31),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(32);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}var e=c(1)["default"],f=c(3)["default"];b.__esModule=!0,b.parse=d;var g=c(37),h=e(g),i=c(38),j=e(i),k=c(40),l=f(k),m=c(5);b.parser=h["default"];var n={};m.extend(n,l)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substring(a,b.yyleng-c+a)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(e(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(1)["default"];b.__esModule=!0;var j=c(39),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,i=0,j=d.length;i<j;i++){var k=d[i],l=this.accept(k);if(l){var m=e(d,i,c),n=f(d,i,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&g(d,i,!0),l.open&&h(d,i,!0),b&&q&&(g(d,i),h(d,i)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[i-1].original)[1])),b&&o&&(g((k.program||k.inverse).body),h(d,i)),b&&p&&(g(d,i),h((k.inverse||k.program).body))}}return a},d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),!this.options.ignoreStandalone&&e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}function e(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function f(a){e.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function g(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}var h=c(1)["default"];b.__esModule=!0;var i=c(6),j=h(i);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!d.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:e,Decorator:e,BlockStatement:f,DecoratorBlock:f,PartialStatement:g,PartialBlockStatement:function(a){g.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:e,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function e(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function f(a){return/^\[.*\]$/.test(a)?a.substring(1,a.length-1):a}function g(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function h(a){return a.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function i(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g=0,h=b.length;g<h;g++){var i=b[g].part,j=b[g].original!==i;if(d+=(b[g].separator||"")+i,j||".."!==i&&"."!==i&&"this"!==i)e.push(i);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===i&&f++}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function j(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function k(a,b,c,e){d(a,c),e=this.locInfo(e);var f={type:"Program",body:b,strip:{},loc:e};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:e}}function l(a,b,c,e,f,g){e&&e.path&&d(a,e);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=e.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:e&&e.strip,loc:this.locInfo(g)}}function m(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function n(a,b,c,e){return d(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(e)}}var o=c(1)["default"];b.__esModule=!0,b.SourceLocation=e,b.id=f,b.stripFlags=g,b.stripComment=h,b.preparePath=i,b.prepareMustache=j,b.prepareRawBlock=k,b.prepareBlock=l,b.prepareProgram=m,b.preparePartialBlock=n;var p=c(6),q=o(p)},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=l.extend({},b),"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}var i=c(1)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var j=c(6),k=i(j),l=c(5),m=c(35),n=i(m),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}var g=c(1)["default"];b.__esModule=!0;var h=c(4),i=c(6),j=g(i),k=c(5),l=c(43),m=g(l);e.prototype={nameLookup:function(a,b){return"constructor"===b?["(",a,".propertyIsEnumerable('constructor') ? ",a,".constructor : undefined",")"]:e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var g=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict&&e,this,b,a));for(var h=b.length;c<h;c++)this.replaceStack(function(e){var f=g.nameLookup(e,b[c],a);return d?[" && ",f]:[" != null ? ",f," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(5),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b["default"]=e,a.exports=b["default"]}])});ACC.address={_autoload:["bindSuggestedDeliveryAddresses","bindCountrySpecificAddressForms","showAddressFormButtonPanel","bindViewAddressBook","bindToColorboxClose","showRemoveAddressFromBookConfirmation","backToListAddresses"],spinner:$("<img src='"+ACC.config.commonResourcePath+"/images/spinner.gif' alt='' />"),addressID:'',bindSuggestedDeliveryAddresses:function(){const status=$('.add_edit_delivery_address_id').attr('status');if(status!=null&&"hasSuggestedAddresses"===status){ACC.address.showSuggestedAddressesPopup();}},showSuggestedAddressesPopup:function(){$(document).ready(function(){ACC.colorbox.open("Suggested Addresses",{href:"#popup_suggested_delivery_addresses",inline:true,width:"525px",onComplete:function(){$(this).colorbox.resize();}});})},bindCountrySpecificAddressForms:function(){$(document).on("change",'#countrySelector select',function(){const options={'addressCode':'','countryIsoCode':$(this).val()};ACC.address.displayCountrySpecificAddressForm(options,ACC.address.showAddressFormButtonPanel);})},showAddressFormButtonPanel:function(){if($('#countrySelector :input').val()!==''){$('#addressform_button_panel').show();}},bindToColorboxClose:function(){$(document).on("click",".closeColorBox",function(){ACC.colorbox.close();})},displayCountrySpecificAddressForm:function(options,callback){$.ajax({url:ACC.config.encodedContextPath+'/my-account/addressform',async:true,data:options,dataType:"html",beforeSend:function(){$("#i18nAddressForm").html(ACC.address.spinner);}}).done(function(data){$("#i18nAddressForm").html($(data).html());if(typeof callback=='function'){callback.call();}});},bindViewAddressBook:function(){$(document).on("click",".js-address-book",function(e){e.preventDefault();ACC.colorbox.open("Saved Addresses",{href:"#addressbook",inline:true,width:"380px"});});},showRemoveAddressFromBookConfirmation:function(){$(document).on("click",".removeAddressFromBookButton",function(){const addressId=$(this).data("addressId");const popupTitle=$(this).data("popupTitle");ACC.colorbox.open(popupTitle,{inline:true,height:false,href:"#popup_confirm_address_removal_"+addressId,onComplete:function(){$(this).colorbox.resize();}});})},backToListAddresses:function(){$(".addressBackBtn").on("click",function(){window.location=$(this).data("backToAddresses");});}};ACC.cart={_autoload:["bindHelp","cartRestoration","bindCartPage","bindMultiDEntryRemoval","bindMultidCartProduct",["bindApplyVoucher",$("#js-voucher-apply-btn").length!==0],["bindToReleaseVoucher",$("#js-applied-vouchers").length!==0]],bindHelp:function(){$(document).on("click",".js-cart-help",function(e){e.preventDefault();ACC.colorbox.open(ACC.common.encodeHtml($(this).data("help")),{html:$(".js-help-popup-content").text(),width:"300px"});})},cartRestoration:function(){$('.cartRestoration').click(function(){window.location=$(this).data("cartUrl");});},bindCartPage:function(){$(document).on("click",'.js-show-editable-grid',function(event){ACC.cart.populateAndShowEditableGrid(this,event);});},bindMultiDEntryRemoval:function(){$(document).on("click",'.js-submit-remove-product-multi-d',function(){const $form=$(document).find('#updateCartForm'+$(this).data("index"));const initialCartQuantity=$form.find('input[name=initialQuantity]');const cartQuantity=$form.find('input[name=quantity]');cartQuantity.val(0);initialCartQuantity.val(0);ACC.track.trackRemoveFromCart($form.find('input[name=productCode]').val(),initialCartQuantity,cartQuantity.val());$.ajax({url:$form.attr("action"),data:$form.serialize(),type:$form.attr("method")?$form.attr("method").toUpperCase():"GET",dataType:"text",success:function(){location.reload();},error:function(jqXHR,textStatus,errorThrown){console.log("Failed to remove quantity. Error details ["+jqXHR+", "+textStatus+", "+errorThrown+"]");}});});},populateAndShowEditableGrid:function(element){const $element=$(element);const itemIndex=$element.data("index");const grid=$(document).find("#ajaxGrid"+itemIndex);const gridEntries=$(document).find('#grid'+itemIndex);const arrSubEntries=gridEntries.data("sub-entries").split(',');$element.toggleClass('open');const mapCodeQuantity={};for(let i=0;i<arrSubEntries.length;i++){const arrValue=arrSubEntries[i].split(":");mapCodeQuantity[arrValue[0]]=arrValue[1];}
if(grid.children('#cartOrderGridForm').length>0){grid.slideToggle("slow");}else{$.ajax({url:gridEntries.data("target-url"),data:{productCode:arrSubEntries[0].split(':')[0],readOnly:$element.data("readOnlyMultidGrid")},type:"GET",dataType:'html',success:function(data){grid.html(data);$("#ajaxGrid").removeAttr('id');const $gridContainer=grid.find(".product-grid-container");for(let i=0;i<$gridContainer.length;i++){ACC.cart.getProductQuantity($gridContainer.eq(i),mapCodeQuantity,i);}
grid.slideDown("slow");ACC.cart.coreCartGridTableActions(element,mapCodeQuantity);ACC.productorderform.coreTableScrollActions(grid.children('#cartOrderGridForm'));},error:function(xht,textStatus,ex){console.log("Failed to get variant matrix. Error details ["+xht+", "+textStatus+", "+ex+"]");}});}},coreCartGridTableActions:function(element,mapCodeQuantity){ACC.productorderform.bindUpdateFutureStockButton(".update_future_stock_button");ACC.productorderform.bindVariantSelect($(".variant-select-btn"),'cartOrderGridForm');const itemIndex=$(element).data("index");const skuQuantityClass='.sku-quantity';let quantityBefore=0;const grid=$(document).find('#ajaxGrid'+itemIndex+" .product-grid-container");grid.on('focusin',skuQuantityClass,function(){quantityBefore=jQuery.trim(this.value);$(this).parents('tr').next('.variant-summary').remove();if($(this).parents('table').data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=$(this).parents('table').data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
if(quantityBefore===""){quantityBefore=0;this.value=0;}});grid.on('focusout keypress',skuQuantityClass,function(event){const code=event.keyCode||event.which||event.charCode;if(code!==13&&code!==undefined){return;}
let quantityAfter=0;let gridLevelTotalPrice="";const currentIndex=parseInt($(this).attr("id").match("[0-9]+"));this.value=ACC.productorderform.filterSkuEntry(this.value);quantityAfter=jQuery.trim(this.value);const variantCode=$(document).find("input[id='cartEntries["+currentIndex+"].sku']").val();if(isNaN(jQuery.trim(this.value))){this.value=0;}
if(quantityAfter===""){quantityAfter=0;this.value=0;}
const $gridTotalValue=grid.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");const currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();if(quantityAfter>0){gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityAfter));}
$gridTotalValue.text(gridLevelTotalPrice);const _this=this;const priceSibling=$(this).siblings('.price');const propSibling=$(this).siblings('.variant-prop');const currentSkuId=$(this).next('.td_stock').data('sku-id');const currentBaseTotal=$(this).siblings('.data-grid-total');if(this.value!==quantityBefore){let newVariant=true;ACC.productorderform.selectedVariants.forEach(function(item,index){if(item.id===currentSkuId){newVariant=false;if(_this.value==='0'||_this.value===0){ACC.productorderform.selectedVariants.splice(index,1);}else{ACC.productorderform.selectedVariants[index].quantity=_this.value;ACC.productorderform.selectedVariants[index].total=ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal);}}});if(newVariant&&this.value>0){ACC.productorderform.selectedVariants.push({id:currentSkuId,size:propSibling.data('variant-prop'),quantity:_this.value,total:ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)});}}
ACC.productorderform.showSelectedVariant($(this).parents('table'));if(this.value>0&&this.value!==quantityBefore){$(this).parents('table').addClass('selected');}else{if(ACC.productorderform.selectedVariants.length===0){$(this).parents('table').removeClass('selected').find('.variant-summary').remove();}}
if(quantityBefore!==quantityAfter){$.ajax({url:ACC.config.encodedContextPath+'/cart/updateMultiD',data:{productCode:variantCode,quantity:quantityAfter,entryNumber:-1},type:"POST",success:function(data){ACC.cart.refreshCartData(data,-1,quantityAfter,itemIndex);mapCodeQuantity[variantCode]=quantityAfter;},error:function(xhr){const redirectUrl=xhr.getResponseHeader("redirectUrl");const connection=xhr.getResponseHeader("Connection");if(redirectUrl!==null){window.location=redirectUrl;}else if(connection==="close"){window.location.reload();}}});}});},refreshCartData:function(cartData,entryNum,quantity,itemIndex){if(cartData.entries.length===0){location.reload();}else{let form;if(entryNum===-1)
{form=$(document).find('.js-qty-form'+itemIndex);const productCode=form.find('input[name=productCode]').val();let qty=0;let entryPrice=0;for(let i=0;i<cartData.entries.length;i++){const entry=cartData.entries[i];if(entry.product.code===productCode){qty=entry.quantity;entryPrice=entry.totalPrice;ACC.cart.updateEntryNumbersForCartMenuData(entry);break;}}
if(qty===0){location.reload();}else{form.find(".qtyValue").text(qty);form.parent().parent().find(".js-item-total").text(entryPrice.formattedValue);}}
ACC.cart.refreshCartPageWithJSONResponse(cartData);}},refreshCartPageWithJSONResponse:function(cartData){ACC.minicart.updateMiniCartDisplay();$('.js-cart-top-totals').text($("#cartTopTotalSectionTemplate").tmpl(cartData));$('div .cartpotproline').remove();$('div .cartproline').remove();$('.js-cart-totals').remove();$('#ajaxCartPotentialPromotionSection').text($("#cartPotentialPromotionSectionTemplate").tmpl(cartData));$('#ajaxCartPromotionSection').text($("#cartPromotionSectionTemplate").tmpl(cartData));$('#ajaxCart').text($("#cartTotalsTemplate").tmpl(cartData));ACC.quote.bindQuoteDiscount();},updateEntryNumbersForCartMenuData:function(entry){let entryNumbers="";$.each(entry.entries,function(index,subEntry){if(index!==0){entryNumbers=entryNumbers+";";}
entryNumbers=entryNumbers+subEntry.entryNumber;});$('.js-execute-entry-action-button').data('actionEntryNumbers',entryNumbers);},getProductQuantity:function(gridContainer,mapData){const tables=gridContainer.find("table");$.each(tables,function(index,currentTable){const skus=jQuery.map($(currentTable).find("input[type='hidden'].sku"),function(o){return o.value});const quantities=jQuery.map($(currentTable).find("input[type='textbox'].sku-quantity"),function(o){return o});const selectedVariants=[];$.each(skus,function(i,skuId){const quantity=mapData[skuId];if(quantity!==undefined){quantities[i].value=quantity;const currentIndex=parseInt(quantities[i].id.match("[0-9]+"));const gridTotalValue=gridContainer.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");let gridLevelTotalPrice="";const currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();if(quantity>0){gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantity));}
gridTotalValue.text(gridLevelTotalPrice);selectedVariants.push({id:skuId,size:$(quantities[i]).siblings('.variant-prop').data('variant-prop'),quantity:quantity,total:gridLevelTotalPrice});}});if(selectedVariants.length!==0){$.tmpl(ACC.productorderform.$variantSummaryTemplate,{variants:selectedVariants}).appendTo($(currentTable).addClass('selected'));$(currentTable).find('.variant-summary .variant-property').text($(currentTable).find('.variant-detail').data('variant-property'));$(currentTable).data(ACC.productorderform.selectedVariantData,selectedVariants);}});},bindMultidCartProduct:function(){$(document).on("click",'.showQuantityProduct',function(event){ACC.multidgrid.populateAndShowGrid(this,event,true);});$(document).on("click",'.showQuantityProductOverlay',function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event);});},bindApplyVoucher:function(){$("#js-voucher-apply-btn").on("click",function(e){ACC.cart.handleApplyVoucher(e);});$("#js-voucher-code-text").on("keypress",function(e){const code=(e.keyCode?e.keyCode:e.which);if(code===13){ACC.cart.handleApplyVoucher(e);}});},handleApplyVoucher:function(){const voucherCode=$.trim($("#js-voucher-code-text").val());if(voucherCode!==''&&voucherCode.length>0){$("#applyVoucherForm").submit();}},bindToReleaseVoucher:function(){$('.js-release-voucher-remove-btn').on("click",function(){$(this).closest('form').submit();});}};ACC.cartitem={_autoload:["bindCartItem"],submitTriggered:false,bindCartItem:function(){$('.js-execute-entry-action-button').on("click",function(){const $this=$(this);if($this.data("entryAction")==='REMOVE'){ACC.track.trackRemoveFromCart($this.data("entryProductCode"),$this.data("entryInitialQuantity"));}
const cartEntryActionForm=$("#cartEntryActionForm");const entryNumbers=$this.data("actionEntryNumbers").toString().split(';');entryNumbers.forEach(function(entryNumber){const entryNumbersInput=$("<input>").attr("type","hidden").attr("name","entryNumbers").val(entryNumber);cartEntryActionForm.append($(entryNumbersInput));});cartEntryActionForm.attr('action',$this.data("entryActionUrl")).submit();});$('.js-update-entry-quantity-input').on("blur",function(e){ACC.cartitem.handleUpdateQuantity(this,e);}).on("keyup",function(e){return ACC.cartitem.handleKeyEvent(this,e);}).on("keydown",function(e){return ACC.cartitem.handleKeyEvent(this,e);});},handleKeyEvent:function(elementRef,event){if(event.which===13&&!ACC.cartitem.submitTriggered){ACC.cartitem.submitTriggered=ACC.cartitem.handleUpdateQuantity(elementRef,event);return false;}else{if(ACC.cartitem.submitTriggered){return false;}}
return true;},handleUpdateQuantity:function(elementRef){const form=$(elementRef).closest('form');const initialCartQuantity=form.find('input[name=initialQuantity]').val();const newCartQuantity=form.find('input[name=quantity]').val();if(initialCartQuantity!==newCartQuantity){ACC.track.trackUpdateCart(form.find('input[name=productCode]').val(),initialCartQuantity,newCartQuantity);form.submit();return true;}
return false;}};$(document).ready(function(){$('.js-cartItemDetailBtn').click(function(event){event.stopPropagation();const thisDetailGroup=$(this).parent('.js-cartItemDetailGroup');thisDetailGroup.toggleClass('open');if(thisDetailGroup.hasClass('open')){$('.js-cartItemDetailGroup').not(thisDetailGroup).removeClass('open');$('.js-cartItemDetailBtn').attr('aria-expanded','true');}else{$('.js-cartItemDetailBtn').attr('aria-expanded','false');}
$(document).click(function(){thisDetailGroup.removeClass('open');});});$('.js-entry-comment-button').click(function(event){event.preventDefault();const thisDetailGroup=$('.js-cartItemDetailBtn').parent('.js-cartItemDetailGroup');$($(this).attr('href')).toggleClass('in');thisDetailGroup.removeClass('open');});});ACC.checkout={_autoload:["bindCheckO","bindForms","bindSavedPayments"],bindForms:function(){$(document).on("click","#addressSubmit",function(e){e.preventDefault();$('#addressForm').submit();});$(document).on("click","#deliveryMethodSubmit",function(e){e.preventDefault();$('#selectDeliveryMethodForm').submit();});},bindSavedPayments:function(){$(document).on("click",".js-saved-payments",function(e){e.preventDefault();$.colorbox({href:"#savedpaymentsbody",inline:true,maxWidth:"100%",opacity:0.7,title:$("#savedpaymentstitle").html(),close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){}});})},bindCheckO:function(){let cartEntriesError=false;$('.doFlowSelectedChange').change(function(){if('multistep-pci'===$('#selectAltCheckoutFlow').val()){$('#selectPciOption').show();}else{$('#selectPciOption').hide();}});$('.js-continue-shopping-button').click(function(){window.location=$(this).data("continueShoppingUrl");});$('.js-create-quote-button').click(function(){$(this).prop("disabled",true);window.location=$(this).data("createQuoteUrl");});$('.expressCheckoutButton').click(function(){document.getElementById("expressCheckoutCheckbox").checked=true;});$(document).on("input",".confirmGuestEmail,.guestEmail",function(){if($(".guestEmail").val()===$(".confirmGuestEmail").val()){$(".guestCheckoutBtn").removeAttr("disabled");}else{$(".guestCheckoutBtn").attr("disabled","disabled");}});$('.js-continue-checkout-button').click(function(){const checkoutUrl=$(this).data("checkoutUrl");cartEntriesError=ACC.pickupinstore.validatePickupinStoreCartEntires();if(!cartEntriesError){const expressCheckoutObject=$('.express-checkout-checkbox');if(expressCheckoutObject.is(":checked")){window.location=expressCheckoutObject.data("expressCheckoutUrl");}else{let flow=$('#selectAltCheckoutFlow').val();if(flow===undefined||flow===''||flow==='select-checkout'){window.location=checkoutUrl;}else{if('multistep-pci'===flow){flow='multistep';}
window.location=checkoutUrl+'/select-flow?flow='+flow+'&pci='+$('#selectPciOption').val();}}}
return false;});}};ACC.checkoutsteps={_autoload:["permeateLinks"],permeateLinks:function(){$(document).on("click",".js-checkout-step",function(e){e.preventDefault();window.location=$(this).closest("a").attr("href")})}};ACC.forgottenpassword={_autoload:[["bindForgottenPasswordValidation",$("#shrForgottenPasswordIdentificationForm").length>0],["doInitialValidation",$("#shrForgottenPasswordIdentificationForm").length>0],["bindForgottenPasswordOtpSubmit",$("#shrForgottenPasswordIdentificationForm").length>0],["bindResendOtpAction",$("#shrForgottenPasswordIdentificationForm").length>0],["bindResendEmailAction",$("#shrForgottenPasswordIdentificationForm").length>0],["bindBackArrowClick",$(".js-forgotten-password-back-arrow").length>0],["gaEventsTriggers",$(".forgotten-password-identification-submit").length>0],["bindNewPasswordValidation",$("#shrSetPasswordForm").length]],bindForgottenPasswordValidation:function(){$.validator.addMethod("emailOrMobile",function(value,element){return this.optional(element)||($.isNumeric(value)?ACC.validations.validateMobileNumber(value):ACC.validations.validateEmail(value));},loc("input.enter.email.or.phone"));$.validator.addMethod("validUsername",function(){return!$(".js-forgotten-password-username").attr("data-invalid-user");},loc("forgotten.password.invalid.username"));const forgottenPasswordForm=$("#shrForgottenPasswordIdentificationForm");if(forgottenPasswordForm.length>0){forgottenPasswordForm.validate({errorElement:'span',errorClass:'sr-error',rules:{username:{required:true,emailOrMobile:true,validUsername:true}},errorPlacement:function(error,element){element.parent().append(error);},onkeyup:function(){ACC.validations.validateForm(forgottenPasswordForm);},onfocusout:function(element){this.element(element);},submitHandler:function(form){if($(form).data("useAjax")){ACC.forgottenpassword.loadPageViaAjax($(form).attr("action"));}else{form.submit();}}});}},loadPageViaAjax:function(targetUrl){$(".loading-background").show();$.ajax({type:"POST",url:targetUrl,data:$("#shrForgottenPasswordIdentificationForm").serialize(),success:function(data){$(".loading-background").hide();if($(data).hasClass("js-ajax-redirect")){window.location.href=$(data).data("redirectUrl");}else if($(data).hasClass("js-forgotten-password-section")){$(".js-forgotten-password-section").replaceWith(data);ACC.forgottenpassword.bindForgottenPasswordValidation();ACC.forgottenpassword.doInitialValidation();ACC.global.loadActionsForm();ACC.global.loadInputEffect();ACC.otp.reloadOtpBindings();ACC.otp.bindOtpCountdown();}}});},doInitialValidation:function(){const forgottenPasswordForm=$("#shrForgottenPasswordIdentificationForm");const username=forgottenPasswordForm.find("#username");if(username.val()){ACC.validations.validateForm(forgottenPasswordForm);$(".js-forgotten-password-username").removeAttr("data-invalid-user");}},bindForgottenPasswordOtpSubmit:function(){$(document).on("click",".js-forgotten-password-otp .js-otp-submit",function(e){e.preventDefault();const forgottenPasswordForm=$("#shrForgottenPasswordIdentificationForm");const forgottenPasswordOtpInput=$("#otp");const otpInput=$("#oneTimePin");forgottenPasswordOtpInput.val(otpInput.val());forgottenPasswordForm.submit();});},bindResendOtpAction:function(){$(document).on("click",".js-resend-otp",function(e){e.preventDefault();ACC.forgottenpassword.loadPageViaAjax($(".js-resend-otp").attr("href"));});},bindResendEmailAction:function(){$(document).on("click",".js-resend-email",function(e){e.preventDefault();ACC.forgottenpassword.loadPageViaAjax($(this).attr("href"));});},bindBackArrowClick:function(){$(document).on("click",".js-forgotten-password-back-arrow",function(e){e.preventDefault();const backUrlAjax=$(".js-forgotten-password-section").data("backUrlAjax");if(backUrlAjax){ACC.forgottenpassword.loadPageViaAjax(backUrlAjax);}else{window.location.href=$(this).attr("href");}});},gaEventsTriggers:function(){const forgottenPasswordIdentificationButton=$(".forgotten-password-identification-submit");if(forgottenPasswordIdentificationButton.length>0){forgottenPasswordIdentificationButton.on("click",function(){const formForgottenPassword=$(this).parents("form");const forgottenPasswordData={"Username":formForgottenPassword.find("[name=username]").val()};let gaForgottenPasswordAction="";$.each(forgottenPasswordData,function(index,element){if(element!==""){gaForgottenPasswordAction+=index+" > ";}});gaForgottenPasswordAction+="Reset";ACC.global.gaEvent("Forgot Password",gaForgottenPasswordAction,"Reset");});}
const forgottenPasswordSetPasswordButton=$(".forgotten-password-set-password-submit");if(forgottenPasswordSetPasswordButton.length>0){forgottenPasswordSetPasswordButton.on("click",function(){ACC.global.gaEvent("Forgot Password","Set Password","Reset");});}
const fpButtonResendLink=$(".fp-button-resend-link");if(fpButtonResendLink.length>0){fpButtonResendLink.on("click",function(){ACC.global.gaEvent("Forgot Password","Resend Link","Reset Password");});}
const setPasswordSubmit=$(".set-password-submit");if(setPasswordSubmit.length>0){setPasswordSubmit.on("click",function(){ACC.global.gaEvent("Forgot Password","Set new password","Reset Password");sessionStorage.setItem("forgotPassword","true");});}
const newPasswordSuccessfullySet=$(".new-password-successfully-set");if(newPasswordSuccessfullySet.length>0){if(sessionStorage.getItem("forgotPassword")!==""&&sessionStorage.getItem("forgotPassword")!==null){ACC.global.gaEvent("Forgot Password","Success","Reset Password");sessionStorage.removeItem("forgotPassword");}}},bindNewPasswordValidation:function(){$.validator.addMethod("isValidPassword",function(value,element){return this.optional(element)||value.length>=8;},loc("form.create.password.invalid"));const setPasswordForm=$("#shrSetPasswordForm");if(setPasswordForm.length>0){setPasswordForm.validate({ignore:'.not-active',errorElement:'span',errorClass:'sr-error',rules:{pwd:{required:true,isValidPassword:true}},errorPlacement:function(error,element){element.parent().append(error);},onkeyup:function(){ACC.validations.validateForm(setPasswordForm);},onfocusout:function(element){this.element(element);},submitHandler:function(){ACC.forgottenpassword.loadConfirmationPageViaAjax(setPasswordForm);}});}},loadConfirmationPageViaAjax:function($form){$(".loading-background").show();const url=$form.attr("action");const formData=$form.serialize();$.ajax({url:url,type:"POST",data:formData,success:function(response){$(".loading-background").hide();const $response=$(response);if($response.hasClass("js-ajax-redirect")){window.location.href=$response.data("redirectUrl");}else{$(".js-forgotten-password-form-section__block").replaceWith($response);ACC.global.jsCountdown();}}});}};ACC.langcurrency={_autoload:["bindLangCurrencySelector"],bindLangCurrencySelector:function(){$('#lang-selector').change(function(){$('#lang-form').submit();});$('#currency-selector').change(function(){$('#currency-form').submit();});}};ACC.minicart={_autoload:["bindMiniCart"],bindMiniCart:function(){$(document).on("click",".js-mini-cart-link",function(e){e.preventDefault();const $this=$(this);const cartName=($this.find(".js-mini-cart-count").html()!==0)?$this.data("miniCartName"):$this.data("miniCartEmptyName");ACC.colorbox.open(ACC.common.encodeHtml(cartName),{href:$this.data("miniCartUrl"),maxWidth:"100%",width:"380px",initialWidth:"380px"});});$(document).on("click",".js-mini-cart-close-button",function(e){e.preventDefault();ACC.colorbox.close();});},updateMiniCartDisplay:function(){const $miniCartLink=$(".js-mini-cart-link");const cartItems=$miniCartLink.data("miniCartItemsText");$.ajax({url:$miniCartLink.data("miniCartRefreshUrl"),cache:false,type:'GET',dataType:'json',success:function(jsonData){const $miniCartCount=$(".js-mini-cart-link .js-mini-cart-count");const $cartItems=$("<span>").addClass("items-desktop hidden-xs hidden-sm").text(" "+cartItems);const $numberItem=$("<span>").addClass("nav-items-total").text(jsonData.miniCartCount).append($cartItems);$miniCartCount.empty();$miniCartCount.append($numberItem);$(".js-mini-cart-link .js-mini-cart-price").text(jsonData.miniCartPrice);}});}};ACC.order={_autoload:["backToOrderHistory","bindMultidProduct"],backToOrderHistory:function(){$(".orderBackBtn > button").on("click",function(){window.location=$(this).data("backToOrders");});},bindMultidProduct:function(){$(document).on("click",'.js-show-multiD-grid-in-order',function(event){ACC.multidgrid.populateAndShowGrid(this,event,true);return false;});$(document).on("click",'.showMultiDGridInOrderOverlay',function(event){ACC.multidgrid.populateAndShowGridOverlay(this,event);});}};ACC.paginationsort={downUpKeysPressed:false,bindAll:function(){this.bindPaginationSort();},bindPaginationSort:function(){ACC.paginationsort.bindSortForm($('#sortForm1'));ACC.paginationsort.bindSortForm($('#sortForm2'));},bindSortForm:function(sortForm){sortForm.change(function(){if(!ACC.paginationsort.downUpPressed){this.submit();}
ACC.paginationsort.downUpPressed=false;});},sortFormIEFix:function(sortOptions,selectedOption){sortOptions.keydown(function(e){if(e.keyCode===38||e.keyCode===40){ACC.paginationsort.downUpPressed=true;}
else if(e.keyCode===13&&selectedOption!==$(this).val()){$(this).parent().submit();}
else{ACC.paginationsort.downUpPressed=false;}});}};$(document).ready(function(){ACC.paginationsort.bindAll();});ACC.payment={activateSavedPaymentButton:function(){$(document).on("click",".js-saved-payments",function(e){e.preventDefault();$.colorbox({href:"#savedpaymentsbody",inline:true,maxWidth:"100%",opacity:0.7,width:"320px",title:$("#savedpaymentstitle").html(),close:'<span class="glyphicon glyphicon-remove"></span>',onComplete:function(){}});})},bindPaymentCardTypeSelect:function(){ACC.payment.filterCardInformationDisplayed();$("#card_cardType").change(function(){const cardType=$(this).val();if(cardType==='024'){$('#startDate, #issueNum').show();}else{$('#startDate, #issueNum').hide();}});},filterCardInformationDisplayed:function(){const cardType=$('#card_cardType').val();if(cardType==='024'){$('#startDate, #issueNum').show();}else{$('#startDate, #issueNum').hide();}}};$(document).ready(function(){ACC.payment.activateSavedPaymentButton();ACC.payment.bindPaymentCardTypeSelect();});ACC.paymentDetails={_autoload:["showRemovePaymentDetailsConfirmation"],showRemovePaymentDetailsConfirmation:function(){$(document).on("click",".removePaymentDetailsButton",function(){const paymentId=$(this).data("paymentId");const popupTitle=$(this).data("popupTitle");ACC.colorbox.open(ACC.common.encodeHtml(popupTitle),{inline:true,href:"#popup_confirm_payment_removal_"+paymentId,onComplete:function(){$(this).colorbox.resize();}});})}};ACC.pickupinstore={_autoload:["bindClickPickupInStoreButton","bindPickupButton","bindPickupClose","bindPickupInStoreSearch"],storeId:"",unbindPickupPaginationResults:function(){$(document).off("click","#colorbox .js-pickup-store-pager-prev")
$(document).off("click","#colorbox .js-pickup-store-pager-next")},bindPickupPaginationResults:function(){const listHeight=$("#colorbox .js-pickup-store-list").height();const $listitems=$("#colorbox .js-pickup-store-list > li");const listItemHeight=$listitems.height();const displayCount=5;const totalCount=$listitems.length;let curPos=0
$("#colorbox .js-pickup-store-pager-item-all").text(totalCount);$("#colorbox .store-navigation-pager").show();checkPosition()
$(document).on("click","#colorbox .js-pickup-store-pager-prev",function(e){e.preventDefault();$listitems.css("transform","translateY("+(curPos+listHeight)+"px)")
curPos=curPos+listHeight;checkPosition("prev");});$(document).on("click","#colorbox .js-pickup-store-pager-next",function(e){e.preventDefault();$listitems.css("transform","translateY("+(curPos-listHeight)+"px)")
curPos=curPos-listHeight;checkPosition("next");});function checkPosition(){const curPage=Math.ceil((curPos/(displayCount*listItemHeight))*-1)+1;$("#colorbox .js-pickup-store-pager-item-from").text(curPage*displayCount-4);const tocount=(curPage*displayCount>totalCount)?totalCount:curPage*displayCount;if(curPage*displayCount-4===1){$("#colorbox .js-pickup-store-pager-prev").hide()}else{$("#colorbox .js-pickup-store-pager-prev").show()}
if(curPage*displayCount>=totalCount){$("#colorbox .js-pickup-store-pager-next").hide()}else{$("#colorbox .js-pickup-store-pager-next").show()}
$("#colorbox .js-pickup-store-pager-item-to").text(tocount);}},bindPickupInStoreQuantity:function(){$('.pdpPickupQtyPlus').click(function(e){e.preventDefault();const inputQty=$('.js-add-pickup-cart #pdpPickupAddtoCartInput');const currentVal=parseInt(inputQty.val());const maxVal=inputQty.data('max');if(!isNaN(currentVal)&&currentVal<maxVal){inputQty.val(currentVal+1);inputQty.change();}});$('.pdpPickupQtyMinus').click(function(e){e.preventDefault();const inputQty=$('.js-add-pickup-cart #pdpPickupAddtoCartInput');const currentVal=parseInt(inputQty.val());const minVal=inputQty.data('min');if(!isNaN(currentVal)&&currentVal>minVal){inputQty.val(currentVal-1);inputQty.change();}});$("body").on("keyup",".js-add-pickup-cart #pdpPickupAddtoCartInput",function(event){const input=$(event.target);input.val(this.value.match(/[0-9]*/));});},bindPickupInStoreSearch:function(){$(document).on('click','#pickupstore_location_search_button',function(){ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(),$('#atCartPage').val(),$('#entryNumber').val(),$(this).parents('form').attr('action'));return false;});$(document).on('keypress','#locationForSearch',function(e){if(e.keyCode===13){e.preventDefault();ACC.pickupinstore.locationSearchSubmit($('#locationForSearch').val(),$('#atCartPage').val(),$('input.entryNumber').val(),$(this).parents('form').attr('action'));return false;}});},bindPickupHereInStoreButtonClick:function(){$(document).on('click','.pickup_add_to_bag_instore_button',function(){$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());});$(document).on('click','.pickup_here_instore_button',function(){$(this).prev('.hiddenPickupQty').val($('#pickupQty').val());ACC.colorbox.close();});},locationSearchSubmit:function(location,cartPage,entryNumber,actionUrl,latitude,longitude){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");$.post({url:actionUrl,data:{locationQuery:location,cartPage:cartPage,entryNumber:entryNumber,latitude:latitude,longitude:longitude},dataType:"text",success:function(response){ACC.pickupinstore.refreshPickupInStoreColumn(response);}});},createListItemHtml:function(data,id){const $rdioEl=$("<input>").attr("type","radio").attr("name","storeNamePost").attr("id","pickup-entry-"+id).attr("data-id",id).addClass("js-pickup-store-input").val(data.displayName);const $spanElStInfo=$("<span>").addClass("pickup-store-info").append($("<span>").addClass("pickup-store-list-entry-name").text(data.displayName)).append($("<span>").addClass("pickup-store-list-entry-address").text(data.line1+" "+data.line2)).append($("<span>").addClass("pickup-store-list-entry-city").text(data.town));const $spanElStAvail=$("<span>").addClass("store-availability").append($("<span>").addClass("available").append(document.createTextNode(data.formattedDistance)).append("<br>").append(data.stockPickupHtml));const $lblEl=$("<label>").addClass("js-select-store-label").attr("for","pickup-entry-"+id).append($spanElStInfo).append($spanElStAvail);return $("<li>").addClass("pickup-store-list-entry").append($rdioEl).append($lblEl);},refreshPickupInStoreColumn:function(data){data=$.parseJSON(data);const $storeList=$('#colorbox .js-pickup-store-list');$storeList.empty();$("#colorbox .js-pickup-component").data("data",data);for(let i=0;i<data["data"].length;i++){$storeList.append(ACC.pickupinstore.createListItemHtml(data["data"][i],i));}
ACC.pickupinstore.unbindPickupPaginationResults();ACC.pickupinstore.bindPickupPaginationResults();const firstInput=$("#colorbox .js-pickup-store-input")[0];$(firstInput).click();$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").removeAttr("disabled");},bindClickPickupInStoreButton:function(){$(document).on("click",".js-pickup-in-store-button",function(e){e.preventDefault();const ele=$(this);const productId="pickupModal_"+$(this).attr('id');let productIdNUM=$(this).attr('id');productIdNUM=productIdNUM.split("_");productIdNUM=productIdNUM[1];const boxContent=$("#popup_store_pickup_form > #pickupModal").clone();const titleHeader=$('#pickupTitle > .pickup-header').html();ACC.colorbox.open(titleHeader,{html:boxContent,width:"960px",onComplete:function(){$("#colorbox .js-add-to-cart-for-pickup-popup, #colorbox .js-qty-selector-minus, #colorbox .js-qty-selector-input, #colorbox .js-qty-selector-plus").attr("disabled","disabled");boxContent.show();ACC.pickupinstore.pickupStorePager();const tabs=$("#colorbox .js-pickup-tabs").accessibleTabs({tabhead:'.tabhead',tabbody:'.tabbody',fx:'show',fxspeed:0,currentClass:'active',autoAnchor:true,cssClassAvailable:true});$("#colorbox #pickupModal *").each(function(){if($(this).attr("data-id")!==undefined){$(this).attr("id",$(this).attr("data-id"));$(this).removeAttr("data-id");}});$("#colorbox input#locationForSearch").focus();$("#colorbox #pickupModal").attr("id",productId);$("#colorbox #"+productId+" .thumb").html(ele.data("imgHtml"));$("#colorbox #"+productId+" .js-pickup-product-price").html(ele.data("productcart"));const variants=ele.data("productcartVariants");const variantsBox=$("#colorbox #"+productId+" .js-pickup-product-variants");$.each(variants,function(key,value){variantsBox.append($("<span>").text(value));});$("#colorbox  #"+productId+" .js-pickup-product-info").html(ele.data("productnameHtml"));const $colorboxFormSearchPOSForm=$("#colorbox #"+productId+" form.searchPOSForm");$colorboxFormSearchPOSForm.attr("action",ele.data("actionurl"));$colorboxFormSearchPOSForm.attr("id","pickup_in_store_search_form_product_"+productIdNUM);const $pdpPickupAddtoCartInput=$('#pdpPickupAddtoCartInput');$("#colorbox #"+productId+" #pdpPickupAddtoCartInput").attr("value",($pdpPickupAddtoCartInput.val()!==undefined?$pdpPickupAddtoCartInput.val():ele.data("value")));$("#colorbox #"+productId+" input#entryNumber").attr("value",ele.data("entrynumber"));$("#colorbox #"+productId+" input#atCartPage").attr("value",ele.data("cartpage"));if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){ACC.pickupinstore.locationSearchSubmit('',$('#atCartPage').val(),ele.data("entrynumber"),ele.data("actionurl"),position.coords.latitude,position.coords.longitude);},function(error){console.log("An error occurred... The error code and message are: "+error.code+"/"+error.message);});}
ACC.product.bindToAddToCartStorePickUpForm();}});})},pickupStorePager:function(){$(document).on("change","#colorbox .js-pickup-store-input",function(e){e.preventDefault();$("#colorbox .js-pickup-tabs li.first a").click();let storeData=$("#colorbox .js-pickup-component").data("data");storeData=storeData["data"];const storeId=$(this).data("id");const $ele=$("#colorbox .display-details");$.each(storeData[storeId],function(key,value){if(key==="url"){$ele.find(".js-store-image").empty();if(value!==""){$ele.find(".js-store-image").append($("<img>").attr("src",value).attr("alt",""));}}else if(key==="productcode"){$ele.find(".js-store-productcode").val(value);}else if(key==="openings"){const $oele=$ele.find(".js-store-"+key);$oele.empty();if(value!==""){$.each(value,function(key2,value2){$oele.append($("<dt>").text(key2));$oele.append($("<dd>").text(value2));});}}else{if(value!==""){$ele.find(".js-store-"+key).text(value);}else{$ele.find(".js-store-"+key).empty();}}});$(document).one("click","#colorbox .js-pickup-map-tab",function(){ACC.pickupinstore.storeId=storeData[storeId];ACC.global.addGoogleMapsApi("ACC.pickupinstore.drawMap");});const $e=$("#colorbox .pickup-store-list-entry input:checked");const $storeId=$("#add_to_cart_storepickup_form .js-store-id");$storeId.attr("id",$e.attr("id"));$storeId.attr("name",$e.attr("name"));$storeId.val($e.val());const $addToCardStorepickupForm=$("#add_to_cart_storepickup_form");if(storeData[storeId]["stockLevel"]>0||storeData[storeId]["stockLevel"]===""){const input=$("#add_to_cart_storepickup_form .js-qty-selector-input");input.data("max",storeData[storeId]["stockLevel"]);ACC.productDetail.checkQtySelector(input,"reset");$addToCardStorepickupForm.show()}else{$addToCardStorepickupForm.hide()}});$(document).on("click",".js-select-store-label",function(){$("#colorbox .js-pickup-component").addClass("show-store");$("#colorbox #cboxTitle .headline-inner").addClass('hidden-xs hidden-sm');$("#colorbox #cboxTitle .back-to-storelist").removeClass('hidden-xs hidden-sm');});$(document).on("click",".js-back-to-storelist",function(){$("#colorbox .js-pickup-component").removeClass("show-store");$("#colorbox #cboxTitle .headline-inner").removeClass('hidden-xs hidden-sm');$("#colorbox #cboxTitle .back-to-storelist").addClass('hidden-xs hidden-sm');});},bindPickupButton:function(){$(document).on("click",".js-pickup-button",function(e){e.preventDefault();const $e=$(this).parent().nextAll(".js-inline-layer");$e.addClass("open");const h=$e.height();$e.removeClass("open");$e.animate({height:h})})},bindPickupClose:function(){$(document).on("click",".js-close-inline-layer",function(e){e.preventDefault();const $e=$(this).parents(".js-inline-layer");$e.animate({height:0})})},checkIfPointOfServiceIsEmpty:function(cartEntryDeliveryModeForm){return(!cartEntryDeliveryModeForm.find('.pointOfServiceName').text().trim().length);},validatePickupinStoreCartEntires:function(){let validationErrors=false;$("form.cartEntryShippingModeForm").each(function(){const formid="#"+$(this).attr('id');if($(formid+' input[value=pickUp][checked]').length&&ACC.pickupinstore.checkIfPointOfServiceIsEmpty($(this))){$(this).addClass("shipError");validationErrors=true;}});if(validationErrors){$('div#noStoreSelected').show().focus();$(window).scrollTop(0);}
return validationErrors;},drawMap:function(){const storeInformation=ACC.pickupinstore.storeId;const $colorboxMapCanvas=$("#colorbox .js-map-canvas");if($colorboxMapCanvas.length>0){$colorboxMapCanvas.attr("id","pickup-map");const centerPoint=new google.maps.LatLng(storeInformation["storeLatitude"],storeInformation["storeLongitude"]);const mapOptions={zoom:13,zoomControl:true,panControl:true,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,center:centerPoint};const map=new google.maps.Map(document.getElementById("pickup-map"),mapOptions);const marker=new google.maps.Marker({position:new google.maps.LatLng(storeInformation["storeLatitude"],storeInformation["storeLongitude"]),map:map,title:storeInformation["name"],icon:"https://maps.google.com/mapfiles/marker"+'A'+".png"});const infowindow=new google.maps.InfoWindow({content:ACC.common.encodeHtml(storeInformation["name"]),disableAutoPan:true});google.maps.event.addListener(marker,'click',function(){infowindow.open(map,marker);});}}};ACC.productDetail={_autoload:["initPageEvents","bindVariantOptions",["alsoAvailableWidth",$(".also-available").length>0],["loadZoomImage",$(".pdp__image__thumb").length>0],["pdpMedias",$(".js-pdp-medias").length>0]],checkQtySelector:function(self,mode){const $qtySelector=$(document).find(self).parents(".js-qty-selector");const input=$qtySelector.find(".js-qty-selector-input");const inputVal=parseInt(input.val());const max=input.data("max");const minusBtn=$qtySelector.find(".js-qty-selector-minus");const plusBtn=$qtySelector.find(".js-qty-selector-plus");$qtySelector.find(".btn").removeAttr("disabled");if(mode==="minus"){if(inputVal!==1){ACC.productDetail.updateQtyValue(self,inputVal-1);if(inputVal-1===1){minusBtn.attr("disabled","disabled");}}else{minusBtn.attr("disabled","disabled");}}else if(mode==="reset"){ACC.productDetail.updateQtyValue(self,1);}else if(mode==="plus"){if(max==="FORCE_IN_STOCK"){ACC.productDetail.updateQtyValue(self,inputVal+1);}else if(inputVal<=max){ACC.productDetail.updateQtyValue(self,inputVal+1);if(inputVal+1===max){plusBtn.attr("disabled","disabled");}}else{plusBtn.attr("disabled","disabled");}}else if(mode==="input"){if(inputVal===1){minusBtn.attr("disabled","disabled");}else if(max==="FORCE_IN_STOCK"&&inputVal>0){ACC.productDetail.updateQtyValue(self,inputVal);}else if(inputVal===max){plusBtn.attr("disabled","disabled");}else if(inputVal<1){ACC.productDetail.updateQtyValue(self,1);minusBtn.attr("disabled","disabled");}else if(inputVal>max){ACC.productDetail.updateQtyValue(self,max);plusBtn.attr("disabled","disabled");}}else if(mode==="focusout"){if(isNaN(inputVal)){ACC.productDetail.updateQtyValue(self,1);minusBtn.attr("disabled","disabled");}else if(inputVal>=max){plusBtn.attr("disabled","disabled");}}},updateQtyValue:function(self,value){const input=$(document).find(self).parents(".js-qty-selector").find(".js-qty-selector-input");const addtocartQty=$(document).find(self).parents(".addtocart-component").find("#addToCartForm").find(".js-qty-selector-input");const configureQty=$(document).find(self).parents(".addtocart-component").find("#configureForm").find(".js-qty-selector-input");input.val(value);addtocartQty.val(value);configureQty.val(value);},initPageEvents:function(){$(document).on("click",'.js-qty-selector .js-qty-selector-minus',function(){ACC.productDetail.checkQtySelector(this,"minus");});$(document).on("click",'.js-qty-selector .js-qty-selector-plus',function(){ACC.productDetail.checkQtySelector(this,"plus");});$(document).on("keydown",'.js-qty-selector .js-qty-selector-input',function(e){if(($(this).val()!==" "&&((e.which>=48&&e.which<=57)||(e.which>=96&&e.which<=105)))||e.which===8||e.which===46||e.which===37||e.which===39||e.which===9){}else if(e.which===38){ACC.productDetail.checkQtySelector(this,"plus");}else if(e.which===40){ACC.productDetail.checkQtySelector(this,"minus");}else{e.preventDefault();}});$(document).on("keyup",'.js-qty-selector .js-qty-selector-input',function(){ACC.productDetail.checkQtySelector(this,"input");ACC.productDetail.updateQtyValue(this,$(this).val());});$(document).on("focusout",'.js-qty-selector .js-qty-selector-input',function(){ACC.productDetail.checkQtySelector(this,"focusout");ACC.productDetail.updateQtyValue(this,$(this).val());});$("#Size").change(function(){changeOnVariantOptionSelection($("#Size option:selected"));});$("#variant").change(function(){changeOnVariantOptionSelection($("#variant option:selected"));});$(".selectPriority").change(function(){window.location.href=$(this[this.selectedIndex]).val();});function changeOnVariantOptionSelection(optionSelected){window.location.href=optionSelected.attr('value');}},bindVariantOptions:function(){ACC.productDetail.bindCurrentStyle();ACC.productDetail.bindCurrentSize();ACC.productDetail.bindCurrentType();},bindCurrentStyle:function(){const currentStyle=$("#currentStyleValue").data("styleValue");const styleSpan=$(".styleName");if(currentStyle!=null){styleSpan.text(": "+currentStyle);}},bindCurrentSize:function(){const currentSize=$("#currentSizeValue").data("sizeValue");const sizeSpan=$(".sizeName");if(currentSize!=null){sizeSpan.text(": "+currentSize);}},bindCurrentType:function(){const currentSize=$("#currentTypeValue").data("typeValue");const sizeSpan=$(".typeName");if(currentSize!=null){sizeSpan.text(": "+currentSize);}},alsoAvailableWidth:function(){const alsoAvailable=$(".also-available");const contentAlsoAvailable=alsoAvailable.find(".also-available__items__content");const itemsAlsoAvailable=alsoAvailable.find(".also-available__item");contentAlsoAvailable.css({"width":(itemsAlsoAvailable.outerWidth()*itemsAlsoAvailable.length)+(parseInt(itemsAlsoAvailable.css("margin-right"))*(itemsAlsoAvailable.length-1)),"height":"auto"});},loadZoomImage:function(){const device=navigator.userAgent.toLowerCase();const pdpImageThumb=$(".pdp__image__thumb");const pdpImagePreview=$(".pdp__image__preview");if(device.search(/iphone|ipod|ipad|android/)>0){const body=$("body");const modalPdp="<div class='pdp__modal'>"+"<div class='pdp__modal__content'>"+"<button class='pdp__modal__close'><i class='shoprite-icon-close'></i></button>"+"<div class='pdp__modal__body'>"+"<div class='pdp__modal__image-container'>"+"<img class='pdp__modal__image' src='"+pdpImageThumb.attr("src")+"'>"+"</div>"+"</div>"+"</div>"+"</div>";body.append(modalPdp);const pdpModal=$(".pdp__modal");const pdpModalClose=pdpModal.find(".pdp__modal__close");let isLoaded=false;pdpImageThumb.on("click",function(){pdpModal.addClass("is-show");$("html").addClass("block");if(!isLoaded){const el=document.querySelector('.pdp__modal__image-container');const pz=new PinchZoom.default(el,{maxZoom:8,draggableUnzoomed:false});isLoaded=true;}});pdpModalClose.on("click",function(){pdpModal.removeClass("is-show");$("html").removeClass("block");})}else{const drift=new Drift(pdpImageThumb[0],{paneContainer:pdpImagePreview[0],inlinePane:900,inlineOffsetY:-85,containInline:true,hoverBoundingBox:true});}},pdpMedias:function(){const jsPdpMedias=$(".js-pdp-medias");const imageFull=jsPdpMedias.find(".pdp__medias__image-full");const images=jsPdpMedias.find(".pdp__medias__image");if(images.length>0){imageFull.html("<img src='"+images.eq(0).find("img").data("zoom")+"'>");images.on("click",function(){const image=$(this);const img=image.find("img");imageFull.html("<img src='"+img.data("zoom")+"'>");images.removeClass("is-active");image.addClass("is-active");});}}};ACC.quickview={_autoload:["bindToUiCarouselLink"],initQuickviewLightbox:function(){ACC.product.enableAddToCartButton();ACC.product.bindToAddToCartForm();ACC.product.enableStorePickupButton();},refreshScreenReaderBuffer:function(){$('#accesibility_refreshScreenReaderBufferField').attr('value',new Date().getTime());},bindToUiCarouselLink:function(){$(".js-owl-carousel-reference .js-reference-item").colorbox({close:'<span class="glyphicon glyphicon-remove"></span>',title:$('#quickViewTitle').html(),maxWidth:"100%",onComplete:function(){ACC.quickview.refreshScreenReaderBuffer();ACC.quickview.initQuickviewLightbox();ACC.ratingstars.bindRatingStars($(".quick-view-stars"));},onClosed:function(){ACC.quickview.refreshScreenReaderBuffer();}});}};ACC.ratingstars={_autoload:[["bindRatingStars",$(".js-ratingCalc").length>0],["bindRatingStarsSet",$(".js-ratingCalcSet").length>0]],bindRatingStars:function(){$(".js-ratingCalc").each(function(){const rating=$(this).data("rating");$(this).find(".js-greenStars").width($(this).width()*(parseFloat(rating.rating,10)/rating.total))})},bindRatingStarsSet:function(){$('.js-writeReviewStars').on({mouseleave:function mouseleave(){clearReviewState();const sV=(parseFloat($(".js-ratingSetInput").val(),10))*2;(typeof sV==="number"&&!isNaN(sV))?setReviewState(sV):clearReviewState();}});const ratingIcons=$('.js-writeReviewStars .js-ratingIcon');const setReviewState=function(index){ratingIcons.slice(0,parseFloat(index,10)).addClass('active');};const clearReviewState=function(){ratingIcons.removeClass('active');};ratingIcons.on({mouseenter:function mouseenter(){clearReviewState();setReviewState($(this).index()+1);},mouseleave:function mouseleave(){$(this).removeClass('active');},click:function click(){$(".js-ratingSetInput").val(($(this).index()+1)/2);}});}};ACC.silentorderpost={spinner:$("<img>").attr("src",ACC.config.commonResourcePath+"/images/spinner.gif"),bindUseDeliveryAddress:function(){const $useDeliveryAddress=$('#useDeliveryAddress');$useDeliveryAddress.on('change',function(){if($useDeliveryAddress.is(":checked")){const options={'countryIsoCode':$('#useDeliveryAddressData').data('countryisocode'),'useDeliveryAddress':true};ACC.silentorderpost.enableAddressForm();ACC.silentorderpost.displayCreditCardAddressForm(options,ACC.silentorderpost.useDeliveryAddressSelected);ACC.silentorderpost.disableAddressForm();}else{ACC.silentorderpost.clearAddressForm();ACC.silentorderpost.enableAddressForm();}});if($useDeliveryAddress.is(":checked")){const options={'countryIsoCode':$('#useDeliveryAddressData').data('countryisocode'),'useDeliveryAddress':true};ACC.silentorderpost.enableAddressForm();ACC.silentorderpost.displayCreditCardAddressForm(options,ACC.silentorderpost.useDeliveryAddressSelected);ACC.silentorderpost.disableAddressForm();}},bindSubmitSilentOrderPostForm:function(){$('.submit_silentOrderPostForm').click(function(){$('.billingAddressForm').filter(":hidden").remove();ACC.silentorderpost.enableAddressForm();$('#silentOrderPostForm').submit();});},bindCycleFocusEvent:function(){$('#lastInTheForm').blur(function(){$('#silentOrderPostForm [tabindex$="10"]').focus();})},isEmpty:function(obj){return typeof obj=='undefined'||obj===null||obj==='';},disableAddressForm:function(){$('input[id^="address\\."]').prop('disabled',true);$('select[id^="address\\."]').prop('disabled',true);},enableAddressForm:function(){$('input[id^="address\\."]').prop('disabled',false);$('select[id^="address\\."]').prop('disabled',false);},clearAddressForm:function(){$('input[id^="address\\."]').val("");$('select[id^="address\\."]').val("");},useDeliveryAddressSelected:function(){const $useDeliveryAddress=$('#useDeliveryAddress');if($useDeliveryAddress.is(":checked")){if(ACC.silentorderpost.isEmpty($('#address\\.country').val($('#useDeliveryAddressData').data('countryisocode')).val())){$useDeliveryAddress.click();$useDeliveryAddress.parent().hide();}else{ACC.silentorderpost.disableAddressForm();}}else{ACC.silentorderpost.clearAddressForm();ACC.silentorderpost.enableAddressForm();}},bindCreditCardAddressForm:function(){$('#billingCountrySelector :input').on("change",function(){const options={'countryIsoCode':$(this).val(),'useDeliveryAddress':false};ACC.silentorderpost.displayCreditCardAddressForm(options);})},displayCreditCardAddressForm:function(options,callback){$.ajax({url:ACC.config.encodedContextPath+'/checkout/multi/sop/billingaddressform',async:true,data:options,dataType:"html",beforeSend:function(){$('#billingAddressForm').html(ACC.silentorderpost.spinner);}}).done(function(data){$("#billingAddressForm").html(data);if(typeof callback=='function'){callback.call();}});}};$(document).ready(function(){ACC.silentorderpost.bindUseDeliveryAddress();ACC.silentorderpost.bindSubmitSilentOrderPostForm();ACC.silentorderpost.bindCreditCardAddressForm();$("#useDeliveryAddress").click();});ACC.termsandconditions={bindTermsAndConditionsLink:function(){$(document).on("click",".termsAndConditionsLink",function(e){e.preventDefault();$.colorbox({maxWidth:"100%",maxHeight:"80%",width:"870px",scrolling:true,href:$(this).attr("href"),close:'<span class="glyphicon glyphicon-remove"></span>',title:'<div class="headline"><span class="headline-text">Terms and Conditions</span></div>',onComplete:function(){ACC.common.refreshScreenReaderBuffer();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});},handleRegisterChkTermsConditionsChange:function(){$("#registerChkTermsConditions").change(function(e){e.preventDefault();const form=$(this).parents('form:first');const btnSubmit=form.find(':submit');if($(this).is(':checked')){btnSubmit.prop('disabled',false);}else{btnSubmit.prop('disabled',true);}});}}
$(function(){ACC.termsandconditions.bindTermsAndConditionsLink();ACC.termsandconditions.handleRegisterChkTermsConditionsChange();$("#registerChkTermsConditions").removeAttr("disabled");$('[name="consentForm.consentGiven"]').removeAttr("disabled");});ACC.storefinderdetails={_autoload:[["initGoogleMap",$("#store-details-page").length>0],"bindMobileMap","contactStore","openingHours"],latitude:"",longitude:"",directionsService:null,directionsDisplay:null,initGoogleMap:function(){ACC.storefinderdetails.latitude=$("#geoPointLatitude").val();ACC.storefinderdetails.longitude=$("#geoPointLongitude").val();ACC.global.addGoogleMapsApi("ACC.storefinderdetails.loadStoreGoogleMap");},loadStoreGoogleMap:function(){const $storeDetailsMap=$("#store-details-map");if($storeDetailsMap.length>0){ACC.storefinderdetails.directionsService=new google.maps.DirectionsService;ACC.storefinderdetails.directionsDisplay=new google.maps.DirectionsRenderer;const centerPoint=new google.maps.LatLng(ACC.storefinderdetails.latitude,ACC.storefinderdetails.longitude);const mapOptions={zoom:13,disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP,center:centerPoint};const map=new google.maps.Map(document.getElementById("store-details-map"),mapOptions);ACC.storefinderdetails.directionsDisplay.setMap(map);const marker=new google.maps.Marker({position:new google.maps.LatLng(ACC.storefinderdetails.latitude,ACC.storefinderdetails.longitude),map:map,icon:ACC.config.googleMapIconPath});const zoomControlDiv=document.createElement('div');zoomControlDiv.setAttribute("class","zoom-controls");const zoomControl=ACC.storefinderdetails.createCustomZoomMapControls(zoomControlDiv,map);zoomControlDiv.index=1;map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(zoomControlDiv);if(ACC.config.googleLoadDirections){ACC.storefinderdetails.getDirections(ACC.storefinderdetails.directionsService,ACC.storefinderdetails.directionsDisplay,ACC.storefinderdetails.latitude,ACC.storefinderdetails.longitude);}}},bindMobileMap:function(){$("#js-map-button").click(function(){$("#caret1").toggleClass("glyphicon-chevron-up").toggleClass("glyphicon-chevron-down");})},contactStore:function(){$('.js-contact-store-btn').on("click",function(){var phoneNumber="tel://"+$("#store-phone-number").text();window.open(phoneNumber);});},getDirections:function(directionsService,directionsDisplay,storeLat,storeLng){ACC.storefinder.initLocation();const storeLocation=new google.maps.LatLng(storeLat,storeLng);const userLocation=new google.maps.LatLng(ACC.storefinder.coords.latitude,ACC.storefinder.coords.longitude);const request={origin:userLocation,destination:storeLocation,travelMode:'DRIVING'};directionsService.route(request,function(result,status){if(status==="OK"){directionsDisplay.setDirections(result);}});},calcDistance:function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){const userLocation=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);const storeLocation=new google.maps.LatLng(ACC.storefinderdetails.latitude,ACC.storefinderdetails.longitude);const service=new google.maps.DistanceMatrixService();service.getDistanceMatrix({origins:[userLocation],destinations:[storeLocation],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},function(){if(status==="OK"){$(".store-distance").text(response.rows[0].elements[0].distance.text).show();}});},function(error){$(window).scrollTop(0);let errMsg;if(error.code===error.PERMISSION_DENIED){errMsg='<div class="centered"><div class="location-sharring-off-image"></div><p class="pt-2">Oh no, location sharing is turned off. Update your browser settings.</p></div>';}else if(error.code===error.POSITION_UNAVAILABLE){errMsg='Sorry, the position of the device could not be determined.';}else if(error.code===error.TIMEOUT){errMsg='Sorry, the request to get user location timed out.';}else{errMsg='Sorry, the process failed to retrieve the location of the device due to an unknown error.';}
ACC.colorbox.open('',{html:errMsg,className:'location-error-box',inline:false,width:408,close:'<span class="ASM_icon ASM_icon-close"></span>',scrolling:false,onOpen:function(){ACC.colorbox.resize();},onClosed:function(){$(window).off("resize",colorboxResize);}});});}},openingHours:function(){const days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];const now=new Date();const today=now.getDay();$(".trading-hours-"+days[today]).addClass("today-hours");},createCustomZoomMapControls:function(controlDiv,map){const controlWrapper=document.createElement('div');controlWrapper.setAttribute("class","controls-wrapper");controlDiv.appendChild(controlWrapper);const zoomInButton=document.createElement('div');zoomInButton.setAttribute("class","zoom-in");controlWrapper.appendChild(zoomInButton);const zoomOutButton=document.createElement('div');zoomOutButton.setAttribute("class","zoom-out");controlWrapper.appendChild(zoomOutButton);google.maps.event.addDomListener(zoomInButton,'click',function(){map.setZoom(map.getZoom()+1);});google.maps.event.addDomListener(zoomOutButton,'click',function(){map.setZoom(map.getZoom()-1);});if(navigator.geolocation){function handlePosition(position){const latitude=position.coords.latitude;const longitude=position.coords.longitude;if(latitude&&longitude){const latLon=new google.maps.LatLng(latitude,longitude);const centerButton=document.createElement('div');centerButton.setAttribute("class","zoom-center");controlWrapper.prepend(centerButton);google.maps.event.addDomListener(centerButton,'click',function(){map.panTo(latLon);});}}
navigator.geolocation.getCurrentPosition(handlePosition);}}};ACC.futurelink={_autoload:["bindFutureStockLink"],bindFutureStockLink:function(){$(document).on("click",".futureStockLink",function(e){e.preventDefault();const url=$(this).attr("href");const title=$(this).attr("title");ACC.colorbox.open(ACC.common.encodeHtml(title),{href:url,maxWidth:"100%",width:"320px",height:"320px",initialWidth:"320px"});})}};ACC.productorderform={_autoload:["headerActions","coreTableActions","addToCartOrderGridForm"],$addToCartOrderForm:$("#AddToCartOrderForm"),$addToCartBtn:$('#addToCartBtn'),$omsErrorMessageContainer:$("#globalMessages"),$emptySkuQuantityInputs:$(".sku-quantity[value]"),$nonEmptySkuQuantityInputs:$(".sku-quantity[value]"),$totalGridValues:$("[data-grid-total-id]"),$futureTooltipTemplate:$("#future-stock-template"),$futureTooltipErrorTemplate:$("#future-tooltip-error-template"),$omsErrorMessageTemplate:$("#oms-error-message-template"),$variantSummaryTemplate:$("#variant-summary"),selectedVariantData:'selected-variant',selectedVariants:[],quantityTotal:0,scrollTopPos:0,headerActions:function(){ACC.productorderform.bindProductDetailToggle($(".product-details-toggle"));},coreTableActions:function(){ACC.productorderform.coreTableScrollActions(ACC.productorderform.$addToCartOrderForm);ACC.productorderform.bindUpdateFutureStockButton(".update_future_stock_button");ACC.productorderform.bindHideFutureStockInfo(".hide_future_stock_info");ACC.productorderform.bindVariantSelect($(".variant-select-btn"),'AddToCartOrderForm');ACC.productorderform.cancelVariantModal(".closeVariantModal");ACC.productorderform.checkLimitExceed(".sku-quantity");const skuQuantityClass='.sku-quantity';const skuVariantQuantityClass='#cboxContent .sku-quantity';const $body=$('body');let quantityBefore=0;let quantityAfter=0;ACC.productorderform.$addToCartOrderForm.on('click',skuQuantityClass,function(){$(this).select();});ACC.productorderform.$addToCartOrderForm.on('focusin',skuQuantityClass,function(){quantityBefore=jQuery.trim(this.value);$(this).parents('tr').next('.variant-summary').remove();if($(this).parents('table').data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=$(this).parents('table').data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
if(quantityBefore===""){quantityBefore=0;this.value=0;}});$(document).find(skuQuantityClass).on('blur keypress',function(event){const code=event.keyCode||event.which||event.charCode;if(code!==13&&code!==undefined){return;}
const indexPattern="[0-9]+";const currentIndex=parseInt($(this).attr("id").match(indexPattern));let totalPrice=0;const _this=this;const currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();this.value=ACC.productorderform.filterSkuEntry(this.value);const $currentTotalItems=$('.js-total-items-count');let currentTotalItemsValue=$currentTotalItems.html();const $totalPriceValue=$('.js-total-price-value');let currentTotalPrice=$totalPriceValue.val();const $gridGroup=$(this).parents('.orderForm_grid_group');if(isNaN(jQuery.trim(this.value))){this.value=0;}
quantityAfter=jQuery.trim(this.value);if(quantityAfter===""){quantityAfter=0;this.value=0;}
if(ACC.orderform){if(sessionStorage.totalItems!==undefined&&sessionStorage.totalPriceVal!==undefined){currentTotalItemsValue=sessionStorage.totalItems;currentTotalPrice=sessionStorage.totalPriceVal;}
if(quantityBefore===0){$currentTotalItems.html(parseInt(currentTotalItemsValue)+parseInt(quantityAfter));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*parseInt(quantityAfter);}else{$currentTotalItems.html(parseInt(currentTotalItemsValue)+(parseInt(quantityAfter)-parseInt(quantityBefore)));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore));}
sessionStorage.totalPrice=ACC.productorderform.formatTotalsCurrency(totalPrice);sessionStorage.totalItems=$currentTotalItems.html();sessionStorage.totalPriceVal=totalPrice;ACC.orderform.addToSkuQtyInput(_this);}else if($gridGroup&&$gridGroup.length>0){const $closestQuantityValue=$gridGroup.find('#quantityValue');const $closestAvgPriceValue=$gridGroup.find('#avgPriceValue');const $closestSubtotalValue=$gridGroup.find('#subtotalValue');const currentQuantityValue=$closestQuantityValue.val();const currentSubtotalValue=$closestSubtotalValue.val();if(quantityBefore===0){$closestQuantityValue.val(parseInt(currentQuantityValue)+parseInt(quantityAfter));$closestSubtotalValue.val(parseFloat(currentSubtotalValue)+parseFloat(currentPrice)*parseInt(quantityAfter));$currentTotalItems.html(parseInt(currentTotalItemsValue)+parseInt(quantityAfter));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*parseInt(quantityAfter);}else{$closestQuantityValue.val(parseInt(currentQuantityValue)+(parseInt(quantityAfter)-parseInt(quantityBefore)));$closestSubtotalValue.val(parseFloat(currentSubtotalValue)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore)));$currentTotalItems.html(parseInt(currentTotalItemsValue)+(parseInt(quantityAfter)-parseInt(quantityBefore)));totalPrice=parseFloat(currentTotalPrice)+parseFloat(currentPrice)*(parseInt(quantityAfter)-parseInt(quantityBefore));}
ACC.productorderform.enableBeforeUnloadEvent(quantityAfter,$currentTotalItems.text());if($currentTotalItems.length!==0&&$currentTotalItems.text()===0){ACC.productorderform.$addToCartBtn.attr('disabled','disabled');$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler);}else{ACC.productorderform.$addToCartBtn.removeAttr('disabled');}
if(parseInt($closestQuantityValue.val())>0){$closestAvgPriceValue.val(parseFloat($closestSubtotalValue.val())/parseInt($closestQuantityValue.val()));}else{$closestAvgPriceValue.val(0);}}
if($gridGroup&&$gridGroup.length>0){let gridLevelTotalPrice="";const $gridTotalValue=$gridGroup.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");if(quantityAfter>0){gridLevelTotalPrice=ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityAfter));}
$gridTotalValue.html(gridLevelTotalPrice);ACC.productorderform.updateSelectedVariantGridTotal(this,quantityBefore,false,false);}
$('.js-total-price').html(ACC.productorderform.formatTotalsCurrency(totalPrice));$totalPriceValue.val(totalPrice);});$body.on('focusin',skuVariantQuantityClass,function(){quantityBefore=jQuery.trim(this.value);const currentVariantId=$(this).data('variant-id');const currentBaseInput=$("#AddToCartOrderForm, #cartOrderGridForm").find("[data-variant-id='"+currentVariantId+"']");currentBaseInput.trigger('focusin');currentBaseInput.parents('table').find('.variant-summary').remove();if(currentBaseInput.parents('table').data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=currentBaseInput.parents('table').data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
if(quantityBefore===""){quantityBefore=0;this.value=0;}});$body.on('blur',skuVariantQuantityClass,function(){const priceSibling=$(this).siblings('.price');const totalSibling=$(this).siblings('.data-grid-total');const currentVariantId=$(this).data('variant-id');const currentBaseInput=$("#AddToCartOrderForm, #cartOrderGridForm").find("[data-variant-id='"+currentVariantId+"']");this.value=ACC.productorderform.filterSkuEntry(this.value);if(isNaN(jQuery.trim(this.value))||this.value<0||this.value===""){this.value=0;}
currentBaseInput.val(this.value);currentBaseInput.trigger('blur');ACC.productorderform.updateVariantTotal(priceSibling,this.value,totalSibling);if(this.value>0&&this.value!==quantityBefore){currentBaseInput.parents('table').addClass('selected');currentBaseInput.trigger('change');}else{if(ACC.productorderform.selectedVariants.length===0){currentBaseInput.parents('table').removeClass('selected');}}});},updateSelectedVariantGridTotal:function(_this,quantityBefore,isFillQty,resetSummary){const priceSibling=$(_this).siblings('.price');const propSibling=$(_this).siblings('.variant-prop');const currentSkuId=$(_this).next('.td_stock').data('sku-id');const currentBaseTotal=$(_this).siblings('.data-grid-total');if(isFillQty){ACC.productorderform.selectedVariants=[];}
if(_this.value!==quantityBefore){let newVariant=true;ACC.productorderform.selectedVariants.forEach(function(item,index){if(item.id===currentSkuId){newVariant=false;if(_this.value==='0'||_this.value===0){ACC.productorderform.selectedVariants.splice(index,1);}else{ACC.productorderform.selectedVariants[index].quantity=_this.value;ACC.productorderform.selectedVariants[index].total=ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal);}}});if(newVariant&&_this.value>0){ACC.productorderform.selectedVariants.push({id:currentSkuId,size:propSibling.data('variant-prop'),quantity:_this.value,total:ACC.productorderform.updateVariantTotal(priceSibling,_this.value,currentBaseTotal)});}}
if(resetSummary){$(_this).parents('table').find('.variant-summary').remove();}
ACC.productorderform.showSelectedVariant($(_this).parents('table'));if(_this.value>0&&_this.value!==quantityBefore){$(_this).parents('table').addClass('selected');}else{if(ACC.productorderform.selectedVariants.length===0){$(_this).parents('table').removeClass('selected').find('.variant-summary').remove();}}},updateVariantTotal:function(priceSibling,quantity,totalElement){const variantTotal=parseFloat(priceSibling.data('variant-price'))*parseInt(quantity);totalElement.html(ACC.productorderform.formatTotalsCurrency(variantTotal));return ACC.productorderform.formatTotalsCurrency(variantTotal);},bindUpdateFutureStockButton:function(updateFutureStockButton){$('body').on('click',updateFutureStockButton,function(event){event.preventDefault();const $gridContainer=$(this).parents('.orderForm_grid_group').find(".product-grid-container");const $skus=jQuery.map($gridContainer.find("input[type='hidden'].sku"),function(o){return o.value});const skusId=$(this).data('skusId');const futureStockUrl=$(this).data('skusFutureStockUrl');const postData={skus:$skus,productCode:skusId};const hideFutureStockInfo=$(this).parent().find(".hide_future_stock_info");const showFutureStockLink=$(this);$.ajax({url:futureStockUrl,type:'POST',data:postData,traditional:true,dataType:'json',success:function(data){ACC.productorderform.updateFuture($gridContainer,$skus,data,skusId,showFutureStockLink,hideFutureStockInfo);},error:function(xht,textStatus,ex){console.log("Failed to get delivery modes. Error details ["+xht+", "+textStatus+", "+ex+"]");}});});},bindHideFutureStockInfo:function(hideFutureStockInfoLink){$('body').on('click',hideFutureStockInfoLink,function(event){event.preventDefault();const gridContainer=$(this).parent().parent().find(".product-grid-container");const updateFutureStockInfo=$(this).parent().find(".update_future_stock_button");updateFutureStockInfo.show();$(this).hide();const cell=gridContainer.find("[data-sku-id]");cell.children(".future_stock, .out-of-stock").remove();});},updateFuture:function(gridContainer,skus,freshData,callerId,showFutureStockInfoLink,hideFutureStockInfo){ACC.productorderform.$omsErrorMessageContainer.find("div").remove();function isEmpty(obj){return(Object.keys(obj).length<=0);}
if(freshData!==null&&typeof freshData['basket.page.viewFuture.unavailable']!=='undefined'){$.tmpl(ACC.productorderform.$omsErrorMessageTemplate,{errorMessage:freshData['basket.page.viewFuture.unavailable']}).appendTo(ACC.productorderform.$omsErrorMessageContainer);}else{if(!isEmpty(freshData)){showFutureStockInfoLink.hide();hideFutureStockInfo.css("display","block");$.each(skus,function(index,skuId){const stocks=freshData[skuId];const cell=gridContainer.find("[data-sku-id='"+skuId+"']");const isCurrentlyInStock=cell[0].attributes['class'].nodeValue.indexOf("in-stock")!==-1;const futureStockPresent=typeof stocks!=='undefined'&&stocks!==null&&stocks[0]!==null&&typeof stocks[0]!=='undefined';cell.children(".future_stock, .out-of-stock").remove();if(futureStockPresent){if(!isCurrentlyInStock){cell.addClass("future-stock");}
$.tmpl(ACC.productorderform.$futureTooltipTemplate,{formattedDate:stocks[0].formattedDate,availabilities:stocks}).appendTo(cell);}else{if(!isCurrentlyInStock){cell[0].attributes['class'].nodeValue="td_stock out-of-stock";}}});}}},toJSON:function(gridForm,skipZeroQuantity){const skus=gridForm.find("input.sku").map(function(index,element){return element.value}),skuQuantities=gridForm.find("input.sku-quantity").map(function(index,element){return parseInt(element.value)}),skusAsJSON=[];for(let i=0;i<skus.length;i++){if(!(skipZeroQuantity&&skuQuantities[i]===0)){skusAsJSON.push({"product":{"code":skus[i]},"quantity":skuQuantities[i]});}}
return JSON.stringify({"cartEntries":skusAsJSON});},formatTotalsCurrency:function(amount){return Currency.formatMoney(Number(amount).toFixed(2),Currency.money_format[ACC.common.currentCurrency]);},cleanValues:function(){if($(".orderForm_grid_group").length!==0){const formattedTotal=ACC.productorderform.formatTotalsCurrency('0.00');$('.js-total-price').html(formattedTotal);$('#quantity, .js-total-items-count').html(0);$('#quantityValue, #avgPriceValue, #subtotalValue, .js-total-price-value').val(0);ACC.productorderform.$emptySkuQuantityInputs.val(0);ACC.productorderform.$totalGridValues.html("");}},calculateGrid:function(){ACC.productorderform.$nonEmptySkuQuantityInputs.trigger('focusout');},bindProductDetailToggle:function(productDetailToggle){productDetailToggle.on("click",function(event){event.preventDefault();$(this).parents('.product-details').toggleClass('open');});},showSelectedVariant:function(currentVariant){$.tmpl(ACC.productorderform.$variantSummaryTemplate,{variants:ACC.productorderform.selectedVariants}).appendTo(currentVariant);$('.variant-summary .variant-property').text($('.variant-detail').data('variant-property'));currentVariant.data(ACC.productorderform.selectedVariantData,ACC.productorderform.selectedVariants);currentVariant.removeClass('currentVariant');},bindVariantSelect:function(variantSelectBtn,parentId){variantSelectBtn.on("click",function(event){event.preventDefault();const currentVariant=$(this).parents('table');const $body=$('body');if(currentVariant.data(ACC.productorderform.selectedVariantData)){ACC.productorderform.selectedVariants=currentVariant.data(ACC.productorderform.selectedVariantData);}else{ACC.productorderform.selectedVariants=[];}
const titleHeader=variantSelectBtn.html();const tableWrap=$(document).find('#'+parentId).clone().empty().attr('id',ACC.common.encodeHtml(parentId)+'Variant');currentVariant.addClass('currentVariant');const popupContent=$(this).parents('.orderForm_grid_group').clone();currentVariant.removeClass('currentVariant');$(popupContent).find('.currentVariant').siblings().remove();tableWrap.html(popupContent);tableWrap.find('.hidden-xs').removeClass('hidden-xs');tableWrap.find('.hide').removeClass('hide');ACC.productorderform.scrollTopPos=$body.scrollTop();$body.scrollTop(0);ACC.colorbox.open(titleHeader,{html:tableWrap,width:"100%",reposition:false,className:'variantSelectMobile',onCleanup:function(){if(ACC.productorderform.$addToCartOrderForm.find('.selected').length>0){ACC.productorderform.$addToCartBtn.removeAttr('disabled');}else{ACC.productorderform.$addToCartBtn.attr('disabled','disabled');}
$('body').scrollTop(ACC.productorderform.scrollTopPos);}});});},cancelVariantModal:function(closeVariantModal){$('body').on('click',closeVariantModal,function(event){event.preventDefault();ACC.colorbox.close();});},checkLimitExceed:function(closeVariantModal1){$('body').on('keyup blur',closeVariantModal1,function(){const input=Number($(this).val());const stock_amt=Number($(this).attr('data-instock'));if(input>stock_amt)
$(this).val(stock_amt);});},resetSelectedVariant:function(){ACC.productorderform.selectedVariants=[];$('.product-grid-container table').removeData(ACC.productorderform.selectedVariantData).removeClass('selected').removeClass('currentVariant');},addToCartOrderGridForm:function addToCartOrderGridForm(){$("#AddToCartOrderForm").keypress(function(event){if(event.which==='13'){event.preventDefault();}});ACC.productorderform.$addToCartBtn.click(function(){ACC.productorderform.$addToCartBtn.attr('disabled','disabled');$.ajax({url:ACC.productorderform.$addToCartOrderForm.attr("action"),type:'POST',dataType:'json',contentType:'application/json',data:ACC.productorderform.toJSON(ACC.productorderform.$addToCartOrderForm,true),async:false,success:function(response){$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler);ACC.product.displayAddToCartPopup(response);ACC.productorderform.cleanValues();ACC.productorderform.resetSelectedVariant();},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});});},beforeUnloadHandler:function(){return ACC.productorderform.$addToCartOrderForm.attr('data-grid-confirm-message');},enableBeforeUnloadEvent:function(quantityAfter,currentTotalItems){if(!ACC.orderform){if(quantityAfter>0&&currentTotalItems>0){$(window).off('beforeunload',ACC.productorderform.beforeUnloadHandler).on('beforeunload',ACC.productorderform.beforeUnloadHandler);}}},filterSkuEntry:function(quantityInput){let filteredQty=0;if(/\D/g.test(quantityInput)){filteredQty=quantityInput.replace(/\D/g,'');}else{filteredQty=quantityInput;}
return filteredQty;},coreTableScrollActions:function($scrollContent){if($scrollContent.hasClass('visible')){ACC.productorderform.orderGridScroll($scrollContent);const scrollRight=$scrollContent.parent().find('.order-form-scroll.right');const scrollLeft=$scrollContent.parent().find('.order-form-scroll.left');const scrollUp=$scrollContent.parent().find('.order-form-scroll.up');const scrollDown=$scrollContent.parent().find('.order-form-scroll.down');const widthReference=$scrollContent.find('.widthReference').outerWidth();const heightReference=$scrollContent.find('.product-grid-container table').eq(0).height()/2;let maxWidth=0;let maxHeight=0;let widthDiff=0;let heightDiff=0;$scrollContent.find('.product-grid-container table').each(function(){if($(this).outerWidth()>maxWidth){maxWidth=$(this).outerWidth();}});$scrollContent.find('.orderForm_grid_group').each(function(){maxHeight+=$(this).height();});widthDiff=maxWidth-$scrollContent.outerWidth();heightDiff=maxHeight-$scrollContent.height()+14;$scrollContent.scroll(function(){if($(this).scrollLeft()>0){scrollLeft.show();}else{scrollLeft.hide();}
if($(this).scrollLeft()>=widthDiff){scrollRight.hide();}else{scrollRight.show();}
if($(this).scrollTop()>0){scrollUp.show();}else{scrollUp.hide();}
if($(this).scrollTop()>=heightDiff){scrollDown.hide();}else{scrollDown.show();}
$scrollContent.find('.update-future-stock').css('margin-right',-$(this).scrollLeft());});$scrollContent.parent().find('.order-form-scroll').click(function(){const pos={left:$scrollContent.scrollLeft(),top:$scrollContent.scrollTop()};if($(this).hasClass('right')){$scrollContent.scrollLeft(pos.left+widthReference);}else if($(this).hasClass('left')){$scrollContent.scrollLeft(pos.left-widthReference);}else if($(this).hasClass('up')){$scrollContent.scrollTop(pos.top-heightReference);}else{$scrollContent.scrollTop(pos.top+heightReference);}});}},orderGridScroll:function(scrollContent){let showRight=false;let calcHeight=0;const maxWidth=$(scrollContent).find('.orderForm_grid_group').innerWidth();const maxHeight=$(scrollContent).innerHeight()-18;$(scrollContent).find('.product-grid-container table').each(function(){if($(this).width()>maxWidth){showRight=true;}
calcHeight+=$(this).height();});if(showRight){$(scrollContent).parent().find('.order-form-scroll.right').show();}
if(calcHeight>maxHeight){$(scrollContent).parent().find('.order-form-scroll.down').show();}},calculateVariantTotal:function(_this,quantityToAdd){const $gridGroup=_this.parents('.orderForm_grid_group');const indexPattern="[0-9]+";const currentIndex=parseInt(_this.attr("id").match(indexPattern));const currentPrice=$(document).find("input[id='productPrice["+currentIndex+"]']").val();const $gridTotalValue=$gridGroup.find("[data-grid-total-id="+'total_value_'+currentIndex+"]");if(quantityToAdd>0)
$gridTotalValue.html(ACC.productorderform.formatTotalsCurrency(parseFloat(currentPrice)*parseInt(quantityToAdd)));}};ACC.savedcarts={_autoload:[["bindRestoreSavedCartClick",$(".js-restore-saved-cart").length!=0],["bindDeleteSavedCartLink",$('.js-delete-saved-cart').length!=0],["bindDeleteConfirmLink",$('.js-savedcart_delete_confirm').length!=0],["bindSaveCartForm",$(".js-save-cart-link").length!=0||$(".js-update-saved-cart").length!=0],["bindUpdateUploadingSavedCarts",$(".js-uploading-saved-carts-update").length!=0]],$savedCartRestoreBtn:{},$currentCartName:{},bindRestoreSavedCartClick:function(){$(".js-restore-saved-cart").click(function(event){event.preventDefault();const popupTitle=$(this).data('restore-popup-title');const cartId=$(this).data('savedcart-id');const url=ACC.config.encodedContextPath+'/my-account/saved-carts/'+encodeURIComponent(cartId)+'/restore';const popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.common.checkAuthenticationStatusBeforeAction(function(){$.get(url,undefined,undefined,'html').done(function(data){ACC.colorbox.open(popupTitleHtml,{html:data,width:500,onComplete:function(){ACC.common.refreshScreenReaderBuffer();ACC.savedcarts.bindRestoreModalHandlers();ACC.savedcarts.bindPostRestoreSavedCartLink();},onClosed:function(){ACC.common.refreshScreenReaderBuffer();}});});});});},bindRestoreModalHandlers:function(){ACC.savedcarts.$savedCartRestoreBtn=$('.js-save-cart-restore-btn');ACC.savedcarts.$currentCartName=$('.js-current-cart-name');$(".js-prevent-save-active-cart").on('change',function(){if($(this).prop('checked')===true){ACC.savedcarts.$currentCartName.attr('disabled','disabled');ACC.savedcarts.$savedCartRestoreBtn.removeAttr('disabled');}else{ACC.savedcarts.$currentCartName.removeAttr('disabled');const inputVal=ACC.savedcarts.$currentCartName.val();if(inputVal===""&&inputVal.length===0){ACC.savedcarts.$savedCartRestoreBtn.attr('disabled','disabled');}}});ACC.savedcarts.$currentCartName.on('focus',function(){$('.js-restore-current-cart-form').removeClass('has-error');$('.js-restore-error-container').html('');});ACC.savedcarts.$currentCartName.on('blur',function(){if(this.value===""&&this.value.length===0){ACC.savedcarts.$savedCartRestoreBtn.attr('disabled','disabled');}else{ACC.savedcarts.$savedCartRestoreBtn.removeAttr('disabled');}});},bindPostRestoreSavedCartLink:function(){let keepRestoredCart=true;let preventSaveActiveCart=false;$(document).on("click",'.js-keep-restored-cart',function(){keepRestoredCart=$(this).prop('checked');});$(document).on("click",'.js-prevent-save-active-cart',function(){preventSaveActiveCart=$(this).prop('checked');});$(document).on("click",'.js-save-cart-restore-btn',function(event){event.preventDefault();const cartName=$('#activeCartName').val();const url=$(this).data('restore-url');const postData={preventSaveActiveCart:preventSaveActiveCart,keepRestoredCart:keepRestoredCart,cartName:cartName};ACC.common.checkAuthenticationStatusBeforeAction(function(){$.post(url,postData,undefined,'html').done(function(result,data,status){result=ACC.sanitizer.sanitize(result);if(result==="200"){window.location.replace(ACC.config.encodedContextPath+"/cart");}else{const errorMsg=status.responseText.slice(1,-1);$('.js-restore-current-cart-form').addClass('has-error');$('.js-restore-error-container').html(errorMsg);$('.js-savedcart_restore_confirm_modal').colorbox.resize();}});});});$(document).on("click",'.js-cancel-restore-btn',function(){ACC.colorbox.close();});},bindDeleteSavedCartLink:function(){$(document).on("click",'.js-delete-saved-cart',function(event){event.preventDefault();const cartId=$(this).data('savedcart-id');const popupTitle=$(this).data('delete-popup-title');const popupTitleHtml=ACC.common.encodeHtml(popupTitle);ACC.colorbox.open(popupTitleHtml,{inline:true,className:"js-savedcart_delete_confirm_modal",href:"#popup_confirm_savedcart_delete_"+cartId,width:'500px',onComplete:function(){$(this).colorbox.resize();}});});},bindDeleteConfirmLink:function(){$(document).on("click",'.js-savedcart_delete_confirm',function(event){event.preventDefault();const cartId=$(this).data('savedcart-id');const url=ACC.config.encodedContextPath+'/my-account/saved-carts/'+encodeURIComponent(cartId)+'/delete';ACC.common.checkAuthenticationStatusBeforeAction(function(){$.ajax({url:url,type:'DELETE',success:function(){ACC.colorbox.close();window.location.replace(ACC.config.encodedContextPath+"/my-account/saved-carts");}});});});$(document).on("click",'.js-savedcart_delete_confirm_cancel',function(){ACC.colorbox.close();});},bindSaveCartForm:function(){ACC.savedcarts.charactersLeftInit();const form=$('#saveCartForm');let saveCart=false;const showSaveCartFormCallback=function(){const title=$('#saveCart').data("saveCartTitle");const titleHtml=ACC.common.encodeHtml(title);ACC.colorbox.open(titleHtml,{href:"#saveCart",inline:true,width:"620px",onOpen:function(){if($('#saveCartName').val()){ACC.savedcarts.disableSaveCartButton(false);}},onComplete:function(){$(this).colorbox.resize();saveCart=false;},onClosed:function(){if(saveCart){form.submit();}
document.getElementById("saveCartForm").reset();ACC.savedcarts.disableSaveCartButton(true);ACC.savedcarts.charactersLeftInit();}});};$(document).on("click",".js-save-cart-link, .js-update-saved-cart",function(e){e.preventDefault();ACC.common.checkAuthenticationStatusBeforeAction(showSaveCartFormCallback);});$(document).on("click",'#saveCart #cancelSaveCartButton',function(e){e.preventDefault();$.colorbox.close();});$('#saveCartName').keyup(function(){$('#saveCart #saveCartButton').prop('disabled',this.value.trim()==="");const maxchars=255;const value=$('#localized_val').attr('value');const tlength=$(this).val().length;const remain=maxchars-parseInt(tlength);$('#remain').text(value+' : '+remain);});$('#saveCartDescription').keyup(function(){const maxchars=255;const value=$('#localized_val').attr('value');const tlength=$(this).val().length;const remain=maxchars-parseInt(tlength);$('#remainTextArea').text(value+' : '+remain);});$(document).on("click",'#saveCart #saveCartButton',function(e){e.preventDefault();saveCart=true;$.colorbox.close();});},charactersLeftInit:function(){const $localizedVal=$('#localized_val');$('#remain').text($localizedVal.attr('value')+' : 255');$('#remainTextArea').text($localizedVal.attr('value')+' : 255');},disableSaveCartButton:function(value){$('#saveCart #saveCartButton').prop('disabled',value);},bindUpdateUploadingSavedCarts:function(){const $uploadingSavedCardsUpdate=$(".js-uploading-saved-carts-update");const cartIdRowMapping=$uploadingSavedCardsUpdate.data("idRowMapping");const refresh=$uploadingSavedCardsUpdate.data("refreshCart");if(cartIdRowMapping&&refresh){const interval=$uploadingSavedCardsUpdate.data("refreshInterval");const arrCartIdAndRow=cartIdRowMapping.split(',');const mapCartRow={};const cartCodes=[];for(let i=0;i<arrCartIdAndRow.length;i++){const arrValue=arrCartIdAndRow[i].split(":");if(arrValue!==""){mapCartRow[arrValue[0]]=arrValue[1];cartCodes.push(arrValue[0]);}}
if(cartCodes.length>0){setTimeout(function(){ACC.savedcarts.refreshWorker(cartCodes,mapCartRow,interval)},interval);}}},refreshWorker:function(cartCodes,mapCartRow,interval){$.ajax({dataType:"json",url:ACC.config.encodedContextPath+'/my-account/saved-carts/uploadingCarts',data:{cartCodes:cartCodes},type:"GET",traditional:true,success:function(data){if(data!==undefined){const hidden="hidden";const rowId="#row-";for(let i=0;i<data.length;i++){const cart=data[i];const index=$.inArray(cart.code,cartCodes);if(index>-1){cartCodes.splice(index,1)}
const rowIdIndex=mapCartRow[cart.code];if(rowIdIndex!==undefined){const rowSelector=rowId+rowIdIndex;$(document).find(rowSelector+" .js-saved-cart-name").removeClass("not-active");$(document).find(rowSelector+" .js-saved-cart-date").removeClass("hidden");$(document).find(rowSelector+" .js-file-importing").remove();$(document).find(rowSelector+" .js-saved-cart-description").text(cart.description);const numberOfItems=cart.entries.length;$(document).find(rowSelector+" .js-saved-cart-number-of-items").text(numberOfItems);$(document).find(rowSelector+" .js-saved-cart-total").text(cart.totalPrice.formattedValue);if(numberOfItems>0){$(document).find(rowSelector+" .js-restore-saved-cart").removeClass(hidden);}
$(document).find(rowSelector+" .js-delete-saved-cart").removeClass(hidden);}}}
if(cartCodes.length>0){setTimeout(function(){ACC.savedcarts.refreshWorker(cartCodes,mapCartRow,interval)},interval);}}})}};ACC.multidgrid={populateAndShowGridOverlay:function(element,event){event.preventDefault();const itemIndex=$(element).data("index");const gridEntries=$(document).find('#grid'+itemIndex);const strSubEntries=gridEntries.data("sub-entries");const productName=gridEntries.data("product-name");const arrSubEntries=strSubEntries.split(',');const firstVariantCode=arrSubEntries[0].split(':')[0];const targetUrl=gridEntries.data("target-url")+'?productCode='+encodeURIComponent(firstVariantCode);ACC.colorbox.open(ACC.common.encodeHtml(productName),{href:targetUrl,className:'read-only-grid',close:'<span class="glyphicon glyphicon-remove"></span>',width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height,onComplete:function(){const $cboxLoadedContent=$('#cboxLoadedContent');$('body').addClass('offcanvas');const oH=$cboxLoadedContent.height();$cboxLoadedContent.height((oH-$('#cboxTitle').height())+'px');},onClosed:function(){$('body').removeClass('offcanvas');}});},populateAndShowGrid:function(element){const itemIndex=$(element).data("index");const grid=$(document).find("#ajaxGrid"+itemIndex);const gridEntries=$(document).find('#grid'+itemIndex);$(element).toggleClass('open');if(!grid.is(":hidden")){grid.slideUp();return;}
if(grid.html()!==""){grid.slideToggle("slow");return;}
const strSubEntries=gridEntries.data("sub-entries");const arrSubEntries=strSubEntries.split(',');const firstVariantCode=arrSubEntries[0].split(':')[0];$.ajax({url:gridEntries.data("target-url"),data:{productCode:firstVariantCode},type:"GET",dataType:'html',success:function(data){grid.html(data);grid.slideDown("slow");},error:function(xht,textStatus,ex){console.log("Failed to get variant matrix. Error details ["+xht+", "+textStatus+", "+ex+"]");}});}};var ACC=ACC||{};if($("#quickOrder").length>0){ACC.quickorder={_autoload:["bindClearQuickOrderRow","bindAddSkuInputRow","bindResetFormBtn","bindAddToCartClick"],$quickOrderContainer:$('.js-quick-order-container'),$quickOrderMinRows:Number($('.js-quick-order-container').data('quickOrderMinRows')),$quickOrderMaxRows:Number($('.js-quick-order-container').data('quickOrderMaxRows')),$productExistsInFormMsg:$('.js-quick-order-container').data('productExistsInFormMsg'),$quickOrderLeavePageMsg:$('#quickOrder').data('gridConfirmMessage'),$hiddenSkuInput:'input.js-hidden-sku-field',$addToCartBtn:$('#js-add-to-cart-quick-order-btn-top, #js-add-to-cart-quick-order-btn-bottom'),$resetFormBtn:$('#js-reset-quick-order-form-btn-top, #js-reset-quick-order-form-btn-bottom'),$productInfoContainer:'.js-product-info',$skuInputField:'.js-sku-input-field',$qtyInputField:'.js-quick-order-qty',$jsLiContainer:'li.js-li-container',$removeQuickOrderRowBtn:'.js-remove-quick-order-row',$skuValidationContainer:'.js-sku-validation-container',$qtyValidationContainer:'.js-qty-validation-container',$productItemTotal:'.js-quick-order-item-total',$classHasError:'has-error',bindResetFormBtn:function(){ACC.quickorder.$resetFormBtn.on("click",ACC.quickorder.clearForm);},bindAddToCartClick:function(){ACC.quickorder.$addToCartBtn.on("click",ACC.quickorder.addToCart);},bindAddSkuInputRow:function(){$(ACC.quickorder.$skuInputField).on("focusin",ACC.quickorder.addInputRow).on("focusout keydown",ACC.quickorder.handleFocusOutOnSkuInput);},bindClearQuickOrderRow:function(){$(ACC.quickorder.$removeQuickOrderRowBtn).on("mousedown",ACC.quickorder.clearQuickOrderRow);},addToCart:function(){$.ajax({url:ACC.quickorder.$quickOrderContainer.data('quickOrderAddToCartUrl'),type:'POST',dataType:'json',contentType:'application/json',data:ACC.quickorder.getJSONDataForAddToCart(),async:false,success:function(response){ACC.quickorder.handleAddToCartSuccess(response);},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occurred: "+textStatus,errorThrown);}});},handleAddToCartSuccess:function(response){if($(response.quickOrderErrorData).length>0){ACC.quickorder.disableBeforeUnloadEvent();}
const lookup={};response.quickOrderErrorData.forEach(function(el){lookup[el.sku]=el.errorMsg;});$(ACC.quickorder.$qtyInputField).each(function(){const parentLi=ACC.quickorder.getCurrentParentLi(this);const sku=ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuInputField).val();const errorMsg=lookup[sku];if(errorMsg){ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(errorMsg);}else{ACC.quickorder.findElement(parentLi,ACC.quickorder.$removeQuickOrderRowBtn).trigger("mousedown");}});ACC.quickorder.handleBeforeUnloadEvent();ACC.product.displayAddToCartPopup(response);},getJSONDataForAddToCart:function(){const skusAsJSON=[];$(ACC.quickorder.$qtyInputField).each(function(){const qty=Number($(this).val());if(qty>0){const sku=jQuery.trim(ACC.quickorder.findElementInCurrentParentLi(this,ACC.quickorder.$skuInputField).val());skusAsJSON.push({"product":{"code":sku},"quantity":qty});}});return JSON.stringify({"cartEntries":skusAsJSON});},handleFocusOutOnSkuInput:function(event){const key=event.charCode?event.charCode:event.keyCode?event.keyCode:0;if(key===13){$(event.target).focusout();}
if(event.type==="focusout"){ACC.quickorder.handleGetProduct(event);ACC.quickorder.handleBeforeUnloadEvent();}},handleFocusOutOnQtyInput:function(event){const key=event.charCode?event.charCode:event.keyCode?event.keyCode:0;if(key===13){event.preventDefault();const parentLi=ACC.quickorder.getCurrentParentLi(event.target);parentLi.next().find(ACC.quickorder.$skuInputField).focus();$(event.target).focusout();}
if(event.type==="focusout"){ACC.quickorder.validateAndUpdateItemTotal(event);ACC.quickorder.enableDisableAddToCartBtn();}},clearForm:function(){window.location.reload();},validateAndUpdateItemTotal:function(event){const parentLi=ACC.quickorder.getCurrentParentLi(event.target);let qtyValue=jQuery.trim(ACC.productorderform.filterSkuEntry($(event.target).val()));if(isNaN(qtyValue)||qtyValue===""){qtyValue=0;$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer).text('');$(event.target).val(0);}else{qtyValue=Number(qtyValue);$(event.target).val(qtyValue);let maxQty=jQuery.trim(ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField).data('maxProductQty'));const stockLevelStatus=jQuery.trim(ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField).data('stockLevelStatus'));maxQty=($.isEmptyObject(maxQty)&&stockLevelStatus==="inStock")?"FORCE_IN_STOCK":Number(maxQty);if(!isNaN(maxQty)&&qtyValue>maxQty){$(event.target).addClass(ACC.quickorder.$classHasError);const qtyValidationContainer=ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer);qtyValidationContainer.text(qtyValidationContainer.data('maxProductQtyMsg'));qtyValue=maxQty;$(event.target).val(maxQty);}else{$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyValidationContainer).text('');}}
if(qtyValue>0){const itemPrice=parseFloat(ACC.quickorder.findElement(parentLi,'.js-product-price').data('productPrice'));ACC.quickorder.findElement(parentLi,ACC.quickorder.$productItemTotal).html(ACC.productorderform.formatTotalsCurrency(itemPrice*qtyValue));}else{ACC.quickorder.findElement(parentLi,ACC.quickorder.$productItemTotal).text('');}},clearQuickOrderRow:function(){const quickOrderMinRows=ACC.quickorder.$quickOrderMinRows;const parentLi=ACC.quickorder.getCurrentParentLi(this);if($('.js-ul-container li.js-li-container').length>quickOrderMinRows){parentLi.remove();ACC.quickorder.bindClearQuickOrderRow();}else{ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove();ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text('');ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuInputField).val('');ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val('');}
ACC.quickorder.enableDisableAddToCartBtn();ACC.quickorder.handleBeforeUnloadEvent();},addInputRow:function(event){if($('.js-quick-order-container li.js-li-container:last-child').find(ACC.quickorder.$skuInputField).is($(event.target))&&$(ACC.quickorder.$jsLiContainer).length<ACC.quickorder.$quickOrderMaxRows){const liClone=$('.js-quick-order-container li.js-li-container:first').clone();ACC.quickorder.findElement(liClone,ACC.quickorder.$productInfoContainer).remove();ACC.quickorder.findElement(liClone,ACC.quickorder.$skuValidationContainer).text('');ACC.quickorder.findElement(liClone,ACC.quickorder.$hiddenSkuInput).val('');const currentSkuInputField=ACC.quickorder.findElement(liClone,ACC.quickorder.$skuInputField);currentSkuInputField.val('');currentSkuInputField.focusin(ACC.quickorder.addInputRow).focusout(ACC.quickorder.handleFocusOutOnSkuInput).keydown(ACC.quickorder.handleFocusOutOnSkuInput);ACC.quickorder.findElement(liClone,ACC.quickorder.$removeQuickOrderRowBtn).click(ACC.quickorder.clearQuickOrderRow);$('.js-ul-container').append(liClone);}},handleGetProduct:function(event){const parentLi=ACC.quickorder.getCurrentParentLi(event.target);const productCode=$.trim(event.target.value);$(event.target).val(productCode);if(!ACC.quickorder.isCurrentSkuSameAsPrevious(parentLi,productCode)){if(productCode.length>0){ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove();if(ACC.quickorder.isDuplicateSku(event.target,productCode)){ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(ACC.quickorder.$productExistsInFormMsg);}else{ACC.quickorder.getAndDisplayProductInfo(event,parentLi,productCode);}
ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val(productCode);}else{$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text('');ACC.quickorder.findElement(parentLi,ACC.quickorder.$productInfoContainer).remove();}}},isCurrentSkuSameAsPrevious:function(parentLi,productCode){return ACC.quickorder.findElement(parentLi,ACC.quickorder.$hiddenSkuInput).val()===productCode;},isDuplicateSku:function(currentInput,productCode){let exists=false;$(ACC.quickorder.$skuInputField).each(function(){if($(this).val()===productCode&&!$(this).is($(currentInput))){exists=true;return false}});return exists;},getAndDisplayProductInfo:function(event,parentLi,productCode){const url=ACC.config.encodedContextPath+'/quickOrder/productInfo?code='+encodeURIComponent(productCode);$.getJSON(url,function(result){if(result.errorMsg!=null&&result.errorMsg.length>0){$(event.target).addClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text(result.errorMsg);}else{$(event.target).removeClass(ACC.quickorder.$classHasError);ACC.quickorder.findElement(parentLi,ACC.quickorder.$skuValidationContainer).text('');$('#quickOrderRowTemplate').tmpl(result.productData).insertAfter(ACC.quickorder.findElement(parentLi,'.js-sku-container'));const qtyInputField=ACC.quickorder.findElement(parentLi,ACC.quickorder.$qtyInputField);qtyInputField.focusout(ACC.quickorder.handleFocusOutOnQtyInput).keydown(ACC.quickorder.handleFocusOutOnQtyInput);const stockLevelStatus=result.productData.stock.stockLevelStatus.code;if(stockLevelStatus==="outOfStock"){qtyInputField.val(0);qtyInputField.prop('disabled',true);}else{qtyInputField.focus().select();}
ACC.quickorder.enableDisableAddToCartBtn();}});},handleBeforeUnloadEvent:function(){if(ACC.quickorder.isAnySkuPresent()){ACC.quickorder.disableBeforeUnloadEvent();ACC.quickorder.enableBeforeUnloadEvent();}else{ACC.quickorder.disableBeforeUnloadEvent();}},disableBeforeUnloadEvent:function(){$(window).off('beforeunload',ACC.quickorder.beforeUnloadHandler);},enableBeforeUnloadEvent:function(){$(window).on('beforeunload',ACC.quickorder.beforeUnloadHandler);},beforeUnloadHandler:function(){return ACC.quickorder.$quickOrderLeavePageMsg;},enableDisableAddToCartBtn:function(){const addToCartButtonEnabled=ACC.quickorder.shouldAddToCartBeEnabled();if(addToCartButtonEnabled){ACC.quickorder.$addToCartBtn.removeAttr('disabled');}else{ACC.quickorder.$addToCartBtn.attr('disabled','disabled');}},shouldAddToCartBeEnabled:function(){let sum=0;let enable=false;$(ACC.quickorder.$qtyInputField).each(function(){const str=this.value.trim();if(str){sum+=parseInt(str,10);}
if(sum>=1){enable=true;return false;}});return enable;},isAnySkuPresent:function(){let present=false;$(ACC.quickorder.$skuInputField).each(function(){const str=jQuery.trim(this.value);if(str){present=true;return false;}});return present;},getCurrentParentLi:function(currentElement){return $(currentElement).closest(ACC.quickorder.$jsLiContainer);},findElement:function(currentElement,toFind){return $(currentElement).find(toFind);},findElementInCurrentParentLi:function(currentElement,toFind){return $(currentElement).closest(ACC.quickorder.$jsLiContainer).find(toFind);}};};ACC.quote={_autoload:[["bindAddComment",$("#js-quote-comments").length!==0],["bindAddEntryComment",$(".js-quote-entry-comments").length!==0],["toggleMoreComments",$("#js-quote-comments").length!==0],["toggleLessComments",$("#js-quote-comments").length!==0],["displayLessComments",$("#js-quote-comments").length!==0],["quoteDetailsNavigation",$(".js-quote-actions").length!==0],["bindQuoteButtons",$(".js-btn-quote").length!==0],["bindEditQuoteButton",$(".js-quote-edit-btn").length!==0],["bindSubmitConfirmation",$(".js-quote-submit-btn").length!==0],["bindCancelConfirmation",$(".js-quote-cancel-btn").length!==0],["bindName",$("#js-quote-name").length!==0],["bindDescription",$("#js-quote-description").length!==0],["bindExpirationTime",$("#js-quote-expiration-time").length!==0],["bindCheckoutConfirmation",$(".js-quote-checkout-btn").length!==0],["bindEditConfirmation",$(".js-quote-warning-btn").length!==0],["bindQuoteDiscount",$(".js-quote-discount-link").length!==0],["bindNewCartClick",$(".new__cart--link").length!==0]],bindEditQuoteButton:function(){$(".js-quote-edit-btn").on("click",function(){window.location=$(this).data("quoteEditUrl");});},bindNewCartClick:function(){$(".new__cart--link").bind("click",function(event){$(this).unbind(event);});},bindAddComment:function(){$(document).on("keypress",'#js-quote-comments #comment',function(event){const key=event.keyCode;const $comment=$('#comment');if(key===13){if($comment.val().trim()===''){return false;}
event.preventDefault();ACC.quote.quoteCommentSubmit($comment.val());$comment.val("");return false;}else{return true;}});},bindAddEntryComment:function(){$(document).on("keypress",".js-quote-entry-comments",function(event){const key=event.keyCode;if(key===13){event.preventDefault();ACC.quote.quoteEntryCommentSubmit($(this).val(),$(this).data("entry-number"));return false;}else{return true;}});},bindQuoteButtons:function(){$('.js-save-quote-btn').click(function(){$('#quoteForm').attr('action',$(this).data("saveQuoteUrl")).submit();});$('.js-submit-quote-btn').click(function(){$('#quoteForm').attr('action',$(this).data("submitQuoteUrl")).submit();});$('.js-accept-quote-btn').click(function(){$('#quoteForm').attr('action',$(this).data("acceptQuoteUrl")).submit();});},quoteCommentSubmit:function(comment){const quoteComments=$("#js-quote-comments");const addCommentUrl=quoteComments.data("quote-base-link")+"comment";const showAllComments=quoteComments.data("show-all-comments");$.ajax({url:addCommentUrl,data:{comment:comment},type:"post",success:function(){ACC.quote.onCommentSuccess(showAllComments);}});},quoteEntryCommentSubmit:function(comment,entryNumber){if(!comment||!comment.length){return;}
const quoteComments=$("#js-quote-comments");const addEntryCommentUrl=quoteComments.data("quote-base-link")+"entry/comment";$.ajax({url:addEntryCommentUrl,data:{comment:comment,entryNumber:entryNumber},type:"post",success:function(){ACC.quote.onEntryCommentSuccess(entryNumber);}});},onCommentSuccess:function(showAllComments){$("#commentListDiv").load(location.href+" #commentListDiv",function(){ACC.quote.displayComments(""+showAllComments);});},onEntryCommentSuccess:function(entryNumber){const entryNumberHtml=ACC.common.encodeHtml(entryNumber);$("#entryCommentListDiv_"+entryNumberHtml).load(location.href+" #entryCommentListDiv_"+entryNumberHtml,function(){ACC.quote.displayEntryComments(entryNumberHtml);});$("#entryComment_"+entryNumberHtml).val("");},toggleMoreComments:function(){$(document).on('click','#moreCommentsAnchor',ACC.quote.displayMoreComments);$(document).on('click','.js-more-entry-comments-anchor',ACC.quote.displayMoreEntryComments);},toggleLessComments:function(){$(document).on('click','#lessCommentsAnchor',ACC.quote.displayLessComments);$(document).on('click','.js-less-entry-comments-anchor',ACC.quote.displayLessEntryComments);},displayMoreComments:function(e){e.preventDefault();ACC.quote.displayComments("true");},displayMoreEntryComments:function(e){e.preventDefault();ACC.quote.displayEntryComments($(this).data("entry-number"),"true");},displayLessComments:function(e){if(e!==undefined){e.preventDefault();}
ACC.quote.displayComments("false");},displayLessEntryComments:function(e){e.preventDefault();ACC.quote.displayEntryComments($(this).data("entry-number"),"false");},displayComments:function(showAll){const quoteComments=$("#js-quote-comments");const currentCommentsShown=quoteComments.data("current-comments-shown");const comments=$('[id^="comment_"]');for(let i=0;i<comments.length;i++){if(showAll==="true"){$(comments[i]).show();}else{if(i<currentCommentsShown){$(comments[i]).show();}else{$(comments[i]).hide();}}}
const $moreCommentsAnchor=$('#moreCommentsAnchor');const $lessCommentsAnchor=$('#lessCommentsAnchor');if(showAll==="false"){$moreCommentsAnchor.show();$lessCommentsAnchor.hide();quoteComments.data("show-all-comments",false);}else{$moreCommentsAnchor.hide();$lessCommentsAnchor.show();quoteComments.data("show-all-comments",true);}
return false;},displayEntryComments:function(entryNumber,showAll){const entryNumberHtml=ACC.common.encodeHtml(entryNumber);const quoteEntryComments=$("#entryCommentListDiv_"+entryNumberHtml);const comments=quoteEntryComments.find('[id^="entryComment_'+entryNumberHtml+'"]');showAll=showAll||""+quoteEntryComments.data("show-all-entry-comments");for(let i=0;i<comments.length;i++){if(showAll==="true"){$(comments[i]).show();}else{if(i<4){$(comments[i]).show();}else{$(comments[i]).hide();}}}
if(showAll==="false"){quoteEntryComments.find(".js-more-entry-comments-anchor").show();quoteEntryComments.find(".js-less-entry-comments-anchor").hide();quoteEntryComments.data("show-all-entry-comments",false);}else{quoteEntryComments.find(".js-more-entry-comments-anchor").hide();quoteEntryComments.find(".js-less-entry-comments-anchor").show();quoteEntryComments.data("show-all-entry-comments",true);}
return false;},quoteDetailsNavigation:function(){$('.js-quote-actions').on('click',function(){$(this).parent().find('nav').toggleClass('display-none');});},bindSubmitConfirmation:function(){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-submit-btn",modalWindowSelector:"#js-quote-submit-modal",modalTitleDataAttributeName:"submit-confirmation-modal-title",cancelButtonSelector:"#js-quote-submit-modal #submitNoButton"});$("#quoteSubmitForm").submit(function(event){const quoteForm=$("#quoteForm");if(quoteForm.is("form")){event.preventDefault();quoteForm.prop("action",$(this).prop("action"));quoteForm.submit();}});},bindCheckoutConfirmation:function(){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-checkout-btn",modalWindowSelector:"#js-quote-checkout-modal",modalTitleDataAttributeName:"submit-confirmation-modal-title",cancelButtonSelector:"#js-quote-checkout-modal #submitNoButton"});},bindCancelConfirmation:function(){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-cancel-btn",modalWindowSelector:"#js-quote-cancel-modal",modalTitleDataAttributeName:"cancel-confirmation-modal-title",cancelButtonSelector:"#js-quote-cancel-modal #cancelNoButton"});},bindEditConfirmation:function(){ACC.quote.handleConfirmationModal({actionButtonSelector:".js-quote-warning-btn",modalWindowSelector:"#js-quote-edit-modal",modalTitleDataAttributeName:"edit-confirmation-modal-title",cancelButtonSelector:"#js-quote-edit-modal #cancelEditNoButton",confirmButtonSelector:"#js-quote-edit-modal #cancelEditYesButton"});},handleConfirmationModal:function(options){const $actionButtonSelector=$(document).find(options.actionButtonSelector);$actionButtonSelector.click(function(e){e.preventDefault();const modalWindow=$(document).find(options.modalWindowSelector);const title=modalWindow.data(options.modalTitleDataAttributeName);if(options.initializeCallback){options.initializeCallback();}
ACC.colorbox.open(ACC.common.encodeHtml(title),{inline:true,href:modalWindow,width:"480px",escKey:false,overlayClose:false,onComplete:function(){ACC.colorbox.resize();}});});const $cancelButtonSelector=$(document).find(options.cancelButtonSelector);$cancelButtonSelector.click(function(e){e.preventDefault();ACC.colorbox.close();});const $confirmButtonSelector=$(document).find(options.confirmButtonSelector);$confirmButtonSelector.click(function(e){e.preventDefault();ACC.colorbox.close();window.location=$actionButtonSelector.data("quoteEditUrl");});},bindQuoteDiscount:function(){ACC.quote.handleDiscountModal({actionButtonSelector:".js-quote-discount-link",modalWindowSelector:"#js-quote-discount-modal",modalTitleDataAttributeName:"quote-modal-title",modalTotalDataAttributeName:"quote-modal-total",modalQuoteDiscountDataAttributeName:"quote-modal-quote-discount",modalCurrencyDataAttributeName:"quote-modal-currency",cancelButtonSelector:"#js-quote-discount-modal #cancelButton"});},handleDiscountModal:function(options){const modalWindow=$(document).find(options.modalWindowSelector);const total=parseFloat(modalWindow.data(options.modalTotalDataAttributeName));const quoteDiscount=parseFloat(modalWindow.data(options.modalQuoteDiscountDataAttributeName));const currency=modalWindow.data(options.modalCurrencyDataAttributeName);$(document).find(options.actionButtonSelector).click(function(e){e.preventDefault();const title=modalWindow.data(options.modalTitleDataAttributeName);if(options.initializeCallback){options.initializeCallback();}
ACC.colorbox.open(ACC.common.encodeHtml(title),{inline:true,href:modalWindow,width:"480px",onComplete:function(){ACC.colorbox.resize();const percent=(quoteDiscount/total)*100;const adjustTotal=(total-quoteDiscount).toFixed(2);$("#js-quote-discount-by-percentage").val(percent.toFixed(2));$("#js-quote-discount-by-amount").val(quoteDiscount.toFixed(2));$("#js-quote-discount-adjust-total").val(adjustTotal);}});});$(document).find(options.cancelButtonSelector).click(function(e){e.preventDefault();ACC.colorbox.close();});function enableSubmit(){$("#js-quote-discount-by-percentage").css('border-color','#cccccc');$("#js-quote-discount-by-amount").css('border-color','#cccccc');$("#js-quote-discount-adjust-total").css('border-color','#cccccc');$("#submitButton").prop("disabled",false);}
function resetIntial(val){if(isNaN(parseFloat(val))){val=0.00;val=val.toFixed(2);}
return val;}
function updateByPercentage(){const $jsQuoteDiscountByPercentage=$("#js-quote-discount-by-percentage");const percent=parseFloat($jsQuoteDiscountByPercentage.val());if(percent>100||percent<0){$jsQuoteDiscountByPercentage.css('border-color','red');$("#submitButton").prop("disabled",true);}else{enableSubmit();}
let discountAmount=total*percent/100;discountAmount=discountAmount.toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));let remainTotal=total-discountAmount;remainTotal=remainTotal.toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal));$("#js-quote-discount-rate").val(resetIntial(percent));$("#js-quote-discount-type").val("PERCENT");updateNewTotal(remainTotal);}
const $quoteDiscountByPercentage=$('#js-quote-discount-by-percentage');$quoteDiscountByPercentage.keyup(updateByPercentage);$quoteDiscountByPercentage.change(updateByPercentage);$quoteDiscountByPercentage.blur(reset);$quoteDiscountByPercentage.keypress(holdPreviousValue);function reset(){const $jsQuoteDiscountByPercentage=$('#js-quote-discount-by-percentage');const $jsQuoteDiscountByAmount=$('#js-quote-discount-by-amount');const $jsQuoteDiscountAdjustTotal=$('#js-quote-discount-adjust-total');const per=$jsQuoteDiscountByPercentage.val();const amt=$jsQuoteDiscountByAmount.val();const tot=$jsQuoteDiscountAdjustTotal.val();if(per===''){$jsQuoteDiscountByPercentage.val('0.00');}
if(amt===''){$jsQuoteDiscountByAmount.val('0.00');}
if(tot===''||tot===0.00){$jsQuoteDiscountAdjustTotal.val(total);}}
function holdPreviousValue(event){const $this=$(this);if((event.which!==46||$this.val().indexOf('.')!==-1)){if(((event.which<48||event.which>57)&&(event.which!==0&&event.which!==8))){event.preventDefault();}}
const text=$(this).val();if((event.which===46)&&(text.indexOf('.')===-1)){setTimeout(function(){if($this.val().substring($this.val().indexOf('.')).length>3){$this.val($this.val().substring(0,$this.val().indexOf('.')+3));}},1);}
if((text.indexOf('.')!==-1)){if((text.substring(text.indexOf('.')).length>2)&&(event.which!==0&&event.which!==8)&&($(this)[0].selectionStart>=text.length-2)){event.preventDefault();}}}
function updateByAmount(){const $jsQuoteDiscountByAmount=$("#js-quote-discount-by-amount");const discountAmount=parseFloat($jsQuoteDiscountByAmount.val());if(discountAmount>total||discountAmount<0){$jsQuoteDiscountByAmount.css('border-color','red');$("#submitButton").prop("disabled",true);}else{enableSubmit();}
let percent=(discountAmount/total)*100;percent=percent.toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));let remainTotal=total-discountAmount;remainTotal=remainTotal.toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal));$("#js-quote-discount-rate").val(resetIntial(discountAmount));$("#js-quote-discount-type").val("ABSOLUTE");updateNewTotal(remainTotal);}
const $quoteDiscountByAmount=$('#js-quote-discount-by-amount');$quoteDiscountByAmount.keyup(updateByAmount);$quoteDiscountByAmount.change(updateByAmount);$quoteDiscountByAmount.keypress(holdPreviousValue);$quoteDiscountByAmount.blur(reset);function updateByAdjustTotal(){const $jsQuoteDiscountAdjustTotal=$("#js-quote-discount-adjust-total");const adujstTotal=parseFloat($jsQuoteDiscountAdjustTotal.val());if(adujstTotal>total||adujstTotal<0){$jsQuoteDiscountAdjustTotal.css('border-color','red');$("#submitButton").prop("disabled",true);}else{enableSubmit();}
let discountAmount=total-adujstTotal;discountAmount=discountAmount.toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));let percent=(discountAmount/total)*100;percent=percent.toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));$("#js-quote-discount-rate").val(resetIntial(adujstTotal));$("#js-quote-discount-type").val("TARGET");updateNewTotal(adujstTotal);}
const $quoteDiscountAdjustTotal=$('#js-quote-discount-adjust-total');$quoteDiscountAdjustTotal.keyup(updateByAdjustTotal);$quoteDiscountAdjustTotal.change(updateByAdjustTotal);$quoteDiscountAdjustTotal.keypress(holdPreviousValue);$quoteDiscountAdjustTotal.blur(reset);function updateNewTotal(newTotal){if(isNaN(parseFloat(newTotal))){newTotal=total;}
newTotal=parseFloat(newTotal).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,'$1,');$("#js-quote-discount-new-total").text(currency.concat(newTotal));}},bindName:function(){$("#js-quote-name").on("focusout",function(){ACC.quote.updateMetadata();});},bindDescription:function(){$("#js-quote-description").on("focusout",function(){ACC.quote.updateMetadata();});},updateMetadata:function(){const quoteForm=$("#quoteFormDiv");const updateMetadataUrl=quoteForm.data("metadata-url");const name=$("#js-quote-name").val().trim();const description=$("#js-quote-description").val();const nameWrapperElement=$("#js-quote-name-wrapper");if(name&&name.length){nameWrapperElement.removeClass("has-error");$.ajax({url:updateMetadataUrl,data:{name:name,description:description},type:"POST",success:function(){$(".js-modal-quote-description").text(description);$(".js-modal-quote-name").text(name);}});}else{if(!nameWrapperElement.hasClass("has-error")){nameWrapperElement.addClass("has-error");}}},bindExpirationTime:function(){const expirationTimeWrapperElement=$("#js-quote-expiration-time");const dateFormatForDatePicker=expirationTimeWrapperElement.data("date-format-for-date-picker");const minOfferValidityPeriodDays=expirationTimeWrapperElement.data("min-offer-validity-period-days");const minDate=new Date();minDate.setDate(minDate.getDate()+minOfferValidityPeriodDays);const $expirationTime=$("#expirationTime");$expirationTime.datepicker({dateFormat:dateFormatForDatePicker,constrainInput:true,minDate:minDate,onSelect:function(){ACC.quote.handleExpirationTimeUpdate(expirationTimeWrapperElement,dateFormatForDatePicker,minOfferValidityPeriodDays);}});$expirationTime.change(function(){ACC.quote.handleExpirationTimeUpdate(expirationTimeWrapperElement,dateFormatForDatePicker,minOfferValidityPeriodDays);});$(document).on("click",".js-open-datepicker-quote-expiration-time",function(){$expirationTime.datepicker('show');});},handleExpirationTimeUpdate:function(expirationTimeWrapperElement,dateFormat,minOfferValidityPeriodDays){const expirationTimeElement=$("#expirationTime");const expirationTime=expirationTimeElement.val();if(ACC.quote.validateExpirationTime(dateFormat,expirationTime,minOfferValidityPeriodDays)){ACC.quote.updateExpirationTime(expirationTime.trim());expirationTimeWrapperElement.removeClass("has-error");}else{if(!expirationTimeWrapperElement.hasClass("has-error")){expirationTimeWrapperElement.addClass("has-error");}}},validateExpirationTime:function(dateFormat,value,minOfferValidityPeriodDays){try{if(value){const selectedDate=$.datepicker.parseDate(dateFormat,value);const validDate=new Date();validDate.setHours(0,0,0,0);validDate.setDate(validDate.getDate()+minOfferValidityPeriodDays);return selectedDate>=validDate;}else{return true;}}catch(error){return false;}},updateExpirationTime:function(expirationTime){$.ajax({url:$("#js-quote-expiration-time").data("expiration-time-url"),type:'POST',data:{expirationTime:expirationTime},error:function(jqXHR){const expirationTimeWrapperElement=$("#js-quote-expiration-time");if(!expirationTimeWrapperElement.hasClass("has-error")){expirationTimeWrapperElement.addClass("has-error");}}});}};$(document).ready(function(){$('.js-quote-toggle-btn').click(function(){$(this).toggleClass('open');$("#quote__form--collapse").slideToggle(400);if($(this).hasClass('open')){$(this).addClass('collapsed');}else{$(this).removeClass('collapsed');}});$('.js-quote-comments-btn').click(function(){$(this).toggleClass('open');$("#comments__collapse").slideToggle(400);if($(this).hasClass('open')){$(this).addClass('collapsed');}else{$(this).removeClass('collapsed');}});});ACC.consent={_autoload:[["bindSendConsent",$("#consent-management-form").length!=0],["bindToggleConsentTemplateDescription",$("#consent-management-form").length!=0],"bindConsentClick","bindConsentManagementAlertBar"],bindSendConsent:function(){const consentCheckbox=$('#consent-management-form').find('input.toggle-button__input');consentCheckbox.removeAttr('disabled');consentCheckbox.click(function(){const $this=$(this);const buttonId=($this.is(':checked')?'#give-consent-button-':'#withdraw-consent-button-')+$this.prop('id');const $consentBtn=$(document).find(buttonId);$consentBtn.trigger('click');consentCheckbox.attr('disabled','disabled');$consentBtn.on('keydown',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();$consentBtn.trigger('click');consentCheckbox.attr('disabled','disabled');}});});},bindToggleConsentTemplateDescription:function(){const accordion=$('#consent-management-form').find('[data-behavior="accordion"]');const expandedClass='is-expanded';$.each(accordion,function(){const accordionItems=$(this).find('[data-binding="expand-accordion-item"]');$.each(accordionItems,function(){const $this=$(this);const triggerBtn=$this.find('[data-binding="expand-accordion-trigger"]');const setHeight=function(nV){const innerContent=nV.find('.consent-management-list__content-inner')[0];const maxHeight=$(innerContent).outerHeight();const content=nV.find('.consent-management-list__content')[0];if(!content.style.height||content.style.height==='0px'){$(content).css('height',maxHeight);}else{$(content).css('height','0px');}};const toggleClasses=function(event){const clickedItem=event.currentTarget;const currentItem=$(clickedItem).parent();const clickedContent=$(currentItem).find('.consent-management-list__content');$(currentItem).toggleClass(expandedClass);setHeight(currentItem);if($(currentItem).hasClass('is-expanded')){$(clickedItem).attr('aria-selected','true');$(clickedItem).attr('aria-expanded','true');$(clickedContent).attr('aria-hidden','false');}else{$(clickedItem).attr('aria-selected','false');$(clickedItem).attr('aria-expanded','false');$(clickedContent).attr('aria-hidden','true');}};triggerBtn.on('click',function(event){event.preventDefault();toggleClasses(event);});triggerBtn.on('keydown',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();toggleClasses(event);}});});});},bindConsentClick:function(){$('.consent-accept').on("click",function(){ACC.consent.changeConsentState(this,"GIVEN");});$('.consent-reject').on("click",function(){ACC.consent.changeConsentState(this,"WITHDRAWN");});},changeConsentState:function(element,consentState){const consentCode=($(element).closest('.consentmanagement-bar').data('code'));$.ajax({url:ACC.config.encodedContextPath+"/anonymous-consent/"+encodeURIComponent(consentCode)+"?consentState="+encodeURIComponent(consentState),type:'POST',success:function(){$(element).closest('.consentmanagement-bar').hide();}});},bindConsentManagementAlertBar:function(){const accordion=$('#consent-management-alert').find('[data-behavior="accordion"]');const expandedClass='is-expanded';$.each(accordion,function(){const accordionItems=$(this).find('[data-binding="expand-accordion-item"]');$.each(accordionItems,function(){const $this=$(this);const triggerBtn=$this.find('[data-binding="expand-accordion-trigger"]');const setHeight=function(nV){const innerContent=nV.find('.consent-management-list__content-inner')[0];const maxHeight=$(innerContent).outerHeight();const content=nV.find('.consent-management-list__content')[0];if(!content.style.height||content.style.height==='0px'){$(content).css('height',maxHeight);}else{$(content).css('height','0px');}};const toggleClasses=function(event){const clickedItem=event.currentTarget;const currentItem=$(clickedItem).parent();const clickedContent=$(currentItem).find('.consent-management-list__content');$(currentItem).toggleClass(expandedClass);setHeight(currentItem);if($(currentItem).hasClass('is-expanded')){$(clickedItem).attr('aria-selected','true');$(clickedItem).attr('aria-expanded','true');$(clickedContent).attr('aria-hidden','false');}else{$(clickedItem).attr('aria-selected','false');$(clickedItem).attr('aria-expanded','false');$(clickedContent).attr('aria-hidden','true');}};triggerBtn.on('click',function(event){event.preventDefault();toggleClasses(event);});triggerBtn.on('keydown',function(event){if(event.keyCode===13||event.keyCode===32){event.preventDefault();toggleClasses(event);}});});});}};ACC.close={_autoload:[["bindCloseAccountModalButtons",$(".js-close-account-popup-button").length!=0],["bindCloseAccountButton",$(".js-close-account-popup-button").length!=0]],bindCloseAccountModalButtons:function(){$('.js-close-account-popup-button').click(function(event){event.preventDefault();ACC.colorbox.open(ACC.common.encodeHtml($('.js-close-account-popup-button').data("popupTitle")),{inline:true,href:"#popup_confirm_account_removal",className:"js-close-account-popup",width:'500px',onComplete:function(){$(this).colorbox.resize();}})});},bindCloseAccountButton:function(){$(document).on("click",'.js-close-account-action',function(event){event.preventDefault();$.ajax({url:ACC.config.encodedContextPath+'/my-account/close-account',type:'POST',success:function(){ACC.colorbox.close();window.location.replace(ACC.config.encodedContextPath+'/logout?closeAcc=true');},error:function(jqXHR,textStatus,errorThrown){console.log("Failed to close account. Error: ["+errorThrown+"]");window.location.reload();}});});}};ACC.register={_autoload:[["validateRegister",$("#shrRegisterForm").length],["postValidateDetailsStep",$("#shrRegisterForm").length],["postValidatePreferencesStep",$("#shrRegisterForm").length],["getPreviousRegistrationStep",$("#shrRegisterForm").length],["acceptTermsRegister",$("#shrRegisterForm").length],["saidPassportNumber",$("#shrRegisterForm").length>0],["xtraSaveNumberOnlyDigitsInputs",$("#shrRegisterForm").length],["xtraSaveNumberAutoInsert",$("#shrRegisterForm").length],"gaEventsTriggers",["handleInterestClicks",$("#shrRegisterForm").length],["bindMarketingConsent",$("#shrRegisterForm").length],["bindMarketingConsentValidation",$("#shrRegisterForm").length],["bindUseCrossBannerCard",$("#usingCrossBannerCard").length]],checkboxForm:false,checkASMForm:true,preferenceRequired:false,preferenceSelected:false,interests:[],getPreviousRegistrationStep:function(){$(document).on("click","#registerPrevious",function(e){e.preventDefault();const $form=$("#shrRegisterForm");const formData=$form.serialize();const url=$(this).attr("href");$(".loading-background").show();$.ajax({url:url,type:"POST",data:formData,success:function(response){$(".loading-background").hide();const $response=$(response);$(".js-register-form-section__block").html($response);ACC.global.loadActionsForm();ACC.global.loadInputEffect();ACC.register.validateRegister();ACC.register.xtraSaveNumberAutoInsert();ACC.register.acceptTermsRegister();ACC.register.bindMarketingConsent();ACC.register.bindMarketingConsentValidation();ACC.dataPicker.datePicker();ACC.storefinder.showStoreResults();ACC.storefinder.bindFindStoreNearMe();ACC.storefinder.storeFinderInputState();ACC.register.gaEventsTriggers();ACC.register.bindUseCrossBannerCard();}});});},postValidateDetailsStep:function(){$(document).on("click",".js-register-submit",function(e){const $form=$("#shrRegisterForm");e.preventDefault();const url=$form.attr("action");const formData=$form.serialize();$(".loading-background").show();$.ajax({url:url,type:"POST",data:formData,success:function(response){$(".loading-background").hide();const $response=$(response);$(".js-register-form-section__block").html($response);ACC.global.loadActionsForm();ACC.global.loadInputEffect();ACC.register.validateRegister();ACC.register.xtraSaveNumberAutoInsert();ACC.register.acceptTermsRegister();ACC.register.bindMarketingConsent();ACC.register.bindMarketingConsentValidation();ACC.dataPicker.datePicker();ACC.storefinder.showStoreResults();ACC.storefinder.bindFindStoreNearMe();ACC.storefinder.storeFinderInputState();ACC.register.gaEventsTriggers();ACC.register.bindUseCrossBannerCard();}});});},postValidatePreferencesStep:function(){$(document).on("click",".js-register-submit-preferences",function(e){const $form=$("#shrRegisterForm");e.preventDefault();const url=$form.attr("action");$(".loading-background").show();$.ajax({url:url,type:"POST",dataType:'html',contentType:'application/json',mimeType:'application/json',data:JSON.stringify({'preferences':ACC.register.interests}),success:function(response){$(".loading-background").hide();const $response=$(response);$(".js-register-form-section__block").html($response);ACC.global.jsCountdown();ACC.register.gaEventsTriggers();}});});},saidPassportNumber:function(){$(document).on("click",".js-said-passport",function(){const dataNumberSection=$(this).data("number");switch(dataNumberSection){case"passportNumber":sessionStorage.setItem("registerShowSaidNumber","false");break;case"said":sessionStorage.setItem("registerShowSaidNumber","true");break;}
const saidPassportNumber=$(".said-passport-number");saidPassportNumber.addClass("hidden");saidPassportNumber.find("input").val("");saidPassportNumber.find("input").addClass("not-active");saidPassportNumber.find("input").removeClass("used");const elementDataNumberSection=$("#"+dataNumberSection);elementDataNumberSection.removeClass("hidden");elementDataNumberSection.find("input").removeClass("not-active");elementDataNumberSection.find("input").removeClass("active");});},bindMarketingConsent:function(){$("#sendMeUpdates").on("change",function(){const $marketingConsentCheckBox=$(this);if($marketingConsentCheckBox.is(":checked")){ACC.register.enableMarketingPermissions();ACC.register.preferenceRequired=true;}else{ACC.register.initializeMarketingConsents();}
ACC.register.handleMarketingConsentChange();});},bindMarketingConsentValidation:function(){$("input[id^=type]").on("change",function(){const permissionCode=$(this).data("code");const option=$('#js-hidden-permissions option[value="'+permissionCode+'"]');const $marketingConsentCheckBox=$("#sendMeUpdates");if($marketingConsentCheckBox.is(":checked")&&$(this).is(":checked")){ACC.register.preferenceSelected=true;option.attr('selected','selected');}else{ACC.register.preferenceSelected=false;option.removeAttr('selected');$("input[id^=type]").each(function(){if($(this).is(":checked")){ACC.register.preferenceSelected=true;return false;}});}
ACC.register.handleMarketingConsentChange();});},xtraSaveNumberOnlyDigitsInputs:function(){$(document).on("keyup","input.js-xtra-saving-input",function(){const $this=$(this);const $target=$("#loyaltyCard");let str="";$("input[id^=xtraSavingCard_]").each(function(){str=str+$(this).val();});$target.val(str);if($target.val()>=0){ACC.register.validateLoyaltyCard($target.val())}
if($this.val().length===4&&$this.data("next-target")!==""){$("#"+$this.data("next-target")).focus();}});},xtraSaveNumberAutoInsert:function(){const $usingCrossBannerCard=$("#usingCrossBannerCard");if(!$usingCrossBannerCard.length||!$usingCrossBannerCard.is(":checked")){let loyaltyCard=$("#loyaltyCard").val();$("input[id^=xtraSavingCard_]").each(function(){$(this).val(loyaltyCard.substring(0,4));loyaltyCard=loyaltyCard.substring(4);});}else{ACC.validations.validateForm($("#shrRegisterForm"));}},acceptTermsRegister:function(){$("#termsAndConditionsLink").on("change",function(){ACC.register.checkboxForm=true;ACC.validations.validateForm($("#shrRegisterForm"));ACC.register.handleMarketingConsentChange();});},validateLoyaltyCard:function(value){const label=$(".js-loyalty-card .js-label-error");if(value.length!==16&&(value.length===0&&ACC.config.asmLoggedIn==="true")){ACC.register.addErrorLoyaltyCard(label,value);}else{if(value.length===0&&$("#usingCrossBannerCard").length){label.hide();const button=$("#shrRegisterForm").find("#formButton");button.attr('disabled',true);}else if(value.length===0||(value.length===16&&ACC.validations.luhnCheck(value,16))){ACC.validations.validateForm($("#shrRegisterForm"));ACC.register.checkASMForm=true;label.hide();}else{ACC.register.checkASMForm=false;ACC.register.addErrorLoyaltyCard(label,value);}}},addErrorLoyaltyCard:function(label,value){if(value.length===0){label.html(loc("form.loyaltyCard.required")).show();}else{label.html(loc("form.loyaltyCard.invalid")).show();}
$(".js-register-submit").prop("disabled",true);},validateRegister:function(){const $said=$("#said");const $passportNumber=$("#passportNumber");if($said.is(":hidden")){$said.find("input").addClass("not-active");$passportNumber.find("input").removeClass("not-active");}else if($passportNumber.is(":hidden")){$said.find("input").removeClass("not-active");$passportNumber.find("input").addClass("not-active");}
const $shrRegisterForm=$("#shrRegisterForm");$.validator.addMethod("alphanumericsOnly",function(value,element){return this.optional(element)||ACC.validations.isAlphanumeric(value);},loc("form.validator.alphanumericsOnly"));$.validator.addMethod("lettersOnly",function(value,element){return this.optional(element)||ACC.validations.lettersOnly(value);},loc("form.validator.lettersOnly"));$.validator.addMethod("numbersOnly",function(value,element){return this.optional(element)||ACC.validations.numbersOnly(value);},loc("form.validator.numbersOnly"));$.validator.addMethod("isValidSAId",function(value){return ACC.validations.luhnCheck(value,13);});$.validator.addMethod("isNotValidSAId",function(value){return!ACC.validations.luhnCheck(value,13);});$.validator.addMethod("minAge",function(value){return ACC.validations.isOlderEnough(value);},loc("form.validator.minAge"));$.validator.addMethod('validateDate',function(value,element){return this.optional(element)||ACC.validations.isValidDate(value);},loc("form.validator.validateDate"));$.validator.addMethod("fullEmail",function(value,element){return this.optional(element)||ACC.validations.validateEmail(value);},loc("input.enter.email"));$shrRegisterForm.validate({ignore:'.not-active',errorElement:'span',errorClass:'sr-error',focusCleanup:true,rules:{firstName:{required:true,lettersOnly:true,minlength:2},lastName:{required:true,lettersOnly:true,minlength:2},email:{required:ACC.config.asmLoggedIn!=="true",fullEmail:true},mobileNumber:{required:true,minlength:9,maxlength:10,number:true,numbersOnly:true},saIdNumber:{number:true,numbersOnly:true,minlength:13,maxlength:13,isValidSAId:true},birthDate:{required:true,minAge:true,validateDate:true},passport:{required:true,minlength:6,maxlength:20,alphanumericsOnly:true,isNotValidSAId:true},termsCheck:{required:true}},messages:{pwd:{minlength:loc("form.pwd.minlength")},termsCheck:{required:loc("form.termsAndConditionsLink.required")},saIdNumber:{isValidSAId:loc("form.saIdNumber.isValidSAId")},mobileNumber:{minlength:loc("form.mobileNumber.minlength")},passport:{minlength:loc("form.passport.min.length"),isNotValidSAId:loc("form.passport.isNotValidSAId")}},errorPlacement:function(error,element){const srSwitch=element.closest(".sr-switch");if(srSwitch.length>0){srSwitch.append(error)}else{element.parent().append(error);}},onkeyup:function(){if($("#termsAndConditionsLink").length){if(ACC.register.checkboxForm===true&&ACC.register.checkASMForm){ACC.validations.validateForm($shrRegisterForm);}}else if(ACC.register.checkASMForm){ACC.validations.validateForm($shrRegisterForm);const $loyaltyCard=$("#loyaltyCard");ACC.register.validateLoyaltyCard($loyaltyCard.val());}},onfocusout:function(element){if($(element).hasClass("js-validate-focus")){this.element(element);}}});},handleInterestClicks:function(){$(document).on("click",".js-preference",function(){const $interest=$(this);const previouslySelected=$interest.hasClass('form-section__selected');ACC.register.modifySelectedInterest($interest,previouslySelected);});},modifySelectedInterest:function($interest,previouslySelected){const code=$interest.data('code');const name=$interest.data('name');const interestObj={code:code,name:name};if(previouslySelected){$interest.removeClass('form-section__selected');interestObj['active']=false;}else{$interest.addClass('form-section__selected');interestObj['active']=true;}
ACC.register.addInterest(interestObj);},gaEventsTriggers:function(){const $body=$("body");if(!$body.hasClass("page-login")&&!$body.hasClass("page-registerEnterDetails")){sessionStorage.removeItem("gaRegisterLabel");sessionStorage.removeItem("LoginWithoutPassword");}else{if(sessionStorage.getItem("gaRegisterLabel")===null){sessionStorage.setItem("gaRegisterLabel","Home Sign up");}}
sessionStorage.removeItem("registerStoreSelection");const linkRegisterNavMenu=$(".link-ga-register-label");if(sessionStorage.getItem("gaRegisterXS")!==""&&sessionStorage.getItem("gaRegisterXS")!==null){linkRegisterNavMenu.attr("data-galabel","XtraSavings Sign Up");sessionStorage.setItem("gaRegisterLabel","XtraSavings Sign Up");sessionStorage.setItem("gaRegisterXS","");}
linkRegisterNavMenu.on("click",function(){const dataGaLabel=$(this).data("galabel");sessionStorage.setItem("gaRegisterLabel",dataGaLabel);if($(this).hasClass("link-ga-register-label--footer")){sessionStorage.setItem("gaRegisterLabel","Home Sign up");}else if($(this).hasClass("link-ga-register-label--xs")){sessionStorage.setItem("gaRegisterXS","true");}});const buttonRegiterStep1=$(".button-register-step-1");buttonRegiterStep1.on("click",function(){const formRegisterStep1=$(this).parents("form");const registerStep1Data={"Name":formRegisterStep1.find("[name=firstName]").val(),"Surname":formRegisterStep1.find("[name=lastName]").val(),"Email":formRegisterStep1.find("[name=email]").val(),"Mobile":formRegisterStep1.find("[name=mobileNumber]").val(),"Password":formRegisterStep1.find("[name=pwd]").val(),"ID":formRegisterStep1.find("[name=saIdNumber]").val(),"Passport":formRegisterStep1.find("[name=passport]").val(),"DOB":formRegisterStep1.find("[name=birthDate]").val(),"LinkedCard":formRegisterStep1.find("[name=loyaltyCard]").val()};let gaRegisterStep1Action="";$.each(registerStep1Data,function(index,element){if(element!==""){gaRegisterStep1Action+=index+" > ";}});gaRegisterStep1Action+="Create Account";ACC.global.gaEvent("New User",gaRegisterStep1Action,sessionStorage.getItem("gaRegisterLabel"));});$(document).on("click",".js-set-preferred-store-btn",function(){if($("body").hasClass("page-registerEnterDetails")){sessionStorage.setItem("registerStoreSelection",$(this).attr("store-display-name"));}});$(document).on("click",".js-register-submit-preferences",function(){if(sessionStorage.getItem("registerStoreSelection")!==null){ACC.global.gaEvent("Personalise","Store Selection",sessionStorage.getItem("registerStoreSelection"));}
let interestsList="";$.each($(".js-preference"),function(index,element){const preference=$(element);if(preference.hasClass("form-section__selected")){interestsList+=preference.find(".preference-text").text()+"; ";}});interestsList=interestsList.substr(0,interestsList.length-2);if(interestsList!==""){ACC.global.gaEvent("Personalise","Select Interests",interestsList);}});const mobileNumberIdentificationSubmit=$(".one-time-pin-submit");if(mobileNumberIdentificationSubmit.length>0){mobileNumberIdentificationSubmit.on("click",function(){ACC.global.gaEvent("Login","Login without password","OTP entered");});}
const buttonResendLink=$(".button-resend-link");if(buttonResendLink.length>0){buttonResendLink.on("click",function(){ACC.global.gaEvent("Login","Login without password - Step 3","Resend OTP");});}
const setPasswordSubmit=$(".set-password-submit");if(setPasswordSubmit.length>0){setPasswordSubmit.on("click",function(){ACC.global.gaEvent("Login","Login without password - Step 4","Set password");sessionStorage.setItem("LoginWithoutPassword","true");});}},handleMarketingConsentChange:function(){const $jsMarketingConsent=$(".js-marketing-consent");if($jsMarketingConsent){const $label=$jsMarketingConsent.find(".js-label-error");const $backendLabel=$jsMarketingConsent.find("span[class='sr-error']");const $shrRegisterForm=$("#shrRegisterForm");if(!ACC.register.preferenceSelected&&ACC.register.preferenceRequired){$label.html(loc("form.marketing.consent.invalid")).show();const button=$shrRegisterForm.find("#formButton");button.attr('disabled',true);}else{$label.hide();if($backendLabel.length){$backendLabel.hide();}
ACC.validations.validateForm($shrRegisterForm);}}},initializeMarketingConsents:function(){$("input[id^=type]").each(function(){$(this).prop("disabled",true);$(this).prop("checked",false);const permissionCode=$(this).data("code");const option=$('#js-hidden-permissions option[value="'+permissionCode+'"]');option.removeAttr('selected');});ACC.register.preferenceRequired=false;ACC.register.preferenceSelected=false;},enableMarketingPermissions:function(){$("input[id^=type]").each(function(){$(this).removeAttr("disabled");$(this).click();});},addInterest:function(interest){const found=ACC.register.findElement(ACC.register.interests,interest);if(!found){ACC.register.interests.push(interest);}else{const index=ACC.register.interests.indexOf(found);ACC.register.interests.splice(index,1);}},findElement:function(list,elementToFind){return list.find(function(element){return element.code===elementToFind.code;});},bindUseCrossBannerCard:function(){const $usingCrossBannerCard=$("#usingCrossBannerCard");if($usingCrossBannerCard.is(":checked")){const $checkersCard=$(".checkers-card");$checkersCard.addClass("shoprite-card-used");}
$usingCrossBannerCard.on("change",function(){const $loyaltyCard=$("#loyaltyCard");const $shrRegisterForm=$("#shrRegisterForm");const $checkersCard=$(".checkers-card");let $shopriteCardInput=$checkersCard.find("#shopriteCardInput");let $xtraSavingsInputs=$checkersCard.find(".xtra-savings-card .form-section__input");if($usingCrossBannerCard.is(":checked")){$checkersCard.addClass("shoprite-card-used");$shopriteCardInput.removeAttr("disabled");$xtraSavingsInputs.attr("disabled",true);$loyaltyCard.val("");$("#xtraSavingCard_1").val("");$("#xtraSavingCard_2").val("");$("#xtraSavingCard_3").val("");$("#xtraSavingCard_4").val("");$(".js-label-error").hide();ACC.validations.validateForm($shrRegisterForm);}else{$checkersCard.removeClass("shoprite-card-used");$shopriteCardInput.attr("disabled",true);$xtraSavingsInputs.removeAttr("disabled");}});}};ACC.loyaltyCard={_autoload:[["bindLoyaltyCardSubmit",$(".js-submit-link-card").length!==0],["showCardErrorPopup",$(".js-card-error").data("cardError")],"bindSAIDPassportInput","gaEventsTriggers"],bindLoyaltyCardSubmit:function(){$(document).on("keyup","input.js-xtra-saving-input",function(){const $this=$(this);const $valInput=$this.val();if($valInput!=="")$this.addClass("is-used");else $this.removeClass("is-used");if($valInput.length===4){const nextTarget=$this.data("nextTarget");if(nextTarget!==""){$this.parent().find("#"+nextTarget).focus();}}});$(document).on("click",".js-submit-link-card",function(event){event.preventDefault();let cardId;const firstNumbers=$("input.card-first-numbers").val();const secondNumbers=$("input.card-second-numbers").val();const thirdNumbers=$("input.card-third-numbers").val();const fourthNumbers=$("input.card-fourth-numbers").val();cardId=firstNumbers.concat(secondNumbers,thirdNumbers,fourthNumbers);$("input[name='cardId']").val(cardId);$(".loading-background").show();$(this).parents("form").submit();});},showCardErrorPopup:function(){ACC.colorbox.open("",{html:$(".js-card-error").html(),className:"card-number-used-container",width:"340px"});},bindSAIDPassportInput:function(){$(document).on("click",".js-change-identification",function(event){const $target=$(event.currentTarget);const $saidSelector=$("#user-said");const $saidErrorSelector=$("span[id^='customerSAId']");const $passportErrorSelector=$("span[id^='customerPassport']");const $passportSelector=$("#user-passport");if($target.data("identification")==="passport"){$saidSelector.val("");$saidErrorSelector.hide();$saidSelector.attr("hidden",true);$target.attr("hidden",true);$passportSelector.attr("hidden",false);$(".js-change-identification[data-identification='said']").attr("hidden",false);}else if($target.data("identification")==="said"){$passportSelector.val("");$passportErrorSelector.hide();$passportSelector.attr("hidden",true);$target.attr("hidden",true);$saidSelector.attr("hidden",false);$(".js-change-identification[data-identification='passport']").attr("hidden",false);}});},gaEventsTriggers:function(){$("#linkYourCard").on("click",function(){ACC.global.gaEvent("Card Management","Link New Card Start","Started");});$("#stopCardButton").on("click",function(){ACC.global.gaEvent("Card Management","Stop Card","Stopped");});$("#cancelCardButton").on("click",function(){ACC.global.gaEvent("Card Management","Cancel membership","Cancel");});}};ACC.createpassword={_autoload:[["isValidPassword",$(".js-validate-password").length],["bindPostCreatePassword",$(".set-password-submit").length],["bindResendEmail",$("#createPasswordResendEmailForm").length]],bindPostCreatePassword:function(){$(document).on("click",".set-password-submit",function(e){const $form=$("#shrSetPasswordForm");e.preventDefault();const url=$form.attr("action");const formData=$form.serialize();$(".loading-background").show();$.ajax({url:url,type:"POST",data:formData,success:function(response){$(".loading-background").hide();const $response=$(response);$(".js-register-form-section__block").html($response);ACC.global.loadActionsForm();ACC.register.handleInterestClicks();ACC.register.postValidatePreferencesStep();ACC.storefinder.showStoreResults();ACC.storefinder.bindFindStoreNearMe();ACC.storefinder.storeFinderInputState();}});});},isValidPassword:function(){$(document).on("input",".js-validate-password",function(event){let $formSubmitBtn="";if($(".set-password-submit").length)$formSubmitBtn=$(".set-password-submit");else if($(".set-forgotten-password-submit").length)$formSubmitBtn=$(".set-forgotten-password-submit");if($formSubmitBtn!==""){const $errorSelector=$("#pwd-error");const value=$(event.currentTarget).val();if(value.length>=8){$errorSelector.hide();$formSubmitBtn.attr("disabled",false);}else{$errorSelector.text(loc("form.create.password.invalid"));$formSubmitBtn.attr("disabled",true);}}});},bindResendEmail:function(){$(document).on("click",".js-resend-email",function(e){e.preventDefault();const $form=$("#createPasswordResendEmailForm");$form.submit();});}};ACC.departmentsgrid={_autoload:[["collapseAll",$(".departments-mobile-background").length>0]],collapseAll:function(){enquire.register("screen and (max-width:"+ACC.common.encodeHtml(screenXsMax)+")",{setup:function(){$(".panel-title svg").css("display","none");},match:function(){$(".panel-collapse").removeClass("in");$(".panel-title svg").css("display","inline")},unmatch:function(){$(".panel-title svg").css("display","none");$(".panel-collapse").addClass("in");}})}};ACC.csvimport={TEXT_CSV_CONTENT_TYPE:'text/csv',TEXT_CSV_LONG_CONTENT_TYPE:'text/comma-separated-values',APP_EXCEL_CONTENT_TYPE:'application/vnd.ms-excel',_autoload:[["changeFileUploadAppearance",$(".js-file-upload").length!=0],["bindImportCSVActions",$(".js-import-csv").length!=0]],changeFileUploadAppearance:function(){$('.js-file-upload__input').on('change',function(){const files=(this.files);const spanFileNames=document.createElement("span");spanFileNames.insertAdjacentText("beforeend",files[0].name.toLowerCase());spanFileNames.insertAdjacentElement("beforeend",document.createElement("br"));const $fileUploadFileName=$('.js-file-upload__file-name');$fileUploadFileName.unbind('mouseenter mouseleave');$fileUploadFileName.html(spanFileNames);if($('.js-file-upload').parents('#cboxLoadedContent').length>0){ACC.colorbox.resize();}})},bindImportCSVActions:function(){$('#chooseFileButton').on('click',function(){ACC.csvimport.clearGlobalAlerts();});$('#importButton').on('click',function(event){event.preventDefault();ACC.csvimport.clearGlobalAlerts();if(($('.js-file-upload__input').val().trim().length<=0)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-no-file-chosen-error-message'});return;}
const selectedFile=document.getElementById('csvFile').files[0];if(!ACC.csvimport.isSelectedFileValid(selectedFile)){return;}
const form=document.getElementById('importCSVSavedCartForm');const formData=new window.FormData(form);formData.append("csvFile",selectedFile);ACC.csvimport.displayGlobalAlert({type:'warning',messageId:'import-csv-upload-message'});ACC.csvimport.enableDisableActionButtons(false);$.ajax({url:form.action,type:'POST',data:formData,contentType:false,processData:false,success:function(){ACC.csvimport.displayGlobalAlert({type:'info',message:''});$('#import-csv-alerts .alert-info').append($('#import-csv-success-message').html());ACC.csvimport.clearChosenFile();},error:function(jqXHR){if(jqXHR.status===400){if(jqXHR.responseJSON){ACC.csvimport.displayGlobalAlert({type:'error',message:jqXHR.responseJSON});return;}}
ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-generic-error-message'});},complete:function(){ACC.csvimport.enableDisableActionButtons(true);}});});},isSelectedFileValid:function(selectedFile){if(window.File&&window.Blob){if(selectedFile){if(!(selectedFile.type===ACC.csvimport.TEXT_CSV_CONTENT_TYPE||selectedFile.type===ACC.csvimport.APP_EXCEL_CONTENT_TYPE||selectedFile.type===ACC.csvimport.TEXT_CSV_LONG_CONTENT_TYPE)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-file-csv-required'});return false;}
const fileName=selectedFile.name;if(!fileName||!(/\.csv$/i).test(fileName)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-file-csv-required'});return false;}}
const fileMaxSize=$('.js-file-upload__input').data('file-max-size');if($.isNumeric(fileMaxSize)&&selectedFile){if(selectedFile.size>parseFloat(fileMaxSize)){ACC.csvimport.displayGlobalAlert({type:'error',messageId:'import-csv-file-max-size-exceeded-error-message'});return false;}}}
return true;},displayGlobalAlert:function(options){ACC.csvimport.clearGlobalAlerts();let alertTemplateSelector;switch(options.type){case'error':alertTemplateSelector='#global-alert-danger-template';break;case'warning':alertTemplateSelector='#global-alert-warning-template';break;default:alertTemplateSelector='#global-alert-info-template';}
if(typeof options.message!='undefined'){$('#import-csv-alerts').append($(alertTemplateSelector).tmpl({message:options.message}));}
if(typeof options.messageId!='undefined'){$('#import-csv-alerts').append($(alertTemplateSelector).tmpl({message:$(document).find('#'+options.messageId).text()}));}
$(".closeAccAlert").on("click",function(){$(this).parent('.getAccAlert').remove();});},clearGlobalAlerts:function(){$('#import-csv-alerts').empty();},clearChosenFile:function(){document.getElementById('csvFile').value='';$('.js-file-upload__file-name').text('');},enableDisableActionButtons:function(enable){$('#chooseFileButton').attr('disabled',!enable);$('#importButton').prop('disabled',!enable);}};ACC.faq={_autoload:[["initTypeAhead",$(".typeahead").length>0],["openAnswerFeedBack",$(".js-show-feedback-popup").length>0],["openSuggestionFeedback",$(".js-show-suggestion-popup").length>0]],initTypeAhead:function(){var body=$('script[data-template="faq-response-body-tmp"]').text();var header=$('script[data-template="faq-response-header-tmp"]').text();if(typeof faqJson!=="undefined"){var data=new Bloodhound({name:'questions',local:faqJson.faqs,datumTokenizer:function(d){return Bloodhound.tokenizers.whitespace(d.question);},queryTokenizer:Bloodhound.tokenizers.whitespace});data.initialize();$('input.typeahead').typeahead({hint:false,highlight:true,minLength:1,classNames:{input:'shoprite-input',menu:'shoprite-menu',dataset:'shoprite-dataset'}},{name:'questions',displayKey:'question',source:data.ttAdapter(),templates:{header:Handlebars.compile(header),suggestion:Handlebars.compile(body)}});}},showPopUp:function(html){ACC.colorbox.open("",{className:"show-answer-feedback",href:html,inline:true,width:"620",onComplete:function(){ACC.faq.feedbackRedirect();ACC.faq.sendSuggestion();ACC.faq.submitSuggestionEnableButton();},onClosed:function(){$(window).off("resize",colorboxResize);}});},openAnswerFeedBack:function(){$(".js-show-feedback-popup").click(function(){$.ajax({url:'/help-centre/answer-feedback',type:'GET',success:function(response){ACC.faq.showPopUp(response);},error:function(){ACC.faq.showPopUp("Error returning answer feedback data.");}})})},openSuggestionFeedback:function(){$(".js-show-suggestion-popup").click(function(){$.ajax({url:'/help-centre/suggestion',type:'GET',success:function(response){ACC.faq.showPopUp(response);ACC.faq.faqDidWeAnswerTextArea();},error:function(){ACC.faq.showPopUp("Error returning answer feedback data.");}})})},sendSuggestion:function(){const $submitSuggestion=$(".js-submit-suggestion");if($submitSuggestion.length>0){$submitSuggestion.click(function(){$.ajax({url:'/help-centre/suggestion',data:{suggestionText:$(".js-suggestion-text-area").val()},type:'POST',success:function(response){ACC.faq.showPopUp(response);},error:function(){ACC.faq.showPopUp("Error returning answer feedback data.");}});});}},submitSuggestionEnableButton:function(){const $suggestionTextArea=$(".js-suggestion-text-area");if($suggestionTextArea.length>0){$suggestionTextArea.keyup(function(){let empty=false;$suggestionTextArea.each(function(){if($(this).val().length===0){empty=true;}});const $submitSuggestion=$(".js-submit-suggestion");if(empty){$submitSuggestion.attr("disabled","disabled");}else{$submitSuggestion.attr("disabled",false);}})}},feedbackRedirect:function(){const $buttonRedirectFaq=$(".js-button-redirect-faq");if($buttonRedirectFaq.length>0){$buttonRedirectFaq.click(function(){location.href='/help-centre';});}
const $buttonRedirectFaqHomepage=$(".js-button-redirect-faq-homepage");if($buttonRedirectFaqHomepage.length>0){$buttonRedirectFaqHomepage.click(function(){location.href='/';});}},faqDidWeAnswerTextArea:function(){const inputs=$(".js-suggestion-text-area");inputs.blur(function(){if($(this).val()){$(this).addClass('used');}else{$(this).removeClass('used');}});$.each(inputs,function(index,element){const input=$(element);if(input.val()){input.addClass("used");}else{input.removeClass("used")}})}};ACC.contactus={_autoload:[["selectOptionRadioButton",$(".faq-radio-btn").length>0],["openFeedBackPopUp",$("#contactUsFormButton").length>0],"validateContactUsForm",["userNameFulfillBySelectedLoginMethod",$(".js_loginSharedInput").length],["bindAutoSelectRadioButton",$(".faq-radio-btn").length>0],["selectOptionStore",$("#storeName").length>0],["bindAttachmentsActions",$("input[name^='attachment_']").length]],selectOptionStore:function(){const $jsStoreNameAutocomplete=$(".js-store-name-autocomplete");let timeoutSearch;const $storeName=$("#storeName");$storeName.autocomplete({appendTo:".js-store-name-autocomplete",source:function(request,response){const $form=$("#shrHelpCenterContactUsForm");const $provinceInput=$form.find("select[id='province']");const $selectedOption=$provinceInput.find(":selected");$.ajax({url:'/store-finder/contactus/stores/autocomplete',data:{store:request.term,region:$selectedOption.data("iso")},type:"get",success:function(data){const autoSearchData=[];if(data.results!=null&&data.results.length){$.each(data.results,function(i,obj){autoSearchData.push({value:ACC.sanitizer.sanitize(obj.name),label:obj.displayName});});$jsStoreNameAutocomplete.removeClass("is-empty").addClass("is-searching");timeoutSearch=setTimeout(function(){$jsStoreNameAutocomplete.removeClass("is-searching");response(autoSearchData);},1000);}else{$jsStoreNameAutocomplete.removeClass("is-searching").addClass("is-empty");}},error:function(){cleanStates();$jsStoreNameAutocomplete.removeClass("is-searching").addClass("is-empty");console.error("Failed to search stores");}});},classes:{"ui-autocomplete":"search-site-autocomplete"},select:function(event,ui){setSelectedValues(event,ui);},search:function(){clearTimeout(timeoutSearch);cleanStates();$("#storeId").val("");$("#contactUsFormButton").attr("disabled",true);},change:function(event,ui){cleanStates();if(ui!=null&&ui.item!=null){setSelectedValues(event,ui);}else{$("#storeName").val("");$("#storeId").val("");return false;}},close:function(){cleanStates();}}).autocomplete("instance")._renderItem=function(ul,item){const renderHtml="<span>"+ACC.sanitizer.sanitize(item.label)+"</span>";return $("<li>").append(renderHtml).appendTo(ul);};function setSelectedValues(event,ui){$("#storeName").val(ui.item.label);$("#storeId").val(ui.item.value);ACC.contactus.validForm($("#shrHelpCenterContactUsForm"));event.preventDefault();}
function cleanStates(){$jsStoreNameAutocomplete.removeClass("is-searching is-empty");}
$("#province").change(function(){$storeName.val('');$("#storeId").val('');$storeName.attr('disabled',false);$storeName.focus();});$storeName.blur(function(){if($("#storeId").val()===''){$("#contactUsFormButton").attr('disabled',true);}});},bindInputsSubmit:function(){let cardId;const firstNumbers=$("input.contact-us-card-first-numbers").val();const secondNumbers=$("input.contact-us-card-second-numbers").val();const thirdNumbers=$("input.contact-us-card-third-numbers").val();const fourthNumbers=$("input.contact-us-card-fourth-numbers").val();cardId=firstNumbers.concat(secondNumbers,thirdNumbers,fourthNumbers);$("input[name='xtraSavingsCardNumber']").val(cardId);$("input[name='browserType']").val(ACC.contactus.getBrowserType());},getBrowserType:function(){const browserAgent=["Chrome","Firefox","Safari","Opera","MSIE","Trident","Edge"];let browser;const userAgent=navigator.userAgent;for(let i=0;i<browserAgent.length;i++){if(userAgent.indexOf(browserAgent[i])>-1){browser=browserAgent[i];break;}}
if(browser==="MSIE"||browser==="Trident"||browser==="Edge"){browser="Internet Explorer";}
return browser;},selectOptionRadioButton:function(){const $selectedOptionBox=$(".js-selected-option-box");$("#customerCareRadioButton").click(function(){$selectedOptionBox.attr("data-selected-option",$(this).data("selected-option"));});$("#xtraSavinsRadioButton").click(function(){$selectedOptionBox.attr("data-selected-option",$(this).data("selected-option"));});$("#clickCollectRadioButton").click(function(){$selectedOptionBox.attr("data-selected-option",$(this).data("selected-option"));});$("#sixty60RadioButton").click(function(){$selectedOptionBox.attr("data-selected-option",$(this).data("selected-option"));});},validateContactUsForm:function(){$.validator.addMethod("lettersOnly",function(value,element){return this.optional(element)||/^\D+$/i.test(value);},"Letters Only.");$.validator.addMethod("numbersOnly",function(value,element){return this.optional(element)||/^[0-9]+$/.test(value);},"Numbers Only.");$.validator.addMethod("phoneValid",function(value,element){return this.optional(element)||/^(?=\d{10})((0)[0-9]{9})$|^(?=[1-9]{9})([0-9]{9})$/.test(value);},"Invalid number.");$.validator.addMethod("valueNotEquals",function(value,element,arg){return arg!==value;},"Value must not equal arg.");const shrHelpCenterContactUsForm=$("#shrHelpCenterContactUsForm");if(shrHelpCenterContactUsForm.length>0&&(typeof shrHelpCenterContactUsForm.data("validate")==="undefined")){shrHelpCenterContactUsForm.validate({ignore:'.not-active',errorElement:'span',errorClass:'input-error-span',rules:{firstName:{required:true,lettersOnly:true,minlength:2},surname:{required:true,lettersOnly:true,minlength:2},contactNumber:{required:true,minlength:9,maxlength:10,phoneValid:true},topic:{required:true},xtraSavingsCardNumber:{required:false,number:true,numbersOnly:true},onlineOrderNumber:{required:false,number:true,numbersOnly:true},msgType:{required:true,valueNotEquals:"default"},province:{required:true,valueNotEquals:"default"},storeName:{required:true},subject:{required:true},details:{required:true}},messages:{msgType:{valueNotEquals:"Please choose topic!"},province:{valueNotEquals:"Please choose province!"}},errorPlacement:function(error,element){const srSwitch=element.closest(".contact-us-form-error");if(srSwitch.length>0){srSwitch.append(error)}else{element.parent().append(error);}},onkeyup:function(element){$(element).valid();ACC.contactus.validForm(shrHelpCenterContactUsForm);},onclick:function(element){$(element).valid();ACC.contactus.validForm(shrHelpCenterContactUsForm);}});}},validForm:function(form){const inputs=form.find("input[required]:visible");const selects=form.find("select[required]:visible");const button=form.find("#contactUsFormButton");let errors=0;$.each(inputs,function(index,element){if(!$(element).hasClass("valid")){errors++}});$.each(selects,function(index,element){if(!$(element).hasClass("valid")){errors++}});if(!$(".js-details-text-area").hasClass("valid")){errors++;}
if(errors>0){button.attr('disabled',true)}else if(errors===0&&$('input[name=topic]:checked').val()!=null&&$("#storeId").val()!==''){button.attr('disabled',false)}},openFeedBackPopUp:function(){$("#contactUsFormButton").click(function(event){event.preventDefault();$("#contactUsFormButton").attr('disabled',true);ACC.contactus.bindInputsSubmit();const formObject=ACC.contactus.createFormJson();const formData=new window.FormData();formData.append('properties',new Blob([JSON.stringify(formObject)],{type:"application/json"}));$("input[name^='attachment_']").each(function(){const file=$(this).prop("files")[0];if(file){formData.append("attachments",file);}});let intervalId;let progress=0;const attachments=formData.getAll("attachments").length;$.ajax({url:"/help-centre/submit-form",data:formData,contentType:false,processData:false,type:'POST',beforeSend:function(){if(attachments){ACC.contactus.openProgressModal();const url=$(".js-files-uploaded").data("url");intervalId=setInterval(ACC.contactus.getProgress,500,url,progress,intervalId,formData.getAll("attachments").length);}},success:function(response){if(attachments){clearInterval(intervalId);$(".js-attachments-progress-bar").val(100);const $attachmentsProgressText=$('.js-attachments-progress-text');$attachmentsProgressText.text($attachmentsProgressText.data('tmpl').replace('{0}',attachments).replace('{1}',attachments));setTimeout(function(){$(".js-attachments-progress-popup-uploading").fadeOut('slow',function(){$(".js-attachments-progress-popup-success").fadeIn('slow');ACC.colorbox.resize()});},250);}else{ACC.contactus.successfulSubmit(response);}},error:function(response){if(attachments){clearInterval(intervalId);}
const $html=$(response.responseText);if($html.hasClass("js-contact-us-success-feedback")){ACC.contactus.unssuccessfulSubmit(response);}else{ACC.contactus.openFilesErrorModal();}}});});},createFormJson:function(){const form={};form["browserType"]=$("input[name='browserType']").val();form["firstName"]=$("input[name='firstName']").val();form["surname"]=$("input[name='surname']").val();form["email"]=$("input[name='email']").val();form["contactNumber"]=$("input[name='contactNumber']").val();form["topic"]=$("input[name='topic']:checked").val();form["msgType"]=$("#msgType").find(":selected").text();form["province"]=$("#province").find(":selected").text();form["storeName"]=$("input[name='storeName']").val();form["storeId"]=$("input[name='storeId']").val();form["subject"]=$("input[name='subject']").val();form["details"]=$.trim($("#details").val());form["xtraSavingsCardNumber"]=$("input[name='xtraSavingsCardNumber']").val();form["onlineOrderNumber"]=$("input[name='onlineOrderNumber']").val();return form;},successfulSubmit:function(html){ACC.colorbox.open("",{className:"show-answer-feedback",href:html,inline:true,width:"620",onComplete:function(){ACC.contactus.redirectToHomepage();},onClosed:function(){location.reload();}});},redirectToHomepage:function(){const $buttonRedirectFaqHomepage=$(".js-button-redirect-faq-homepage");if($buttonRedirectFaqHomepage.length>0){$buttonRedirectFaqHomepage.click(function(){location.href='/';});}},unssuccessfulSubmit:function(response){ACC.colorbox.open("",{html:response.responseText,className:"show-answer-feedback",inline:false,scrolling:false,width:"620",onOpen:function(){ACC.colorbox.resize();},onClosed:function(){$(window).off("resize",colorboxResize);}});},userNameFulfillBySelectedLoginMethod:function(){$(document).on("keyup blur",".js_loginSharedInput",function(){let str="";str=str+$(this).val();$("#j_username").val(str);});},bindAutoSelectRadioButton:function(){const $radioButtons=$(".faq-radio-btn");if($radioButtons.length===1){const $selectedOptionBox=$(".js-selected-option-box");const $radioButton=$(".faq-label-radio").find("input[type='radio']");$radioButton.attr('checked','checked');$selectedOptionBox.attr("data-selected-option",$radioButton.data("selected-option"));}},bindAttachmentsActions:function(){$(document).on("change","input[name^='attachment_']",function(){const $input=$(this);const file=$input.prop("files")[0];const $filesWrapper=$(".js-files-uploaded");const maxFilesAllowed=$filesWrapper.data("maxFilesAllowed");const allowedFormats=$filesWrapper.data("allowedFormats");const fileSize=$filesWrapper.data("fileSize");ACC.contactus.clearErrors();if(ACC.contactus.isFileValid(file,fileSize,allowedFormats)){const $attachmentInputs=$("input[name^='attachment_']"),$fileInfosDisplay=$(".js-file-infos-display");if($attachmentInputs.length<maxFilesAllowed){const lastIndex=$attachmentInputs.last().data("index");const newIndex=lastIndex+1;const $newElement=ACC.contactus.createNewFileInput(newIndex,allowedFormats);$fileInfosDisplay.removeClass("hidden");$newElement.append($fileInfosDisplay);$filesWrapper.append($newElement);}else if($attachmentInputs.length===maxFilesAllowed){$fileInfosDisplay.addClass("hidden");}
const $inputButton=$input.parent(".js-file-upload-button");$inputButton.addClass("hidden");$input.prop("disabled",true);const $fileItem=$inputButton.parent(".js-file-item");$fileItem.addClass('has-file');$fileItem.find(".js-file-name span").text(file.name);$fileItem.find(".js-delete-file").removeClass("hidden");}else{$input.val("");}});$(document).on("click",".js-file-click-button",function(){$('.js-files-uploaded').find('.js-file-upload-button:visible input[name^=attachment_]').click();});$(document).on("click",".js-delete-file",function(){$(this).parent(".js-file-item").remove();ACC.contactus.clearErrors();const $filesWrapper=$(".js-files-uploaded");const allowedFormats=$filesWrapper.data("allowedFormats");const $attachmentInputs=$("input[name^='attachment_']");let validInputs=0;$attachmentInputs.each(function(){if($(this).val()!==""){validInputs=validInputs+1;}});if($attachmentInputs.length===validInputs){const $lastInput=$attachmentInputs.last();const currentIndex=$lastInput.data("index");const newIndex=currentIndex+1;const $fileInfosDisplay=$(".js-file-infos-display");const $newElement=ACC.contactus.createNewFileInput(newIndex,allowedFormats);$fileInfosDisplay.removeClass("hidden");$newElement.append($fileInfosDisplay);$filesWrapper.append($newElement);}
if($attachmentInputs.length===1){$filesWrapper.find('.file-upload-button .js-file-placeholder span').text(loc("text.contact.us.attachments"));}});},getProgress:function(url,progress,intervalId,totalItems){$.ajax({url:url,type:"GET",cache:false,processData:false,contentType:false,success:function(data){if(!data){clearInterval(intervalId);return;}
const dataArray=data.split("/");progress=Math.round((dataArray[0]/dataArray[1])*100);if($.isNumeric(progress)){$(".js-attachments-progress-bar").val(progress);const fileUploading=Math.ceil(dataArray[0]/dataArray[1]*totalItems);if(fileUploading>1){const $attachmentsProgressText=$('.js-attachments-progress-text');$attachmentsProgressText.text($attachmentsProgressText.data('tmpl').replace('{0}',fileUploading).replace('{1}',totalItems));}}}});},openProgressModal:function(){$(".js-attachments-progress-bar").val(0);$(".js-attachments-progress-popup-uploading").show();$(".js-attachments-progress-popup-success").hide();const $attachmentsProgressText=$('.js-attachments-progress-text');$attachmentsProgressText.text($attachmentsProgressText.data('tmpl').replace('{0}','1').replace('{1}',$('.files-uploaded .has-file').length));ACC.colorbox.open("",{href:".js-attachments-progress-popup",inline:true,className:'attachments-progress-popup-colorbox',scrolling:false,width:"620",closeButton:false,overlayClose:false,escKey:false});},openFilesErrorModal:function(){ACC.colorbox.open("",{html:"<div class='attachments-error'>"+"<p>"+loc("text.attachments.error")+"</p>"+"</div>",className:"show-answer-feedback",inline:false,scrolling:false,width:"620",onClosed:function(){location.reload();}});},createNewFileInput:function(newIndex,allowedFormats){return $("<li class='js-file-item'>"+"<div class='file-upload-button js-file-upload-button'>"+"<span class='js-file-placeholder'><span>"+loc("text.contact.us.attachments.more")+"</span><i class='icon shoprite-icon-attach' aria-hidden'true'></i></span>"+"<input type='file' id='attachment_"+newIndex+"' name='attachment_"+newIndex+"' accept='"+allowedFormats+"' data-index='"+newIndex+"'/>"+"</div>"+"<span class='js-file-name'><span></span></span>"+"<span class='js-delete-file hidden'><i class='shoprite-icon-clear'></i></span>"+"</li>");},isFileValid:function(file,maxSize,allowedFormats){if(file){if(allowedFormats){const allowedFormatsArray=allowedFormats.replaceAll(".","").toLowerCase().split(","),fileExtension=file.name.split('.').pop().toLowerCase();if(!allowedFormatsArray.includes(fileExtension)){ACC.contactus.displayError(loc("text.contact.us.file.type.invalid"));return false;}}
if($.isNumeric(maxSize)){if(file.size>parseFloat(maxSize)){ACC.contactus.displayError(loc("text.contact.us.file.size.invalid"));return false;}}}else{ACC.contactus.displayError();return false;}
return true;},displayError:function(message){$('.js-file-infos-display').addClass('error');const $fileAlerts=$(".js-file-alerts");if(message){const $fileUploadButtonWrapper=$('.js-file-upload-button:visible').closest('.js-file-item');$fileAlerts.insertBefore($fileUploadButtonWrapper);$fileAlerts.removeClass('hidden').find('.js-file-alerts-content span').text(message);}else{$fileAlerts.addClass('hidden');}},clearErrors:function(){$('.js-file-infos-display').removeClass('error');$(".js-file-alerts").addClass('hidden');}};ACC.dataPicker={_autoload:[["datePicker",$(".js-sr-date-picker").length>0],["datePickerMyAccount",$(".account-details").length>0]],datePicker:function(){const jsSrDatePickers=$(".js-sr-date-picker");if(jsSrDatePickers.length>0){const formatNumber=function(number){return number>9?number:"0"+number;};const disabledButton=function(button,state){button.attr("disabled",state);};const disabledButtonPart=function(srDatePicker,buttonDirection,part,state){const buttonRow=srDatePicker.find('[data-date-part="'+part+'"]');const button=buttonRow.find('.'+buttonDirection+'-button');disabledButton(button,state);};const addValueSpanPart=function(srDatePicker,part,value){srDatePicker.find('[data-date-part="'+part+'"] .value').text(value);};const activeValue=function(element){element.parent().find(".sr-date-picker__row").removeClass("is-active");element.addClass("is-active");};const drawDatePicker=function(srDatePicker,day,month,year){const months=["January","February","March","April","May","June","July","August","September","October","November","December"];addValueSpanPart(srDatePicker,"day",formatNumber(day));addValueSpanPart(srDatePicker,"month",months[month]);addValueSpanPart(srDatePicker,"year",year);if(year<dataDefaultToday.year){disabledButtonPart(srDatePicker,"next","day",false);disabledButtonPart(srDatePicker,"next","month",false);disabledButtonPart(srDatePicker,"next","year",false);}else{disabledButtonPart(srDatePicker,"next","year",true);if(month<dataDefaultToday.month){disabledButtonPart(srDatePicker,"next","month",false);disabledButtonPart(srDatePicker,"next","day",false);}else{disabledButtonPart(srDatePicker,"next","year",true);if(day<dataDefaultToday.day){disabledButtonPart(srDatePicker,"next","day",false);}else{disabledButtonPart(srDatePicker,"next","day",true);}}}
if(day===1)disabledButtonPart(srDatePicker,"prev","day",true);if(month===1)disabledButtonPart(srDatePicker,"prev","month",true);};const defaultToday=ACC.global.getCurrentDate();const dataDefaultToday={day:defaultToday.getDate(),month:defaultToday.getMonth(),year:defaultToday.getFullYear()-18};$.each(jsSrDatePickers,function(index,value){const cleave=new Cleave(value,{date:true,delimiter:'/',datePattern:['d','m','Y']});const today=ACC.global.getCurrentDate();const months=["January","February","March","April","May","June","July","August","September","October","November","December"];let todayDay=today.getDate();let todayMonth=today.getMonth();let todayYear=today.getFullYear();let defaultYear=todayYear-18;const jsSrDatePicker=$(value);jsSrDatePicker.wrap('<div class="sr-date-picker-container"></div>');const srDatePickerContainer=jsSrDatePicker.parent();srDatePickerContainer.prepend("<i class='icon shoprite-icon-calendar'>");srDatePickerContainer.append('<button type="button" class="sr-date-picker__button"><i class="shoprite-icon-dropdown-expand"></i></button>'+'<div class="sr-date-picker">'+'   <div class="sr-date-picker__row" data-date-part="day">'+'       <button type="button" class="prev-button"><i class="shoprite-icon-chevron-left"></i></button>'+'       <span class="value">'+formatNumber(todayDay)+'</span>'+'       <button type="button" class="next-button" disabled><i class="shoprite-icon-chevron-right"></i></button>'+'   </div>'+'   <div class="sr-date-picker__row" data-date-part="month">'+'       <button type="button" class="prev-button"><i class="shoprite-icon-chevron-left"></i></button>'+'       <span class="value">'+months[todayMonth]+'</span>'+'       <button type="button" class="next-button" disabled><i class="shoprite-icon-chevron-right"></i></button>'+'   </div>'+'   <div class="sr-date-picker__row" data-date-part="year">'+'       <button type="button" class="prev-button"><i class="shoprite-icon-chevron-left"></i></button>'+'       <span class="value">'+defaultYear+'</span>'+'       <button type="button" class="next-button" disabled><i class="shoprite-icon-chevron-right"></i></button>'+'   </div>'+'</div>');const srDatePicker=srDatePickerContainer.find(".sr-date-picker");const srDatePickerButton=srDatePickerContainer.find(".sr-date-picker__button");srDatePicker.css("top",jsSrDatePicker.outerHeight()-1);jsSrDatePicker.on("click",function(){srDatePickerContainer.removeClass("is-show");});srDatePickerButton.on("click",function(){const rows=srDatePickerButton.parent().find(".sr-date-picker__row");rows.removeClass("is-active");if(!srDatePickerContainer.hasClass("is-show")){srDatePickerContainer.addClass("is-show");const valueJsSrDatePicker=jsSrDatePicker.val();const splitValueJsSrDatePicker=valueJsSrDatePicker.split("/");const dataInput={day:parseInt(splitValueJsSrDatePicker[0]),month:parseInt(splitValueJsSrDatePicker[1]),year:parseInt(splitValueJsSrDatePicker[2])};const reset=function(){todayDay=dataDefaultToday.day;todayMonth=dataDefaultToday.month;defaultYear=dataDefaultToday.year;jsSrDatePicker.val(formatNumber(todayDay)+"/"+formatNumber(todayMonth+1)+"/"+defaultYear);drawDatePicker(srDatePicker,todayDay,todayMonth,defaultYear);jsSrDatePicker.valid();ACC.validations.validateForm(jsSrDatePicker.closest("form"));};const inputToDatePicker=function(){todayDay=dataInput.day;todayMonth=parseInt(dataInput.month)-1;defaultYear=dataInput.year;drawDatePicker(srDatePicker,todayDay,todayMonth,defaultYear);};if(splitValueJsSrDatePicker.length===3){if(dataInput.year<=dataDefaultToday.year){if(dataInput.year===dataDefaultToday.year&&(dataInput.month-1)<=dataDefaultToday.month){if((dataInput.month-1)===dataDefaultToday.month&&dataInput.day<=dataDefaultToday.day){inputToDatePicker();}else if((dataInput.month-1)<dataDefaultToday.month){inputToDatePicker();}else{reset();}}else if(dataInput.year<dataDefaultToday.year){inputToDatePicker();}else{reset();}}else{reset();}}else{reset();}}else{srDatePickerContainer.removeClass("is-show");}
$(window).on("click",function(e){if(srDatePickerContainer.length&&!srDatePickerContainer.is(e.target)&&srDatePickerContainer.has(e.target).length===0){srDatePickerContainer.removeClass("is-show");}});});const prevButtonMain=srDatePickerContainer.find(".prev-button");const nextButtonMain=srDatePickerContainer.find(".next-button");prevButtonMain.on("click",function(){const button=$(this);const buttonParent=button.parent();activeValue(buttonParent);const nextButton=buttonParent.find(".next-button");const datePart=buttonParent.data("date-part");const valueSpan=buttonParent.find(".value");switch(datePart){case"day":if(parseInt(todayDay)>1){todayDay=todayDay-1;valueSpan.text(formatNumber(todayDay));if(todayDay===1)disabledButton(button,true);disabledButton(nextButton,false);}
break;case"month":if(todayMonth>0){todayMonth=todayMonth-1;valueSpan.text(months[todayMonth]);if(todayMonth===0)disabledButton(button,true);disabledButton(nextButton,false);if(todayMonth<today.getMonth()){disabledButtonPart(srDatePicker,"next","day",false)}}
break;case"year":defaultYear=defaultYear-1;valueSpan.text(defaultYear);disabledButton(nextButton,false);if(defaultYear<dataDefaultToday.year){disabledButtonPart(srDatePicker,"next","day",false);disabledButtonPart(srDatePicker,"next","month",false);}
break;}
jsSrDatePicker.val(formatNumber(todayDay)+"/"+formatNumber(todayMonth+1)+"/"+defaultYear);jsSrDatePicker.valid();ACC.validations.validateForm(jsSrDatePicker.closest("form"));});nextButtonMain.on("click",function(){const button=$(this);const buttonParent=button.parent();activeValue(buttonParent);const prevButton=buttonParent.find(".prev-button");const datePart=buttonParent.data("date-part");const valueSpan=buttonParent.find(".value");switch(datePart){case"day":if(parseInt(todayDay)<31){todayDay=todayDay+1;valueSpan.text(formatNumber(todayDay));if(todayDay===31)disabledButton(button,true);disabledButton(prevButton,false);if(defaultYear===dataDefaultToday.year&&todayMonth<=today.getMonth()&&todayDay===today.getDate()){disabledButtonPart(srDatePicker,"next","day",true)}}
break;case"month":if(todayMonth<11){todayMonth=todayMonth+1;valueSpan.text(months[todayMonth]);if(todayMonth===11)disabledButton(button,true);disabledButton(prevButton,false);if(defaultYear===dataDefaultToday.year&&todayMonth===today.getMonth()){disabledButtonPart(srDatePicker,"next","month",true);if(todayDay>=today.getDate()){addValueSpanPart(srDatePicker,"day",today.getDate());disabledButtonPart(srDatePicker,"next","day",true);}}}
break;case"year":if(defaultYear<dataDefaultToday.year){defaultYear=defaultYear+1;valueSpan.text(defaultYear);if(defaultYear===dataDefaultToday.year){disabledButton(button,true);if(todayDay>=today.getDate()&&todayMonth>=today.getMonth()){todayDay=today.getDate();addValueSpanPart(srDatePicker,"day",today.getDate());disabledButtonPart(srDatePicker,"next","day",true)}
if(todayMonth>=today.getMonth()){todayMonth=today.getMonth();addValueSpanPart(srDatePicker,"month",months[today.getMonth()]);disabledButtonPart(srDatePicker,"next","month",true)}}
disabledButton(prevButton,false);}
break;}
jsSrDatePicker.val(formatNumber(todayDay)+"/"+formatNumber(todayMonth+1)+"/"+defaultYear);jsSrDatePicker.valid();ACC.validations.validateForm(jsSrDatePicker.closest("form"));});});}},datePickerMyAccount:function(){const jsSrDatePickers=$(".js-sr-date-picker-myaccount");jsSrDatePickers.datetimepicker({format:"DD/MM/YYYY",widgetPositioning:{horizontal:'auto',vertical:'bottom'}});jsSrDatePickers.data("DateTimePicker").locale(moment.locale('en',{weekdaysMin:'U_M_T_W_R_F_S'.split('_'),week:{dow:1}}));const jsSrDatePicker=jsSrDatePickers;jsSrDatePicker.wrap('<div class="sr-date-picker-container"></div>');const srDatePickerContainer=jsSrDatePicker.parent();srDatePickerContainer.prepend("<i class='icon shoprite-icon-calendar'>");srDatePickerContainer.append('<button type="button" class="sr-date-picker__button"><i class="shoprite-icon-dropdown-expand"></i></button>');const srDatePickerButton=srDatePickerContainer.find(".sr-date-picker__button");const openCalendarBtn=$(".sr-date-picker__button");jsSrDatePickers.on("dp.change",function(){srDatePickerContainer.removeClass("is-show");});openCalendarBtn.on("click",function(){const rows=srDatePickerButton.parent().find(".sr-date-picker__row");rows.removeClass("is-active");if(!srDatePickerContainer.hasClass("is-show")){srDatePickerContainer.addClass("is-show");jsSrDatePickers.data("DateTimePicker").show();}else{srDatePickerContainer.removeClass("is-show");jsSrDatePickers.data("DateTimePicker").hide();}
$(document).on("click",function(e){if($(e.target).closest(".sr-date-picker-container").length<=0){srDatePickerContainer.removeClass("is-show");$(document).off("click");}});});}};ACC.otp={_autoload:[["loadOTPInput",$("#shrOneTimePinForm").length>0],["bindOtpInput",$(".js-otp-input").length>0],["bindOtpCountdown",$(".js-otp-remaining-time").length]],loadOTPInput:function(){const $otpForm=$("#shrOneTimePinForm");const $otpLength=$("#otp-length");const $otpInput=$otpForm.find("input[name='oneTimePin']");let otp=$otpInput.val();if(otp&&otp.length===parseInt($otpLength.val())){$("input[id^=otp_]").each(function(){$(this).val(otp.substring(0,1));otp=otp.substring(1);});$(".one-time-pin-submit").attr("disabled",false);}},bindOtpInput:function(){$("input.js-otp-input").on("keyup",function(){const $this=$(this);const $otpLength=$("#otp-length");const $formSubmitBtn=$(".one-time-pin-submit");const $errorSelector=$("#oneTimePin-error");const $target=$("#oneTimePin");let str="";$("input[id^=otp_]").each(function(){str=str+$(this).val();});$target.val(str);if($this.val().length===1&&$this.data("next-target")!==""){$("#"+$this.data("next-target")).focus();}
if($target.val().length===parseInt($otpLength.val())){$errorSelector.hide();$formSubmitBtn.attr("disabled",false);}else{$formSubmitBtn.attr("disabled",true);}});},bindOtpCountdown:function(){const $otpRemainingTime=$(".js-otp-remaining-time");const $otp=$otpRemainingTime.find(".otp");let $otpText=$otp.find("span");let $otpValue=$otp.find("strong");let otpMinutes=$otp.data("remainingMinutes");let otpSeconds=$otp.data("remainingSeconds");if(otpMinutes===1)$otpValue.html(otpMinutes+" "+loc("text.minute"));const secondsInterval=setInterval(function(){otpSeconds--;if(otpSeconds>1){if(otpSeconds%60===0){otpMinutes--;if(otpMinutes>1){$otpValue.html(otpMinutes+" "+loc("text.minutes"));}else{$otpValue.html(otpMinutes+" "+loc("text.minute"));}}}else{$otpText.html(loc("otp.expiration.expired"));clearInterval(secondsInterval);}},1000);},reloadOtpBindings(){ACC.otp.loadOTPInput();ACC.otp.bindOtpInput();}};ACC.account={_autoload:[["validateUpdatedPassword",$("#updatePasswordForm").length>0],["validateProfileEdit",$("#shrProfileEditForm").length>0],"validateStopCardPasswordLength",["airtimeModals",$(".airtime-modal").length],["bindSwipeForCoverBeneficiariesAction",$(".js-item-swipe-for-cover").length],["bindBeneficiaryOptionsAction",$(".js-item-swipe-for-cover").length],["validateBeneficiaryForm",$(".js-item-swipe-for-cover").length],["bindSubmitSwipeForCover",$(".js-item-swipe-for-cover").length],["bindDeactivateSwipeForCover",$(".js-item-swipe-for-cover").length],["bindCancelMembershipReasonsAction",$("#cancelMembershipForm").length],["bindCancelMembershipFreeTextAction",$("#cancelMembershipForm").length],["bindSideNavVisibilityAction",$(".js-sidenav-children").length],["enabledUpdateDetailsButton",$("#AccountDetails").length]],validateUpdatedPassword:function(){const $currentPassword=$("#currentPassword");const $newPassword=$("#newPassword");$(".js-password-validation").on("keyup",function(){if($currentPassword.val().length>=8&&$newPassword.val().length>=8){$(".js-register-validate").prop("disabled",false);}else{$(".js-register-validate").prop("disabled",true);}});const $updatePasswordForm=$("#updatePasswordForm");$updatePasswordForm.validate({ignore:'.not-active',errorElement:'span',errorClass:'sr-error',rules:{currentPassword:{required:true,minlength:8,maxlength:128},newPassword:{required:true,minlength:8,maxlength:128},},messages:{currentPassword:{minlength:loc("login.password.min.length")},newPassword:{minlength:loc("login.password.min.length")}},onkeyup:function(){ACC.validations.validateForm($updatePasswordForm);}});},validateProfileEdit:function(){const $form=$("#shrProfileEditForm");$.validator.addMethod("alphanumericsOnly",function(value,element){return this.optional(element)||ACC.validations.isAlphanumeric(value);},loc("form.validator.alphanumericsOnly"));$.validator.addMethod("lettersOnly",function(value,element){return this.optional(element)||ACC.validations.lettersOnly(value);},loc("form.validator.lettersOnly"));$.validator.addMethod("numbersOnly",function(value,element){return this.optional(element)||ACC.validations.numbersOnly(value);},loc("form.validator.numbersOnly"));$.validator.addMethod("isValidSAId",function(value){return ACC.validations.luhnCheck(value,13);});$.validator.addMethod("isNotValidSAId",function(value){return!ACC.validations.luhnCheck(value,13);});$.validator.addMethod("minAge",function(value){return ACC.validations.isOlderEnough(value);},loc("form.validator.minAge"));$.validator.addMethod('validateDate',function(value,element){return this.optional(element)||ACC.validations.isValidDate(value);},loc("form.validator.validateDate"));let maxLength=10;$('#mobileNumber').on('keypress',function(evt){const $this=$(this);const inputValue=$this.val();let zeroAfterNineDigits=false;if(inputValue.length===9&&evt.key==="0"&&this.selectionStart===0){maxLength=10;zeroAfterNineDigits=true;}else{maxLength=inputValue.startsWith("0")?10:9;}
$(this).prop('maxlength',maxLength).attr('maxlength',maxLength);if(zeroAfterNineDigits)$this.val("0"+inputValue);});$form.validate({ignore:'.not-active',errorElement:'span',errorClass:'sr-error',focusCleanup:true,rules:{firstName:{required:true,lettersOnly:true,minlength:2},lastName:{required:true,lettersOnly:true,minlength:2},mobileNumber:{required:true,minlength:9,maxlength:maxLength,number:true,numbersOnly:true},saIdNumber:{number:true,numbersOnly:true,minlength:13,maxlength:13,isValidSAId:true},birthDate:{required:true,minAge:true,validateDate:true},passport:{required:true,minlength:6,maxlength:20,alphanumericsOnly:true,isNotValidSAId:true}},messages:{pwd:{minlength:loc("form.pwd.minlength")},termsAndConditionsLink:{required:loc("form.termsAndConditionsLink.required")},saIdNumber:{isValidSAId:loc("form.saIdNumber.isValidSAId")},passport:{minlength:loc("form.passport.min.length"),isNotValidSAId:loc("form.passport.isNotValidSAId")}},errorPlacement:function(error,element){const srSwitch=element.closest(".sr-switch");if(srSwitch.length>0){srSwitch.append(error)}else{element.parent().append(error);}},onkeyup:function(){if($("#termsAndConditionsLink").length){if(ACC.register.checkboxForm===true&&ACC.register.checkASMForm){ACC.validations.validateForm($form);}}else if(ACC.register.checkASMForm){ACC.validations.validateForm($form);}},onfocusout:function(element){if($(element).hasClass("js-validate-focus")){this.element(element);}}});},validateStopCardPasswordLength:function(){$(".js-password-validation").on("input",function(event){const pwd=event.currentTarget.value;if(pwd.length>=8){$(".js-enable-button").prop("disabled",false);}else{$(".js-enable-button").prop("disabled",true);}});},airtimeModals:function(type){if(type==="active"){$("#AirtimeModalActive").addClass("is-show");}else if(type==="switch"){$("#AirtimeModalSwitch").addClass("is-show");}},bindSwipeForCoverBeneficiariesAction:function(){$(document).on("change",".js-item-swipe-for-cover",function(){const $this=$(this);if($this.is(":checked")){const $beneficiariesForm=$(".js-swipe-for-cover-beneficiaries");if($beneficiariesForm.hasClass("hidden")){$beneficiariesForm.removeClass("hidden");}
const $beneficiariesButton=$(".js-swipe-for-cover-beneficiaries-button");if($beneficiariesButton.hasClass("hidden")){$beneficiariesButton.removeClass("hidden");}}else{$("#swipeForCoverModal").addClass("is-show");}});},bindBeneficiaryOptionsAction:function(){const $form=$("#shrSwipeForCoverForm");const $firstNameInput=$form.find("input[id='firstName']");const $lastNameInput=$form.find("input[id='lastName']");const $phoneNumberInput=$form.find("input[id='phoneNumber']");const $button=$(".js-swipe-for-cover-beneficiaries-button");if($("input[name='useBeneficiariesData']").is(":checked")){$firstNameInput.prop("disabled",false);$lastNameInput.prop("disabled",false);$phoneNumberInput.prop("disabled",false);}
$(document).on("click","input[name='useBeneficiariesData']",function(){const $input=$(this);const $customerDataInput=$("input[name='useCustomerData']");if($input.is(":checked")&&!$input.hasClass("was-selected")){if($customerDataInput.is(":checked")){$customerDataInput.prop("checked",false);$customerDataInput.removeClass("was-selected");}
$input.val("true");$input.addClass("was-selected");$firstNameInput.prop("disabled",false);$lastNameInput.prop("disabled",false);$phoneNumberInput.prop("disabled",false);$button.prop("disabled",true);}else{$input.prop("checked",false);$input.removeClass("was-selected");$firstNameInput.val("");$lastNameInput.val("");$phoneNumberInput.val("");$firstNameInput.prop("disabled",true);$lastNameInput.prop("disabled",true);$phoneNumberInput.prop("disabled",true);if(!$customerDataInput.is(":checked")){$button.prop("disabled",true);}}
const $errorLabel=$("span[id='useBeneficiariesData.errors']");if($errorLabel.length){$errorLabel.hide();}});$(document).on("click","input[name='useCustomerData']",function(){const $input=$(this);const $beneficiariesData=$("input[name='useBeneficiariesData']");if($input.is(":checked")&&!$input.hasClass("was-selected")){if($beneficiariesData.is(":checked")){$beneficiariesData.prop("checked",false);$beneficiariesData.removeClass("was-selected");$firstNameInput.val("");$lastNameInput.val("");$phoneNumberInput.val("");$firstNameInput.prop("disabled",true);$lastNameInput.prop("disabled",true);$phoneNumberInput.prop("disabled",true);$form.find("span[id='firstName-error']").hide();$form.find("span[id='lastName-error']").hide();$form.find("span[id='phoneNumber-error']").hide();}
$input.addClass("was-selected");$input.val("true");$button.prop("disabled",false);}else{$input.prop("checked",false);$input.removeClass("was-selected");if(!$beneficiariesData.is(":checked")){$button.prop("disabled",true);}}
const $errorLabel=$("span[id='useBeneficiariesData.errors']");if($errorLabel.length){$errorLabel.hide();}});},validateBeneficiaryForm:function(){const $form=$("#shrSwipeForCoverForm");$.validator.addMethod("numbersOnly",function(value,element){return this.optional(element)||ACC.validations.numbersOnly(value);},loc("form.validator.numbersOnly"));$.validator.addMethod("lettersOnly",function(value,element){return this.optional(element)||ACC.validations.lettersOnly(value);},loc("form.validator.lettersOnly"));$form.validate({ignore:'.not-active',errorElement:'span',errorClass:'sr-error',focusCleanup:true,rules:{firstName:{required:true,lettersOnly:true,minlength:2},lastName:{required:true,lettersOnly:true,minlength:2},phoneNumber:{required:true,minlength:9,maxlength:10,number:true,numbersOnly:true}},messages:{phoneNumber:{minlength:loc("form.mobileNumber.minlength")}},errorPlacement:function(error,element){element.parent().append(error);},onkeyup:function(){const $button=$(".js-swipe-for-cover-beneficiaries-button");$form.valid()?$button.attr('disabled',false):$button.attr('disabled',true);},onfocusout:function(element){if($(element).hasClass("js-validate-focus")){this.element(element);}}});},bindSubmitSwipeForCover:function(){$(document).on("click",".js-swipe-for-cover-beneficiaries-button",function(e){e.preventDefault();const $form=$("#shrSwipeForCoverForm");if($form.valid()){$form.submit();}});},bindDeactivateSwipeForCover:function(){$(document).on("click",".js-deactivate-swipe-for-cover-btn",function(e){e.preventDefault();const $optOutForm=$("#swipeForCoverOptOutForm");$optOutForm.submit();});},bindCancelMembershipReasonsAction:function(){$(document).on("change","select[id='reason']",function(){const $select=$(this);const $selectedOption=$select.find(":selected");const $form=$("#cancelMembershipForm");const $textArea=$form.find("#freeTextReason");const triggerFreeText=$selectedOption.data("freeText");if(triggerFreeText){$textArea.removeClass("hidden");$("#usingFreeText").val(true);}else{if($textArea.is(":visible")){$textArea.val("");$textArea.addClass("hidden");}
$("#usingFreeText").val(false);}
const validOption=$selectedOption.data("validOption");const $submitButton=$form.find("#cancelMyMembershipButton");const textAreaVal=$.trim($textArea.val());if(validOption&&(!triggerFreeText||(triggerFreeText&&textAreaVal!==''&&textAreaVal.length>0))){$submitButton.prop("disabled",false);}else{$submitButton.prop("disabled",true);}
const $errorLabel=$("span[id='reason.errors']");$errorLabel.hide();});},bindCancelMembershipFreeTextAction:function(){$(document).on("change keyup paste","#freeTextReason",function(){const $textArea=$(this);const textAreaVal=$.trim($textArea.val());const $form=$("#cancelMembershipForm");const $submitButton=$form.find("#cancelMyMembershipButton");if(textAreaVal!==''&&textAreaVal.length>0){$submitButton.prop("disabled",false);}else{$submitButton.prop("disabled",true);}
const $errorLabel=$("span[id='freeTextReason.errors']");$errorLabel.hide();});},bindSideNavVisibilityAction:function(){const $componentWrappers=$(".js-sidenav-children");if($componentWrappers.length>0){$componentWrappers.each(function(){const $component=$(this);const $componentChildren=$component.find("li");if($componentChildren.length>0&&$component.hasClass("hidden")){$component.removeClass("hidden");}});}},enabledUpdateDetailsButton:function(){const $accountDetails=$("#AccountDetails");const $accountDetailsButton=$accountDetails.find("#AccountDetailsButton");const $accountDetailsInputs=$accountDetails.find(".form-section__input");const dataUser={};$.each($accountDetailsInputs,function(index,element){const $element=$(element);dataUser[$element.attr("id")]=$element.val();});$accountDetailsInputs.on("keyup",function(){const $this=$(this);if($this.val()!==dataUser[$this.attr("id")]){$this.addClass("updated");}else{$this.removeClass("updated");}
setTimeout(function(){const updates=$accountDetails.find(".form-section__input.updated").length;const errors=$accountDetails.find(".form-section__input.sr-error").length;const disabled=!(updates>0&&errors===0);$accountDetailsButton.attr("disabled",disabled);},0);});}};ACC.addtocartaction={}
$(document).ready(function()
{});ACC.listaddtocartaction={}
$(document).ready(function()
{});ACC.listorderformaction={}
$(document).ready(function()
{});ACC.listpickupinstoreaction={}
$(document).ready(function()
{});ACC.pickupinstoreaction={}
$(document).ready(function()
{});ACC.shareonsocialnetworkaction={}
$(document).ready(function()
{});ACC.vieworderaction={}
$(document).ready(function()
{});ACC.viewstoreaction={}
$(document).ready(function()
{});